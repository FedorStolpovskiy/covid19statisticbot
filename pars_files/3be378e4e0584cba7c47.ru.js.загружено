(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["header"],{1146:function(e,t,n){"use strict";n.r(t);var o=n(6),r=n(10),i=n(1559),a=n.n(i),s=n(4),c=n.n(s),u=n(11),l=n(7),p=n(14),d=n(26),m=n(8),g=n(360),f=n(83),h=n(25),_=n(787),v=n(22),y=n(2956),b=n(1570),S=n.n(b),I=n(16),E=n(118),C=n(42),w=n(1571),x=Object(d.a)({resolved:{},chunkName:function(){return"emergency"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("emergency").then(n.bind(null,205))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var o=this.resolve(t);return n(o)},resolve:function e(){return 205}},{ssr:!1}),k={updateText:v.a.updateSearchText,reduceStackByLastMode:v.a.reduceStackByLastMode,close:C.a.close,openClearHistoryDialog:v.a.openClearHistoryDialog,setSearchFormType:v.a.setSearchFormType,openHomePanel:v.a.openHomePanel,toggleSidebar:v.a.toggleSidebar,reset:C.a.reset,setHeaderFocus:v.a.setHeaderFocus,closeWhatsherePreview:E.a.closeWhatsherePreview,hideClearHistorySuccessPopup:v.a.hideClearHistorySuccessPopup,setForceOpenSuggest:v.a.setForceOpenSuggest},T=Object(p.a)(u.b(function(e){var t,n,o=e.form,i=e.search,a=I.d(e),s=I.g(e,"usermaps"),c=I.g(e,"search"),u=I.h(e,"search"),l=I.h(e,"routes"),p=I.h(e,"traffic"),d=I.h(e,"masstransit"),m=o.text,g=l&&(null===(t=l.routerResponse)||void 0===t?void 0:null===(n=t.routes[l.activeRouteIndex])||void 0===n?void 0:n.coordinates),f=["home","traffic","masstransit"].includes(a),v=(m||!f||p&&p.currentTrafficEvent||d&&d.masstransitMode)&&!(l&&l.routerResponse&&(l.routerResponse.routes[l.detailedIndex]||I.h(e,"feedback"))),y=(!e.homePanel.isOpen||"home"!==a||"nearby"!==o.formType.id)&&""===m,b=I.p(e),S=(I.g(e,a),0===e.stack.length),E=u&&"TEXT"===u.request.searchType,C="home"===a?e.homePanel.isOpen:"masstransit"===a?a===I.b(e)&&!d:a===I.b(e);return Object(r.a)(Object(r.a)({},o),{},{mode:a,showClose:Boolean(v),showBack:e.stack.length>1&&!0,isCollapsed:b,isLoading:Boolean(i.loadingRequest),isEmptyStack:S,isHomePanelOpen:C,isSerpOpen:E,initialAutoFocusEnabled:h.G(e),shouldForceOpenSuggest:e.shouldForceOpenSuggest,showCatalogIcons:y,isTextChanged:m!==h.z(c),routeCoordinates:g,routesIsLoading:Boolean(l&&l.isLoading),clearHistorySuccessPopupShown:e.clearHistorySuccessPopupShown,isInputFocused:e.isHeaderFocused,hasSearchInPrevStack:I.j(e,"search"),isUsermaps:Boolean(s.length),placeholder:h.v(e),headerHeight:_.b(e,{real:!0}),blockingHeaderHeight:_.b(e),shutterMarginTop:I.f(e),showInput:_.c(e),isCovid:"covid"===a,notifications:e.notifications,isWide:Boolean(I.r(e)&&!b)})},k),m.b,g.b),R=Object(l.a)("header-view"),N=function(e){function t(t){var n;(n=e.call(this,t)||this)._onMapViewportUpdate=function(e){n.state.bottom!==e.bottom&&n.setState({bottom:e.bottom})},n._onPinClick=function(){var e=n.props;e.isHomePanelOpen?e.isCollapsed&&e.toggleSidebar():e.openHomePanel()},n._onBackClick=function(){n.props.close()},n._onCloseClick=function(){n.props.reduceStackByLastMode()},n._onFocus=function(){n.props.setHeaderFocus(!0)},n._onBlur=function(){var e=n.props;e.setHeaderFocus(!1),e.setSearchFormType({id:"common"})},n._onInputChange=function(e,t){n.props.updateText(e),t&&"clear"===t.reason&&n.props.reset()},n._renderMainLayout=function(e){var t=n.props;if(!t.showInput)return null;if(t.isCovid)return s.createElement("div",{className:R("main-layout")},s.createElement(w.a,null));var o=!(!t.initialAutoFocusEnabled||t.config.uatraits.isMobile);return s.createElement("div",{className:R("main-layout")},s.createElement("div",{className:R("form-layout")},s.createElement("div",{className:R("search",{upper:t.isCollapsed||t.isEmptyStack})},s.createElement(y.a,{text:t.text,onInputChange:n._onInputChange,inactive:t.inactive,isTextChanged:t.isTextChanged,initialFocus:o,showCatalogIcons:t.showCatalogIcons,placeholder:t.placeholder,showClear:e,isFocused:t.isInputFocused,isLoading:t.isLoading,shouldForceOpenSuggest:t.shouldForceOpenSuggest,setForceOpenSuggest:t.setForceOpenSuggest,onBlur:n._onBlur,onFocus:n._onFocus,onPinClick:n._onPinClick,onBackClick:t.showBack?n._onBackClick:void 0,onCloseClick:t.showClose?n._onCloseClick:void 0,hideRouteButton:"routes"===t.mode||Boolean(t.config.experiments.ui.serviceBar&&!0),hasSearchInPrevStack:t.hasSearchInPrevStack}))))};var o="undefined"!=typeof window?window.document.querySelector("."+R()+" .search-form-view input"):null;return n._initialSearchText=o&&o.value||"",n.state={bottom:0},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;this._initialSearchText&&this._initialSearchText!==e.text&&e.updateText(this._initialSearchText),e.text&&f.p({text:e.text},e.config),e.addLayoutListener(this._onMapViewportUpdate)},n.componentDidUpdate=function(e){this.props},n.componentWillUnmount=function(){this.props.removeLayoutListener(this._onMapViewportUpdate)},n.render=function(){var e=this.state,t=this.props,n=(t.config,null!==t.bodyHeight&&0===t.blockingHeaderHeight?Math.min(t.bodyHeight-t.headerHeight-(e.bottom+t.shutterMarginTop),0):0),o="home"===t.mode;return s.createElement("div",{className:R({noprint:!0,wide:t.isWide}),style:{transform:"translateY("+n+"px)"}},this._renderMainLayout(!1),o&&t.notifications&&0!==t.notifications.length?s.createElement(x,{notifications:t.notifications,view:"stripe"}):null)},t}(s.PureComponent);t.default=T(N)},1147:function(e,t,n){"use strict";var o=n(13),r=n(6),i=(n(1563),n(4)),a=n(5),s=n(11),c=n(7),u=n(155),l=n(14),p=n(8),d=n(41),m=n(543),g=n(302),f=n(16),h=n(83),_=n(46),v=n(25),y=n(453),b=n(2978),S=n(22),I=n(99),E=n(118),C=n(358),w=n(9),x=n(454),k=n(363),T=n(77),R=n(15),N=n(443),O=(n(455),n(593)),D=Object(c.a)("search-form-view"),F=5,j={search:I.a.search,openCard:E.a.openCard,searchCategoryNearby:I.a.searchCategoryNearby,openCategory:I.a.openCategory,updateSearch:I.a.updateSearch,updateSearchText:S.a.updateSearchText,toggleHeader:S.a.toggleHeader,openCovidMap:C.a.open},L=Object(l.a)(d.b,p.b,s.b(function(e){var t,n,o=f.g(e,"usermaps"),r=f.g(e,"routes"),i=r[r.length-1],a=null==i?void 0:null===(t=i.routerResponse)||void 0===t?void 0:null===(n=t.routes[i.activeRouteIndex])||void 0===n?void 0:n.coordinates;return{mapLocation:e.map.location,region:e.mapRegion,userLocation:e.geolocation,formType:e.form.formType,routeCoordinates:a,isEmptyStack:0===e.stack.length,isUsermaps:Boolean(o.length)}},j),m.b),B=function(e){function t(t){var n;return(n=e.call(this,t)||this)._input=null,n._analyticsRef=i.createRef(),n._suggestAnalyticsRef=i.createRef(),n._onSuggestItemClick=function(e){e.onClick&&e.onClick(),n.props.onSuggestClick&&n.props.onSuggestClick()},n._suggestHistoryLoader=function(){var e=n.props.formType,t=n.props.config.experiments.ui.moreSnippetsInSuggest?10:F;return"places-tab"===e.origin?Promise.resolve([]):h.o(n.props.config).then(function(e){return[{title:"История",items:e.slice(-t).map(function(e){return{type:"history",text:e.text,title:{text:e.text}}}).reverse()}]})},n._suggestLoader=function(e,t){if("nearby"===n.props.formType.id){if(!e)return Promise.resolve({items:[]})}else if(!e)return n._suggestHistoryLoader();var o=n.props.getToday().getTime()+"_"+Math.floor(1e6*Math.random()),r=n.props.mapLocation,i=n.props.userLocation.currentPosition,a={bases:"geo,biz,transit",add_rubrics_loc:1,add_chains_loc:1,part:e,pos:t,spn:r.span&&r.span.join(","),ll:r.center.join(","),ull:i?Object(b.a)(i):void 0,client_reqid:o,origin:"maps-search-form"};n.props.config.experiments.ui.moreSnippetsInSuggest&&(a.n=10);var s=n.props.config.experiments.suggestParams;return s&&Object.entries(s).forEach(function(e){var t=e[0],n=e[1];return a[t]=n.join(",")}),n._analyticsRef.current&&n._analyticsRef.current.logEvent("request",{part:e,client_reqid:o}),g.a.fetch(a,n.props.config).then(function(e){return{items:e.results,rawResponse:e}})},n._hideInput=function(){var e=n.props;e.config.query["no-header"]&&e.toggleHeader(!1)},n._onTextSubmit=function(e){var t,o=n.props,r=null===(t=n.props.isTextChanged)||void 0===t||t,i=!o.text||!r&&!o.allowSubmitUnchangedText;if(window.document.activeElement!==n._input&&i){var a=n._input;return a.focus(),void(a.setSelectionRange&&a.setSelectionRange(a.value.length,a.value.length))}n._logEvent(o.text,e),n._submit({text:o.text})},n._onFormSubmit=function(e){e.preventDefault(),n._onTextSubmit("enter")},n._onSelectSuggestItem=function(e,t){var o=t.value,r=t.itemIndex,i=t.type,a=t.data,s={clientUsecase:"suggest",text:e};a&&a.rawResponse&&(s.suggest_reqid=a.rawResponse.suggest_reqid),o?("action"in o&&(s.action=o.action,s.personalizationInfo=o.personalization_info,s.uri=o.uri,s.search_query=o.search_query||o.text),s.type=o.type,n._suggestAnalyticsRef.current&&n._suggestAnalyticsRef.current.logEvent("click",{suggest_log_id:"log_id"in o?"string"==typeof o.log_id?o.log_id:JSON.stringify(o.log_id):void 0,suggest_reqid:s.suggest_reqid,index:r})):"enter"===i&&n._logEvent(e,i),n._submit(s)},n._onCatalogItemClick=function(e){var t=n.props;"nearby"===t.formType.id&&t.formType.data?t.searchCategoryNearby(e,t.formType.data.place):t.openCategory(e.category,{mobileViewState:"mini"},{origin:"form",displayText:e.displayText}),u.a.reachGoal("search_form_submit"),n._hideInput()},n._triggerInputChange=function(){n._input&&(n._input.blur(),n._input.focus())},n._submit=function(e){var t=e.text.trim();n.props.onInputChange(t),n._addPersonalSuggest(e),n._updateSearch(e),u.a.reachGoal("search_form_submit"),n._initialUserInput=t||"",n._input.blur(),e.search_query&&e.search_query!==e.text||h.p(e,n.props.config),n._hideInput()},n._addPersonalSuggest=function(e){(e.personalizationInfo||e.uri)&&g.a.addPersonal({prefix:n._initialUserInput,suggest:e.personalizationInfo?JSON.stringify(e.personalizationInfo):e.uri,suggest_reqid:e.suggest_reqid},n.props.config,n.props.timeContext)},n._logEvent=function(e,t){n._analyticsRef.current&&n._analyticsRef.current.logEvent(t,{initial_query:e})},n._updateSearch=function(e){var t=n.props,o=e.text.trim();if(t.updateSearchText(e.text),e.uri&&!_.k(e.uri)){var r={from:"search",origin:"form",text:o,suggestReqid:e.suggest_reqid,clientUsecase:e.clientUsecase,center:t.mapLocation.center,span:t.mapLocation.span,id:"business"===e.type?_.d(e.uri):void 0,uri:e.uri};v.O(r),t.openCard(r,{mobileViewState:"mini",forceZoomToResult:!0})}else if(o){var i={searchType:"TEXT",text:o,origin:"form",suggestReqid:e.suggest_reqid,clientUsecase:e.clientUsecase,center:t.mapLocation.center,span:t.mapLocation.span},a=t.formType,s="data"in a&&a.data&&"place"in a.data?a.data.place:void 0;e.search_query&&(i.text=e.search_query,i.displayText=o),i.nearbyPlace=s,"nearby"===t.formType.id&&(i.restrictSpan=1,i.autoscale=!1),"origin"in a&&a.origin&&(i.origin=a.origin),i.zoom=t.mapLocation.zoom,i.bounds=t.mapLocation.bounds,t.routeCoordinates&&(i.routeCoordinates=v.R(t.routeCoordinates,t.mapLocation.zoom)),t.isUsermaps&&(i.isUsermaps=t.isUsermaps),!e.search_query&&e.uri&&_.k(e.uri)&&(i.type=["geo"]);var c=i.isUsermaps||i.routeCoordinates||"nearby"===t.formType.id?"push":"reset";t.search(i,{mobileViewState:"mini",stackAction:c})}},n._onInputChange=function(e,t){n.props.onInputChange(e,t),t&&"arrow"===t.reason||(n._initialUserInput=e)},n._onInputFocus=function(){n.props.onFocus&&n.props.onFocus()},n._onInputPaste=function(){n._triggerInputChange()},n._onSuggestHide=function(){n.setState({suggestIsShown:!1}),n.props.onBlur&&n.props.onBlur(),n._hideInput()},n._onResponseSuccess=function(e){var t=n.props.showCatalogIcons,o=e.groups.reduce(function(e,t){return e+t.items.length},0);n.setState({suggestIsShown:o>0||t})},n._fieldRef=function(e){n._input=e,n.props.fieldRef&&n.props.fieldRef(e)},n._preventScroll=function(e){e.preventDefault(),e.stopPropagation()},n._mapSuggestItemToString=function(e){return"history"===e.type?e.text.trim():("substitute"===e.action&&e.text,e.title.text.trim())},n._isSubstitutionSuggestion=function(e){return Boolean("history"!==e.content.type&&"substitute"===e.content.action&&e.content.button_text)},n._shouldUseSubstitutionSuggestions=function(){n.props.config;return Boolean(!1)},n._getSubstitutionSuggestions=function(e){return e.filter(n._isSubstitutionSuggestion).reduce(function(e,t){return e.some(function(e){return e.content.title.text===t.content.title.text})||e.push(t),e},[]).slice(0,3)},n._renderDropWrapper=function(e,t){var o=t.groups.reduce(function(e,t){return e+t.items.length},0),r=t.rawResponse&&t.rawResponse.suggest_reqid,a=!r;return i.createElement(w.a,{key:a?"client":r,name:a?"client_suggest":"suggest",nodeState:{query:n.props.text,suggest_reqid:r,client_reqid:t.rawResponse&&t.rawResponse.client_reqid,length:o},nodeRef:n._suggestAnalyticsRef},e)},n._renderDropItem=function(e,t){var r=n._getSubstitutionSuggestions(t);return n._shouldUseSubstitutionSuggestions()&&r.includes(e)?null:i.createElement(N.default,Object(o.a)({},e,{onClick:function(){return n._onSuggestItemClick(e)}}))},n._renderCatalog=function(){var e=n.props,t="places-tab"===e.formType.origin,o=y.a(void 0,{limit:t?16:8,region:e.region,config:e.config});return i.createElement("div",{className:D("catalog",{touch:e.touchVersion,borderless:t})},i.createElement(x.default,{items:o,onClick:n._onCatalogItemClick,size:"large",theme:"negative"}))},n._renderSubstitutionalSuggestions=function(e){var t=n._getSubstitutionSuggestions(e);return n._shouldUseSubstitutionSuggestions()&&0!==t.length?i.createElement("div",{className:D("substitution-suggestions")},t.map(function(e){return i.createElement(w.a,{name:"substitution_suggestion",key:e.key,logClick:!0},i.createElement("div",{className:D("substitution-suggestion")},i.createElement(R.a,{onClick:e.onButtonClick,size:"small",view:"secondary-gray"},e.content.title.text)))})):null},n.state={suggestIsShown:!1},n._initialUserInput=t.text||"",n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){var t,n=this.props;(e.formType.id!==n.formType.id&&"common"!==n.formType.id||!e.isFocused&&n.isFocused)&&(null===(t=this._input)||void 0===t||t.click())},n.render=function(){var e,t,n,r=this,s=this.props,c=this.state,u=null!==(e=s.view)&&void 0!==e?e:"default",l=null!==(t=s.inputView)&&void 0!==t?t:"search",p=null!==(n=s.showClear)&&void 0!==n&&n||"places-tab"===s.formType.origin,d=s.inactive?"div":"form",m={search:function(){return r._onTextSubmit("click")},cancel:function(e){s.isTextChanged&&s.updateSearch({}),e&&r._onSuggestHide()}},g=[D({view:u,suggested:c.suggestIsShown,touch:s.touchVersion}),s.className].filter(Boolean).join(" "),f=s.inputLeftIcons?[s.inputLeftIcons(m)]:void 0,h=s.inputRightIcons?[s.inputRightIcons(m)]:void 0;return i.createElement(w.a,{name:"search_form",nodeRef:this._analyticsRef},i.createElement(O.default,{isFullScreen:Boolean(s.isFocused)&&!s.disableFullScreen,noPadding:!0,renderDropWrapper:this._renderDropWrapper},function(e){return i.createElement(d,{action:"form"===d?"":void 0,className:g,onSubmit:r._onFormSubmit,onWheel:r._preventScroll},s.renderLeftIcons?s.renderLeftIcons(m):null,i.createElement("div",{className:D("input")},i.createElement(k.default,Object(o.a)({isPhone:!1,fieldRef:r._fieldRef,analyticsRef:r._analyticsRef,value:s.text,view:l,placeholder:s.placeholder||"Поиск мест и адресов",showClear:p,disabled:s.disabled,disabledScroll:s.disabledScroll,tabIndex:s.config.uatraits.isMobile?-999:void 0,shouldForceOpenSuggest:s.shouldForceOpenSuggest,setForceOpenSuggest:s.setForceOpenSuggest,fullHeight:s.fullHeight,leftIcons:f,rightIcons:h,renderDropWrapper:r._renderDropWrapper,renderDropItem:r._renderDropItem,mapItemToString:r._mapSuggestItemToString,loader:r._suggestLoader,onSelect:r._onSelectSuggestItem,onChange:r._onInputChange,onFocus:r._onInputFocus,onPaste:r._onInputPaste,onHide:r._onSuggestHide,onResponseSuccess:r._onResponseSuccess,onSuggest:s.onSuggest,renderDropInPopup:!0,renderExtraFirst:s.renderExtraFirst||!s.showCatalogIcons,contentMargin:"0",requestOnEmpty:!s.noRequestOnEmpty,initialFocus:s.initialFocus,initialSuggest:s.initialSuggest,getTarget:function(){return a.findDOMNode(r)},renderExtra:s.showCatalogIcons?r._renderCatalog:r._renderSubstitutionalSuggestions,showOnEmpty:s.showCatalogIcons,showSuggestOnClear:s.showSuggestOnClear,showSuggestOnFocus:s.showSuggestOnFocus,collapsed:s.collapsed},e)),i.createElement(T.a,{chunk:"search"}),i.createElement(T.a,{chunk:"search-snippet"})),i.createElement(T.a,{chunk:"home"}),s.renderRightIcons?s.renderRightIcons(m):null)}))},t}(i.Component);t.a=L(B)},1559:function(e,t,n){},1561:function(e,t,n){},1563:function(e,t,n){},1565:function(e,t){},1566:function(e,t,n){},1568:function(e,t){},1569:function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 1a9.002 9.002 0 0 0-6.366 15.362c1.63 1.63 5.466 3.988 5.693 6.465.034.37.303.673.673.673.37 0 .64-.303.673-.673.227-2.477 4.06-4.831 5.689-6.46A9.002 9.002 0 0 0 12 1zm0 12.079a3.079 3.079 0 1 1 0-6.158 3.079 3.079 0 0 1 0 6.158z" fill="currentColor"/></svg>'},1570:function(e,t){},1571:function(e,t,n){"use strict";var o=n(6),r=(n(1572),n(4)),i=n(11),a=n(16),s=n(7),c=n(9),u=n(33),l=n(15),p=i.b(function(e){var t=a.h(e,"covid");return{isIsolation:Boolean(t&&t.isolation),config:e.config}}),d=Object(s.a)("embed-header-view"),m=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._getUrl=function(){var e=t.props;return e.config.hosts.maps+(e.config.query.embed?e.isIsolation?"covid19/isolation":"covid19":"")},t._renderButton=function(){return r.createElement("div",{className:d("button")},r.createElement(c.a,{name:"embed_button",logClick:!0},r.createElement(l.a,{view:"air",size:"medium",url:t._getUrl(),target:"_blank",icon:r.createElement("div",{className:d("icon")})},"Открыть в Яндекс.Картах")))},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this.props;if("covid-map"===e.config.query.embed)return e.config.query["embed-hide-maps-button"]?null:this._renderButton();var t=u.b({type:"black",lang:e.config.lang});return r.createElement("div",{className:d()},r.createElement(c.a,{name:"embed_header",logClick:!0},r.createElement("a",{className:d("wrapper"),href:this._getUrl(),target:"_blank"},r.createElement("div",{className:d("icon")}),r.createElement("div",{className:d("logo"),style:{backgroundImage:"url("+t+")"}}))))},t}(r.Component);t.a=p(m)},1572:function(e,t,n){},2595:function(e,t,n){},2956:function(e,t,n){"use strict";var o=n(13),r=n(6),i=(n(1561),n(4)),a=n(7),s=n(14),c=n(8),u=n(9),l=n(15),p=n(43),d=n(38),m=n(1147),g=(n(1566),n(11)),f=n(111),h=n(77),_=n(20),v=Object(a.a)("route-control"),y={openPanel:f.a.open},b=g.b(function(e){return{config:e.config,mapRegion:e.mapRegion}},y)(function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onClick=function(e){e.preventDefault(),t.props.openPanel()},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=_.h("routes",e.mapRegion,e.config);return i.createElement("div",{className:v()},i.createElement("div",{className:v("inner")},i.createElement(p.a,{text:"Маршруты",position:"bottom",isAir:!0,delay:e.delay},i.createElement(u.a,{name:"routes_control",logClick:!0},i.createElement(l.a,{view:"search",size:"medium",icon:e.icon||i.createElement("div",{className:v("icon")}),url:t,title:"Построить маршрут",onClick:this._onClick})))),i.createElement(h.a,{chunk:"routes"}))},t}(i.Component)),S=n(1568),I=n.n(S),E=n(16),C=n(1569),w=n.n(C),x=Object(a.a)("small-search-form-view"),k=1e3,T=Object(s.a)(c.b),R=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._isSerpHeader=function(){t.props;return!1},t._onClose=function(){var e,n;null===(e=(n=t.props).onCloseClick)||void 0===e||e.call(n),t.props.onInputChange("")},t._renderRouteControl=function(){return i.createElement("div",{className:x("button")},i.createElement(b,{icon:i.createElement("div",{className:x("icon",{type:"route"})}),delay:k}))},t._renderClose=function(){return i.createElement("div",{className:x("button")},i.createElement(p.a,{text:"Закрыть",position:"bottom",isAir:!0,delay:k},i.createElement(u.a,{name:"close",logClick:!0},i.createElement(l.a,{view:"search",size:"medium",onClick:t._onClose,icon:i.createElement("div",{className:x("icon",{type:"close"})})}))))},t._renderSearchButton=function(){var e=t.props;return i.createElement("div",{className:x("button")},e.isLoading?i.createElement("div",{className:x("spinner")},i.createElement(d.a,{view:"small"})):i.createElement(p.a,{text:"Найти",position:"bottom",isAir:!0,delay:k},i.createElement(l.a,{view:"search",size:"medium",type:"submit",tabIndex:2,icon:i.createElement("div",{key:"icon",className:x("icon",{type:"search"})})})))},t._renderRightIcons=function(){var e=t.props;return t._isSerpHeader()?e.isFocused?i.createElement("button",{className:x("serp-submit"),type:"submit"},i.createElement("div",{className:x("serp-submit-text")},"Найти")):null:i.createElement(i.Fragment,null,t._renderSearchButton(),e.onCloseClick||!e.hideRouteButton?i.createElement("div",{className:x("delimiter")}):null,e.onCloseClick?t._renderClose():e.hideRouteButton?null:t._renderRouteControl())},t._renderLeftIcons=function(){var e=t.props,n=Boolean(e.config.experiments.ui.serviceBar&&!0);return t._isSerpHeader()?null:e.onBackClick?i.createElement(u.a,{key:"back",name:"back",logClick:!0},i.createElement(l.a,{view:"search",size:"medium",onClick:e.onBackClick,icon:i.createElement("div",{className:x("icon",{type:"back"})})})):Object(E.m)(e.config)?i.createElement("div",{style:{width:"20px",flexShrink:0}}):n?i.createElement("div",{style:{width:"20px",flexShrink:0}}):i.createElement(u.a,{key:"pin",name:"pin",logClick:!0},i.createElement("div",{className:x("pin"),onClick:e.onPinClick,dangerouslySetInnerHTML:{__html:w.a}}))},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props;return this._isSerpHeader()?i.createElement(I.a,{overlay:e.isFocused,isCollapsed:e.config.isSerpWebVerticals,query:this.props.text},e.config.isSerpWebVerticals?null:i.createElement(m.a,Object(o.a)({},e,{className:x(),renderLeftIcons:this._renderLeftIcons,renderRightIcons:this._renderRightIcons,showSuggestOnClear:!0,inputView:"serp",collapsed:e.isFocused,disableFullScreen:!0,disabledScroll:"iOS"===e.config.uatraits.OSFamily}))):i.createElement(m.a,Object(o.a)({},e,{className:x(),renderLeftIcons:this._renderLeftIcons,renderRightIcons:this._renderRightIcons}))},t}(i.PureComponent);t.a=T(R)},302:function(e,t,n){"use strict";var o=n(10),r=n(110),i=n(101),a=n(48),s={outformat:"json"},c={fetch:function(e,t){return Object(i.a)({url:t.hosts.suggestApi+"suggest-geo",credentials:"include",query:Object(o.a)(Object(o.a)({v:9,fullpath:1,lang:t.locale,yu:r.a.get("yandexuid",t)},s),e)},t).then(function(t){return e.client_reqid&&(t.client_reqid=e.client_reqid),Object(o.a)(Object(o.a)({},t),{},{results:t.results.map(function(t){var n,o,r;return"object"==typeof t.title&&!t.title.text&&t.subtitle&&(t.title=t.subtitle,delete t.subtitle),e.ull||delete t.distance,e.part&&(n=e.part,r="object"==typeof(o=t).title?o.title.text:o.title,n.toLocaleLowerCase().includes(r.toLocaleLowerCase()))&&delete t.button_text,t})})})},addPersonal:function(e,t,n){Object(i.a)({url:t.hosts.suggestApi+"suggest-personal-add",mode:"no-cors",credentials:"include",query:Object(o.a)(Object(o.a)(Object(o.a)({yu:r.a.get("yandexuid",t)},s),e),{},{client:t.serviceName,timestamp:u(n)})},t).catch(function(){})},clearPersonalData:function(e,t){return Object(i.a)({url:e.hosts.suggestApi+"suggest-personal-delete-all",mode:"no-cors",credentials:"include",query:Object(o.a)(Object(o.a)({yu:r.a.get("yandexuid",e)},s),{},{client:e.serviceName,timestamp:u(t)})},e).catch(function(){})}};function u(e){return Math.round(a.i(e).getTime()/1e3)}t.a=c},363:function(e,t,n){"use strict";n.r(t);var o=n(6),r=(n(824),n(4)),i=n(7),a=n(107),s=n(23),c=n(19),u=n(172),l=n(126),p=n(57),d=Object(i.a)("suggest"),m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._pressed=!1,n._justCleared=!1,n._blurTimer=0,n._skipNextInputFocusEvent=!1,n._needsScrollToInputEnd=!1,n._input=null,n._ref=r.createRef(),n._setInitialFocus=function(){var e,t=n.props,o=n._input;n._skipNextInputFocusEvent=!0,o.focus(),null===(e=o.setSelectionRange)||void 0===e||e.call(o,t.value.length,t.value.length),t.initialSuggest&&n._loadDrop(t.value)},n._scrollToInputEndIfNeed=function(){n._needsScrollToInputEnd&&(n._input.scrollLeft=n._input.scrollWidth,n._needsScrollToInputEnd=!1)},n._removePressedState=function(){n._pressed=!1},n._onWindowFocus=function(){n._skipNextInputFocusEvent=!0},n._onItemClick=function(e,t){var o=n.state;if(o.isDropShown){var r=o.data.groups[e];if(r){var i=r.items[t];if(i){var a=n.props,s=a.onItemClick,c=a.onSelect,u=a.mapItemToString;s&&s(),c(u(i),{value:i,groupIndex:e,itemIndex:t,type:"click",data:o.data}),n._cancelDataLoad(),n.setState({isDropShown:!1,selectedItemInfo:void 0})}}}},n._onItemButtonClick=function(e,t){n._needsScrollToInputEnd=!0;var o=n._selectResult({group:e,item:t});n.setState({selectedItemInfo:o.selectedItemInfo}),n._onInputChange(o.text,{reason:"button"}),n._input.focus(),window.clearTimeout(n._blurTimer)},n._onItemMouseEnter=function(e,t){n.setState({selectedItemInfo:{group:e,item:t,isHover:!0}})},n._onItemMouseLeave=function(){n.setState({selectedItemInfo:void 0})},n._onVisibilityChange=function(){window.document.activeElement===n._input&&"visible"===document.visibilityState&&n._onInputFocus()},n._onInputClick=function(e){var t;n.state.isDropShown||window.document.activeElement!==n._input||(n._onInputFocus(),(null===(t=n.props.analyticsRef)||void 0===t?void 0:t.current)&&n.props.analyticsRef.current.logEvent("click"));n.props.onClick&&n.props.onClick(e)},n._onInputChange=function(e,t){var o=n.props,r=n._shouldShowDrop(),i=Boolean(t&&"clear"===t.reason);n._justCleared=i,n.setState({selectedItemInfo:void 0,isClearChange:i},function(){n._shouldShowDrop()?n._loadDrop(e):r&&n._hideDrop(),n._justCleared=!1}),o.onChange(e,t)},n._onInputFocus=function(e){var t=n.props;if(!n._skipNextInputFocusEvent||t.isPhone){var o=!e||Boolean(e.relatedTarget)||t.showSuggestOnFocus;!t.onFocus||!o&&t.isPhone||t.onFocus(),n.setState({isFocused:!0,isClearChange:n._justCleared},function(){o&&n._shouldShowDrop()&&n._loadDrop(n.props.value)})}else n._skipNextInputFocusEvent=!1},n._shouldShowDrop=function(){var e=n.props,t=e.value,o=e.requestOnEmpty,r=e.showSuggestOnClear,i=n.state,a=i.isFocused,s=i.isClearChange;return(Boolean(t||o)||n._pressed||a)&&!s||!t&&s&&Boolean(r)},n._onInputBlur=function(e){n._cancelDataLoad(),n._setHideTimeout(),n.setState({isFocused:!1}),n.props.onBlur&&e&&n.props.onBlur(e)},n._setHideTimeout=function(){window.clearTimeout(n._blurTimer),n._blurTimer=window.setTimeout(function(){n._pressed?n._setHideTimeout():n.props.showDropAlways||n._hideDrop()},300)},n._onDataLoad=function(e){var t=n.props,o=t.onResponseSuccess,r=t.renderExtra,i=t.showOnEmpty,a="groups"in e?e.groups:Array.isArray(e)?e:[e],s={groups:a,rawResponse:"rawResponse"in e?e.rawResponse:void 0},c=a.reduce(function(e,t){return e+t.items.length},0);n.setState({isDropShown:c>0||Boolean(r)||Boolean(i),data:s}),o&&o(s)},n._cancelDataLoad=function(){c.a.cancel(n._onDataLoadAction)},n._loadDrop=function(e){var t=n.props,o=t.loader,r=t.onResponseFail;n._cancelDataLoad(),n._blurTimer&&window.clearTimeout(n._blurTimer);var i=n._input.selectionStart||0;n._onDataLoadAction=c.a.create(o(e,i),{success:n._onDataLoad,fail:r})},n._hideDrop=function(){n._cancelDataLoad(),n.setState({isDropShown:!1,data:{groups:[]},selectedItemInfo:void 0},function(){n.props.onHide&&n.props.onHide()})},n._onInputKeyDown=function(e){var t,o=n.props,r=n.props,i=r.onSelect,a=r.mapItemToString,s=r.value,c=n.state,u=c.data,l=c.selectedItemInfo,d=c.isDropShown,m=l||{},g=m.group,f=void 0===g?-1:g,h=m.item,_=void 0===h?-1:h;switch(u.groups[f]&&(t=u.groups[f].items[_]),e.keyCode){case p.a.ENTER:e.preventDefault(),t&&l&&!l.isHover?i(a(t),{value:t,groupIndex:f,itemIndex:_,type:"enter",data:u}):i(s,{type:"enter",data:u}),n._cancelDataLoad(),n.setState({isDropShown:!1,selectedItemInfo:t?void 0:l});break;case p.a.TAB:o.onTab&&o.onTab();break;case p.a.ESC:n._hideDrop();break;case p.a.UP:e.preventDefault(),n._onArrowDown(s,n._selectPreviousResult);break;case p.a.DOWN:e.preventDefault(),n._onArrowDown(s,n._selectNextResult),d||n._loadDrop(s)}},n._onArrowDown=function(e,t){var o=n.props,r=n.state;if(n._saveUsersText(e),r.isDropShown){var i=t(),a=i.selectedItemInfo;n.setState({selectedItemInfo:a}),o.onChange(i.text,{reason:"arrow"})}},n._getGroupWithItemIndex=function(e,t){var n=e.map(function(e,t){return 0===e.items.length?null:t});t&&n.reverse();var o=n.find(function(e){return null!==e});return"number"==typeof o?o:null},n._selectPreviousResult=function(){var e,t=n.state,o=t.data,r=t.selectedItemInfo;if(r){var i=r.group,a=r.item;if(0!==a)e={group:i,item:a-1};else if(0!==i){var s=n._getGroupWithItemIndex(o.groups.filter(function(e,t){return t<i}),!0);null!==s&&(e={group:s,item:o.groups[s].items.length-1})}}else{var c=n._getGroupWithItemIndex(o.groups,!0);null!==c&&(e={group:c,item:o.groups[c].items.length-1})}return n._selectResult(e)},n._selectNextResult=function(){var e,t=n.state,o=t.data,r=t.selectedItemInfo;if(r){var i=r.group,a=r.item;if(a!==o.groups[i].items.length-1)e={group:i,item:a+1};else if(i!==o.groups.length-1){var s=n._getGroupWithItemIndex(o.groups.map(function(e,t){return t>i?e:{items:[]}}));null!==s&&(e={group:s,item:0})}}else{var c=n._getGroupWithItemIndex(o.groups);null!==c&&(e={group:c,item:0})}return n._selectResult(e)},n._selectResult=function(e){var t=n.props,o=t.onSelectedItemChange,r=t.mapItemToString,i=t.value,a=n.state.data,s=e?a.groups[e.group].items[e.item]:void 0;return o&&o(s),s?{selectedItemInfo:e,text:r(s)}:{selectedItemInfo:void 0,text:n._usersText||i}},n._saveUsersText=function(e){void 0===n.state.selectedItemInfo&&(n._usersText=e)},n._fieldRef=function(e){n._input=e,n.props.fieldRef&&n.props.fieldRef(e)},n._onSuggestMouseDown=function(e){n._pressed=!0,n._onInputBlur(),n.props.onMouseDown&&n.props.onMouseDown(e)},n._getTarget=function(){return n.props.getTarget?n.props.getTarget():n._ref.current},n._getDropItemForSuggestion=function(e,t,o){var r=n.state.selectedItemInfo;return{content:e,key:t+":"+o,selected:Boolean(r&&t===r.group&&o===r.item),onClick:function(){return n._onItemClick(t,o)},onButtonClick:function(){return n._onItemButtonClick(t,o)},onMouseEnter:function(){return n._onItemMouseEnter(t,o)},onMouseLeave:n._onItemMouseLeave}},n._renderDropGroup=function(e,t){return 0===e.items.length?null:r.createElement("ul",{className:d("group",{titled:Boolean(e.title)}),key:t},e.title?r.createElement("div",{className:d("group-title")},e.title):null,e.items.map(function(e,o){return n._getDropItemForSuggestion(e,t,o)}).map(function(e,t,o){return n.props.renderDropItem(e,o)}))},n._renderDrop=function(){var e=n.props,t=e.contentMargin,o=e.renderExtra,i=e.renderExtraFirst,a=e.renderDropInPopup,s=e.fullHeight,c=e.disabled,l=n.state,p=l.data,m=l.isDropShown,g=o?o(p.groups.reduce(function(e,t,o){return[].concat(e,t.items.map(function(e,t){return n._getDropItemForSuggestion(e,o,t)}))},[])):null;if(0===p.groups.reduce(function(e,t){return e+t.items.length},0)&&!g||!m&&a||c)return null;var f={"in-popup":a,"full-height":s,"max-half-window":n.props.maxHalfWindow},h=r.createElement("div",{className:d("content",f),style:t?{margin:t}:void 0,onMouseDown:n._onSuggestMouseDown},r.createElement(u.a,{width:"dynamic",disabled:n.props.disabledScroll},i?g:null,p.groups.map(n._renderDropGroup),i?null:g));return n.props.renderDropWrapper?n.props.renderDropWrapper(h,p):h},n.state={data:{groups:[]},isDropShown:!1,isFocused:Boolean(t.initialFocus),isClearChange:!1},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;e.initialFocus&&this._setInitialFocus(),e.innerRef&&e.innerRef(this._ref.current),e.shouldForceOpenSuggest&&e.setForceOpenSuggest&&(this._loadDrop(e.value),e.setForceOpenSuggest(!1)),this._scrollToInputEndIfNeed()},n.componentDidUpdate=function(e,t){var n=this.props,o=this.state;o.isDropShown!==t.isDropShown&&n.onSuggest&&n.onSuggest(o.isDropShown),o.isDropShown&&e.loader!==n.loader&&this._loadDrop(n.value),!e.shouldForceOpenSuggest&&n.shouldForceOpenSuggest&&n.setForceOpenSuggest&&(this._setInitialFocus(),this._loadDrop(n.value),n.setForceOpenSuggest(!1)),this._scrollToInputEndIfNeed()},n.componentWillUnmount=function(){this._cancelDataLoad(),window.clearTimeout(this._blurTimer);var e=this.props.innerRef;e&&e(null)},n.render=function(){var e=this.props,t=this.state.isDropShown,n=Boolean(t&&this._shouldShowDrop());return r.createElement("div",{className:d(),ref:this._ref},r.createElement(a.a,{type:"search",tabIndex:e.tabIndex,value:e.value,view:e.view,maxLength:e.maxLength,placeholder:e.placeholder,disabled:e.disabled,showClear:e.showClear,autoFocus:e.autoFocus,leftIcons:e.leftIcons,rightIcons:e.rightIcons,selectOnFocus:e.selectOnFocus,onChange:this._onInputChange,onFocus:this._onInputFocus,onBlur:this._onInputBlur,onKeyDown:this._onInputKeyDown,onPaste:e.onPaste,fieldRef:this._fieldRef,onClick:this._onInputClick,collapsed:e.collapsed}),e.renderDropInPopup?r.createElement(s.a,{isShown:n,fullHeight:e.fullHeight,type:"transparent",position:"bottom",restrictPosition:!0,offset:{main:-4,side:0},getTarget:this._getTarget,onClose:g,showArrow:!1,isDropdown:!0},this._renderDrop()):r.createElement("div",{className:d("drop")},this._renderDrop()),r.createElement(l.a,{type:"mouseup",listener:this._removePressedState}),r.createElement(l.a,{type:"focus",listener:this._onWindowFocus}),e.showSuggestOnFocus?r.createElement(l.a,{type:"visibilitychange",listener:this._onVisibilityChange}):null)},t}(r.Component);function g(){}t.default=m},443:function(e,t,n){"use strict";n.r(t);var o=n(13),r=n(4),i=n(11),a=n(8),s=n(14),c=n(78),u=n(6),l=(n(826),n(7)),p=n(781),d=n(12),m=n(33),g=n(428),f=n(15),h=n(9),_=Object(l.a)("suggest-item-view"),v={type:"rubrics",name:"fallback"},y=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onButtonClick=function(e){null==e||e.stopPropagation(),t.props.onButtonClick()},t._renderThumbnail=function(){var e,n=t.props,o=n.content,i=n.config,a=o.thumbnail;return"image"===a.type?r.createElement("div",{className:_("thumbnail")},r.createElement("div",{className:_("avatar",{size:a.size}),style:{backgroundImage:"url("+a.imageUrl+")"}})):r.createElement("div",{className:_("thumbnail")},r.createElement(d.a,{className:_("icon",{alias:m.a(a.icon.name,n.config),round:a.round}),url:null!==(e=m.e({type:a.icon.type,name:a.icon.name,size:"masstransit"===a.icon.type?"normal":"small"},i))&&void 0!==e?e:m.e({type:v.type,name:v.name,size:"small"},i)}))},t._renderHeader=function(){var e=t.props,n=e.content,o=e.config,i=n.title,a=n.rightIcon;return r.createElement("div",{className:_("header")},r.createElement("div",{className:_("title")},"object"==typeof i?r.createElement(p.a,{text:i.text,ranges:i.hl||[]}):i),r.createElement("div",{className:_("right")},n.distance?r.createElement("div",{className:_("distance")},g.e(n.distance)):null,a?r.createElement(d.a,{className:_("right-icon",{alias:m.a(a.name,o)}),url:m.e({type:a.type,name:a.name,size:"small"},o)}):null))},t._renderSubtitle=function(){var e=t.props.content.subtitle;return e?r.createElement("div",{className:_("subtitle")},"object"==typeof e?r.createElement(p.a,{text:e.text,ranges:e.hl||[]}):e):null},t._renderButton=function(){var e=t.props.content;return e.button?r.createElement("div",{className:_("button")},r.createElement(h.a,{useParentState:!0,name:e.button.analytics.name,nodeState:e.button.analytics.nodeState,logClick:!0},r.createElement(f.a,{view:"secondary-blue",size:"small",onClick:t._onButtonClick},e.button.text))):null},t}return Object(u.a)(t,e),t.prototype.render=function(){var e=this.props;return r.createElement("li",{className:_({selected:e.selected}),onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown},this._renderThumbnail(),this._renderHeader(),this._renderSubtitle(),this._renderButton())},t}(r.Component),b=Object(a.b)(y),S=Object(s.a)(a.b,i.b(function(e){return{userLocation:e.geolocation}})),I={name:"bookmark",type:"service"},E={name:"personal",type:"service"},C={name:"search",type:"service"},w={type:"rubrics",name:"fallback"};function x(e){var t;return(null===(t=e.tags)||void 0===t?void 0:t.includes("bookmark"))?I:"personal"===e.type?E:void 0}function k(e,t){e.button_text,0}t.default=S(function(e){var t,n=e.content;if("history"===n.type)return r.createElement(b,Object(o.a)({},e,{content:{rightIcon:E,subtitle:n.subtitle,thumbnail:{icon:C,round:!0,type:"icon"},title:n.text}}));var i=function(e){var t=e.tags||[],n=t.length>0?{type:"rubrics",name:t[0]}:w;if("personal"===e.type&&t.includes("home"))return{icon:{name:"home",type:"service"},type:"icon"};if("personal"===e.type&&t.includes("work"))return{icon:{name:"work",type:"service"},type:"icon"};if("personal"===e.type&&t.includes("query")||"query"===e.type||t.includes("ERT_ORGANIZATION_FAKE_CHAIN"))return{icon:C,round:!0,type:"icon"};if("transit"===e.type){var o=t.find(function(e){return c.E(e)});return c.E(o)?{icon:{name:o,type:"masstransit"},type:"icon"}:void 0}if(t.includes("bus stop"))return{icon:{name:"bus-stop",type:"rubrics"},type:"icon"};if(t.includes("metro"))return{icon:{name:"subway-fallback",type:"rubrics"},type:"icon"};if("toponym"===e.type)return t.includes("other")?{icon:{name:"street",type:"rubrics"},type:"icon"}:{icon:n,type:"icon"};return e.avatar_url?{imageUrl:e.group?e.avatar_url.replace("%s","XXS"):e.avatar_url.replace("%s","drop-navi_x2"),size:e.group?"contain":"cover",type:"image"}:{icon:n,round:e.group,type:"icon"}}(n);return i?r.createElement(b,Object(o.a)({},e,{content:{button:k(n,e.config),distance:null===(t=n.distance)||void 0===t?void 0:t.value,rightIcon:x(n),subtitle:n.subtitle,thumbnail:i,title:n.title}})):null})},453:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(10),r=(n(16),n(33)),i=n(20),a=["food","grocery-store","drugstore","beauty","gasoline","hotels","clinic","covid19","atm","auto-repair","cinemas","malls","fitness","construction-shop","government","post-office","pet-clinic","sport","bars","flower-shop","cafe","museum","entertainment","groceries-delivery","housewares"];function s(e,t){var n,s=t.config;e=null!==(n=e)&&void 0!==n?n:s.catalogRandomOrder||a;var u=Object(o.a)(Object(o.a)({},{food:{color:"rgb(255, 161, 94)",icon:"restaurants",category:{name:"Где поесть"}},"grocery-store":{color:"rgb(96, 168, 240)",icon:"supermarket",category:{name:"Продукты",id:"184108031",seoname:"grocery_store"}},cinemas:{color:"rgb(211, 141, 224)",icon:"cinemas",category:{name:"Кино",id:"184105868",seoname:"cinema"}},hotels:{color:"rgb(156, 137, 250)",icon:"hotels",category:{name:"Гостиницы",id:"184106414",seoname:"hotel"}},gasoline:{color:"rgb(156, 137, 250)",icon:"gasstation",category:{name:"АЗС",id:"184105274",seoname:"gas_station"}},drugstore:{color:"rgb(141, 194, 87)",icon:"drugstores",category:{name:"Аптеки",id:"184105932",seoname:"pharmacy"}},beauty:{color:"rgb(245, 140, 182)",icon:"beauty",category:{name:"Красота",id:"184105814",seoname:"beauty_salon"}},"auto-repair":{color:"rgb(156, 137, 250)",icon:"auto-repair",category:{name:"Автосервис",id:"184105246",seoname:"auto_repair_shop"}},atm:{color:"rgb(156, 137, 250)",icon:"currency-exchange",category:{name:"Банкоматы",id:"184105402",seoname:"atm"}},fitness:{color:"rgb(156, 137, 250)",icon:"fitness",category:{name:"Фитнес",id:"184107363",seoname:"fitness_club"}},clinic:{color:"rgb(245,140,182)",icon:"medicine",category:{name:"Больницы",id:"184105956",seoname:"hospital"}},"construction-shop":{color:"rgb(96, 168, 240)",icon:"construction-tool",category:{name:"Строительные магазины",id:"184107753",seoname:"building_supplies_store"}},government:{color:"rgb(171,174,178)",icon:"government",category:{name:"Госуслуги",id:"18726253054",seoname:"centers_of_state_and_municipal_services"}},"post-office":{color:"rgb(171,174,178)",icon:"post-office",category:{name:"Почта",id:"184108341",seoname:"post_office"}},malls:{color:"rgb(96, 168, 240)",icon:"malls",category:{name:"Торговый центр",id:"184108083",seoname:"shopping_mall"}},"pet-clinic":{color:"rgb(156, 137, 250)",icon:"veterinary",category:{name:"Ветеринарные клиники",id:"184107216",seoname:"veterinary_clinic"}},bars:{color:"rgb(96, 168, 240)",icon:"bars",category:{name:"Бары",id:"184106384",seoname:"pub_bar"}},"flower-shop":{color:"rgb(96, 168, 240)",icon:"flower-shop",category:{name:"Магазин цветов",id:"184108325",seoname:"flower_shop"}},cafe:{color:"rgb(96, 168, 240)",icon:"cafe",category:{name:"Кафе",id:"184106390",seoname:"cafe"}},museum:{color:"rgb(105, 191, 170)",icon:"museum",category:{name:"Музеи",id:"184105894",seoname:"museum"}},entertainment:{color:"rgb(117, 165, 189)",icon:"entertainments",category:{name:"Развлечения",id:"184106372",seoname:"entertainment_center"}},sport:{color:"rgb(156, 137, 250)",icon:"fitness",category:{name:"Спорт"}},covid19:{color:"rgb(141, 194, 87)",icon:"drugstores",displayText:"Тест на COVID‑19",category:{name:"тест на коронавирус"}},"groceries-delivery":{color:"rgb(96, 168, 240)",icon:"malls",category:{name:"Доставка продуктов"}},housewares:{color:"rgb(96, 168, 240)",icon:"malls",category:{name:"Товары для дома",id:"184108097",seoname:"housewares"}}}),s.experiments.ui.catalogRandomOrder?{coffee:{color:"rgb(255, 161, 94)",icon:"cafe",displayText:"Кофейни",category:{name:"Кофейни",id:"35193114937",seoname:"coffee_shop"}},"fast-food":{color:"rgb(255, 161, 94)",icon:"fast-food",displayText:"Фаст-фуд",category:{name:"Быстрое питание",id:"184106386",seoname:"fast_food"}},restaurants:{color:"rgb(255, 161, 94)",icon:"restaurants",displayText:"Рестораны",category:{name:"Рестораны",id:"184106394",seoname:"restaurant"}},burgers:{color:"rgb(255, 161, 94)",icon:"fast-food",displayText:"Бургеры",category:{name:"Бургеры"}},hookah:{color:"rgb(255, 161, 94)",icon:"restaurants",displayText:"Кальян-бар",category:{name:"Кальян-бар",id:"34866769160",seoname:"hookah_bar"}},pizza:{color:"rgb(255, 161, 94)",icon:"pizzeria",displayText:"Пицца",category:{name:"Пиццерия",id:"184106392",seoname:"pizzeria"}},sushi:{color:"rgb(255, 161, 94)",icon:"sushi",displayText:"Суши",category:{name:"Суши-бар",id:"1387788996",seoname:"sushi_bar"}}}:{});return function(e,t){var n=[].concat(e);if(!t||!t.hierarchy.some(function(e){return c.includes(e)})){var o=n.findIndex(function(e){return"covid19"===e.id});-1!==o&&n.splice(o,1)}return n}(e.reduce(function(e,t){return e.concat(Object(o.a)(Object(o.a)({},u[t]),{},{id:t}))},[]),t.region).slice(0,t.limit).map(function(e){var n=r.e({type:"rubrics",name:e.icon,size:"normal"},s),o=r.e({type:"rubrics",name:"fallback",size:"normal"},s),a=n||o,c=t.region?i.d(e.category,t.region,s):void 0;return{id:e.id,data:e,icon:{baseColor:e.color,glyphUrl:a},text:e.displayText||e.category.name,url:c,nodeState:e.nodeState}})}var c=[213,1]},454:function(e,t,n){"use strict";n.r(t);var o=n(10),r=n(6),i=(n(822),n(4)),a=n(7),s=n(9),c=n(39),u=n(12),l=Object(a.a)("catalog-grid-view"),p={flexBasis:Math.floor(25)+"%"},d=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderIcon=function(e,n){return i.createElement("div",{className:l("icon",{empty:n}),style:{backgroundColor:"color"===t.props.theme&&"baseColor"in e?e.baseColor:void 0,backgroundImage:"url"in e?'url("'+e.url+'")':void 0}},"glyphUrl"in e?i.createElement(u.a,{className:l("icon-inner"),url:e.glyphUrl}):"children"in e?e.children:null)},t._renderItem=function(e,n){var r=t.props,a=r.useH3?"h3":"div";return i.createElement(s.a,{key:e.id,name:"item",logClick:!0,nodeState:Object(o.a)({id:e.id,position:n},e.nodeState)},i.createElement(c.a,{className:l("item",{id:e.id}),href:e.url,title:e.text,onLeftClick:function(){return r.onClick(e.data)},style:p},t._renderIcon(e.icon,!e.text),i.createElement(a,{className:l("text")},e.text)))},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props;return i.createElement(s.a,{name:"catalog",nodeState:e.nodeState},i.createElement("div",{className:l({size:e.size,theme:e.theme})},e.items.map(this._renderItem)))},t}(i.PureComponent);t.default=d},455:function(e,t){},593:function(e,t,n){"use strict";n.r(t);n(4),n(1565);var o=n(8);t.default=Object(o.b)(function(e){return e.children({})})},765:function(e,t,n){"use strict";n.r(t);var o=n(13),r=n(6),i=(n(2595),n(4)),a=n(7),s=n(1147),c=Object(a.a)("big-search-form-view"),u=function(e){function t(t){var n;return(n=e.call(this,t)||this)._updateText=function(e){n.setState({text:e})},n._renderLeftIcons=function(){return i.createElement("div",{className:c("icon",{type:"search"})})},n._renderRightIcons=function(e){var t=e.search;return i.createElement("div",{className:c("search-button"),onClick:t},"Найти")},n.state={text:""},n}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props.initialFocus,t=void 0===e||e,n=this.state.text;return i.createElement(s.a,Object(o.a)({},this.props,{initialFocus:t,className:c("form"),text:n,onInputChange:this._updateText,renderLeftIcons:this._renderLeftIcons,renderRightIcons:this._renderRightIcons,showClear:"hover"}))},t}(i.PureComponent);t.default=u},77:function(e,t,n){"use strict";var o=n(6),r=n(4),i=n(8),a=n(208),s=function(e){function t(){return e.apply(this,arguments)||this}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;if(!this.props.config.experiments.ui.noPreloadChunk){var t=function(){return a.a(e.props.chunk)};this.props.immediately?t():setTimeout(t,3e3)}},n.render=function(){return null},t}(r.Component);t.a=Object(i.b)(s)},781:function(e,t,n){"use strict";n(828);var o=n(4),r=n(7),i=Object(r.a)("text-highlight");t.a=function(e){var t=e.ranges.map(function(e){return e.slice(0,2)}),n=Array.prototype.concat.apply([],t);n=n.sort(function(e,t){return e-t});var r=!0;return 0!==n[0]&&(n.unshift(0),r=!1),n[n.length-1]!==e.text.length&&n.push(e.text.length),o.createElement("span",{className:i()},n.map(function(t,i){var a=e.text.substring(t,n[i+1]);return i%2==(r?0:1)?o.createElement("em",{key:i},a):o.createElement("span",{key:i},a)}))}},822:function(e,t,n){},824:function(e,t,n){},826:function(e,t,n){},828:function(e,t,n){},83:function(e,t,n){"use strict";var o=n(10),r=n(2977),i=n(46),a=n(125),s=n(151);n.d(t,"f",function(){return f}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return _}),n.d(t,"d",function(){return v}),n.d(t,"e",function(){return y}),n.d(t,"g",function(){return b}),n.d(t,"i",function(){return S}),n.d(t,"h",function(){return I}),n.d(t,"k",function(){return p}),n.d(t,"p",function(){return E}),n.d(t,"o",function(){return C}),n.d(t,"a",function(){return w}),n.d(t,"n",function(){return x}),n.d(t,"l",function(){return k}),n.d(t,"j",function(){return T}),n.d(t,"m",function(){return R});var c,u={"ymapsbm1://pin":"pin","ymapsbm1://geo":"toponym","ymapsbm1://org":"business"},l=500;function p(e,t){return{home:"Дом",work:"Работа"}[e]}var d=function(e){return c||(c=a.a.getLib(e).then(function(e){return e.getSearchHistoryManager()})),c};function m(e,t){return"children"in t?t.children.map(function(t){return m(e,t)}).find(Boolean)||null:e(t)?t:null}function g(e,t){return"children"in t?e(t)?t:t.children.find(function(t){return"children"in t&&Boolean(g(e,t))})||null:null}function f(e,t){return g(function(t){return t.id===e},t)}function h(e,t){return m(function(t){return t.id===e},t)}function _(e,t){return m(function(t){return t.uri===e},t)}function v(e,t){return _(i.g(e),t)||function(e,t){return m(function(t){var n=i.e(t.uri);return i.k(t.uri)&&null!==n&&Object(r.a)(n,e.coordinates)},t)}({coordinates:e.displayCoordinates},t)}function y(e,t){return g(function(t){return t.children.some(function(t){return e===t.id})},t)}function b(e){return"children"in e?e.children.reduce(function(e,t){return e.concat(b(t))},[]):[e]}function S(e,t){return e.children.reduce(function(e,n){var o;return(null===(o=n.tags)||void 0===o?void 0:o.includes(t))?e.concat(b(n)):e},[])}function I(e){var t=e.uri,n=Object.keys(u).find(function(e){return t.includes(e)});return n?u[n]:"unknown"}function E(e,t){var n=e.text.trim();t.authorization&&n&&d(t).then(function(t){t.addRecord({text:n,uri:e&&e.uri})}).catch(function(){})}function C(e){return e.authorization?Promise.race([d(e).then(function(e){return e.getRecords()}),s.a(l)]).catch(function(){return[]}):Promise.resolve([])}function w(e){return e.authorization?d(e).then(function(e){return e.deleteRecords()}):Promise.reject()}function x(e){return"coords"in e}function k(e,t){return e.id===a.a.FAVORITES_FOLDER_ID?"Избранное":e.title}function T(e){return("create_folder"===e.type||"edit_folder"===e.type)&&e.isShownIconSelection?"select_folder_icon":e.type}function R(e){switch(e.type){case"create_folder":return Object(o.a)({type:e.type,values:{title:"",description:""}},e.data);case"edit_folder":return Object(o.a)({type:e.type},e.data);case"rename_bookmark":return{type:e.type,bookmark:e.bookmark}}return null}}}]);