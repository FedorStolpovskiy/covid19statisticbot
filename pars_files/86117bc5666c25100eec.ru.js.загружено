(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["events"],{109:function(e,t,n){"use strict";var r=n(37),i=n(10),o=n(2978),a=n(301),s=n(2995),c=n(29),l=n(25),u="search_",d="",p={fetch:function(e,t){return Object(c.a)("search",{query:h(e,t)},t).then(function(e){return d=e.requestId,e})},batchFetch:function(e,t){var n={requestQueries:e.map(function(e){return h(e,t)})};return Object(c.a)("search/batch",{body:n},t).then(function(e){var t,n=null===(t=e.find(function(e){return Boolean(e)}))||void 0===t?void 0:t.requestId;return n&&(d=n),e})},fetchSearchResult:function(e,t,n){if(void 0===n&&(n={}),"poi"===e.from){if(e.uri)return p.loadPoiByUri(e.uri,t,n).then(function(t){return Object(i.a)(Object(i.a)({},t),{},{items:t.items.map(function(t,n){return Object(i.a)(Object(i.a)({},t),{},{hotspotProperties:e.hotspotProperties,displayCoordinates:e.coordinates&&0===n?e.coordinates:t.displayCoordinates})})})});if(e.coordinates)return p.loadPoiByCoordinates(e.coordinates,t,n).then(function(t){if(l.D(e.hotspotProperties)){var n=t.items[0],r={title:"Парковка",description:n.address,hotspotProperties:e.hotspotProperties,id:n.id,type:n.type,kind:n.kind,requestId:n.requestId,analyticsId:n.analyticsId,address:n.address,coordinates:n.coordinates,displayCoordinates:n.displayCoordinates,encodedCoordinates:n.encodedCoordinates,stops:n.stops,panorama:n.panorama,photos:n.photos,uri:n.uri};t.items=[r]}return t})}if("whatshere"===e.from)return p.loadWhatshere(e,t);var r=Object(i.a)(Object(i.a)({},e),{},{count:1,searchType:"TEXT"});return r.uri&&(r.mode="uri"),p.fetch(r,t)},prepareChainSearchRequest:function(e,t){return p.fetch({count:1,kind:"locality",text:Object(o.a)(e.center,{reverse:!0}),origin:"chain-city"},t).then(function(t){var n={searchType:"TEXT",displayText:e.chain.name,text:"chain_id:("+e.chain.id+")",origin:e.origin||"chain"},r=t.bounds;if(r){var i=Object(a.a)(r);n.center=i.center,n.span=i.span}return n})},loadPoiByCoordinates:function(e,t,n){return void 0===n&&(n={}),p.fetch({text:Object(o.a)(e,{reverse:!0}),count:1,origin:n.origin||"poi",clientId:n.clientId,snippets:m(t)},t)},loadPoiByUri:function(e,t,n){return void 0===n&&(n={}),p.fetch({mode:"uri",uri:e,count:1,origin:n.origin||"poi",clientId:n.clientId,snippets:m(t)},t)},loadWhatshere:function(e,t){var n=e.origin,i=Object(r.a)(e,["origin"]);return p.fetch({pin:!0,text:Object(o.a)(i.coordinates,{reverse:!0}),zoom:i.zoom,span:[.001,.001],count:1,origin:n||"poi",addBuildingGeometry:e.addGeometry},t).then(function(e){var t=e.items[0];return t?("poi"===n&&(t.displayCoordinates=t.coordinates),e):null}).catch(function(){return null})}};function m(e){return e.search.snippets.filter(function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e})}function h(e,t){var n=e.clientId||"maps",r=e.origin?n+"-"+e.origin:n,a={text:e.text,lang:t.locale,yandex_gid:t.userRegion.id,client_id:e.clientId,origin:r,results:e.count,ctx:e.context,mode:e.mode,lr:e.lr,uri:e.uri,business_oid:Array.isArray(e.id)?e.id.join(","):e.id,z:e.zoom,sort:e.sort,business_filter:e.filters,autoscale:e.autoscale,distinguish_layers:e.distinguishLayers,correct_misspell:e.correctMisspell,geocoder_kind:e.kind,skip:e.skip,rspn:e.restrictSpan,rearr:e.rearr,groupchains_advert:e.groupchains_advert,relev_ranking_formula:e.relev_ranking_formula,maxadv:e.maxadv,eventsBranch:t.query.eventsBranch};return e.addBuildingGeometry&&(a.search_geometry="2"),e.sortOrigin&&(a.sort_origin=e.sortOrigin.join()),e.center&&(a.ll=e.center.join()),e.span&&(a.spn=e.span.join()),e.bbox&&(a.bbox=e.bbox.join("~")),e.snippets?a.snippets=e.snippets:a.snippets=t.search.snippets,t.experiments.ui.groupSameCompanies&&(a.snippets=a.snippets.concat("collapsed_orgs/1.x")),t.experiments.ui.geosearchPinPriority&&(a.snippets=a.snippets.concat("pin_priority/1.x")),t.experiments.ui.geosearchAdditionalPins&&(a.snippets=a.snippets.concat("pin_info/1.x")),a.snippets=a.snippets.join(),e.direct&&(a=Object(i.a)(Object(i.a)({},a),t.advert.direct.params)),e.pin&&(a.geocoder_pin=1),e.type&&(a.type=e.type.join()),e.routeCoordinates&&e.bounds&&e.routeCoordinates.some(function(t){return Object(s.a)(e.bounds,t)})&&(a.business_rll=e.routeCoordinates.map(function(e){return Object(o.a)(e,{fractionDigits:5})}).join("~")),e.clientUsecase&&(a.client_usecase=e.clientUsecase),e.suggestReqid&&"form"===e.origin&&(a.suggest_reqid=e.suggestReqid),e.serpId&&(a.serpid=e.serpId),(e.parentReqId||d||t.searchPreloadedResults)&&(a.parent_reqid=e.parentReqId||d||t.searchPreloadedResults.requestId),e.geoWhere&&(a.geowhere=[].concat(e.geoWhere).reverse().join()),e.businessMode&&(a.business_mode=e.businessMode),"boolean"==typeof e.businessShowClosed&&(a.business_show_closed=e.businessShowClosed?1:0),Object(i.a)(Object(i.a)(Object(i.a)({},a),e.rawParams),function(e){var t=Object(i.a)({},e.experiments.geoSearchParams||{});e.experiments.ui.centralBankCollaboration&&(t.search_experimental_business_show_exp_features="cbrf");var n=e.experiments.boxes;n&&(t["test-buckets"]=n);return Object.keys(e.query).forEach(function(n){n.startsWith(u)&&(t[n]=e.query[n])}),t}(t))}t.a=p},114:function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return b});var r=n(13),i=n(10),o=(n(258),n(4)),a=n(7),s=n(238),c=n.n(s),l=n(260),u=n.n(l),d=n(261),p=n.n(d),m=Object(a.a)("search-placemark-icons"),h={dot:{source:c.a,width:22,height:22},base:{source:u.a,width:34,height:34},active:{source:p.a,className:m("active"),width:60,height:68,baseY:64,centerY:28}};function f(e,t){var n="icon"in e?e.icon:Object(i.a)(Object(i.a)({},h[e.mode]),{},{className:e.className||h[e.mode].className});return Object(i.a)({element:v(n,t)},b(n))}function v(e,t){var n=b(e),i=n.width,a=n.height,s=n.centerX,c=n.centerY,l={className:e.className,dangerouslySetInnerHTML:{__html:e.source}};return t?o.createElement("div",{style:{position:"relative",width:i,height:a}},o.createElement("div",l),o.createElement("div",{style:{position:"absolute",left:s,top:c}},"point"===t?o.createElement("div",{className:m("content")}):t)):o.createElement("div",Object(r.a)({style:{width:i,height:a}},l))}function b(e){var t=Math.round(e.width/2),n=Math.round(e.height/2);return{width:e.width,height:e.height,baseX:e.baseX||t,baseY:e.baseY||n,centerX:e.centerX||t,centerY:e.centerY||n}}},120:function(e,t,n){e.exports=n.p+"_/c6253bebae4891e27181f3a4bb34a342.svg"},121:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(65),i=Object(r.a)("mapFeatureGroup",{}),o=i.connect,a=i.Provider;t.b=o},124:function(e,t,n){"use strict";var r=n(6),i=n(4),o=n(8),a=n(19),s=n(29),c={getUrl:function(e,t){return Object(s.a)("shortenPath",{query:{path:e}},t).then(function(e){return"/-/"+e})}},l={},u=function(e){function t(t){var n;return(n=e.call(this,t)||this)._updateShortUrl=function(e){a.a.cancel(n._shortenAction),l[e]||(l[e]=c.getUrl(e,n.props.config)),n.setState({url:e,isShort:!1}),n._shortenAction=a.a.create(l[e],{success:function(e){n.setState({url:e,isShort:!0})}})},n.state={url:t.url,isShort:!1},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateShortUrl(this.state.url)},n.componentDidUpdate=function(e){this.props.url!==e.url&&this._updateShortUrl(this.props.url)},n.componentWillUnmount=function(){a.a.cancel(this._shortenAction)},n.render=function(){return this.props.children(this.state.url,this.state.isShort)},t}(i.PureComponent);t.a=Object(o.b)(u)},1257:function(e,t,n){"use strict";n.r(t);var r,i=n(42),o=n(118),a=n(109),s=n(19),c=n(502),l={openMapEvent:function(e){return function(t,n,i){var u=i.config;s.a.cancel(r),Object(c.b)(e)?r=s.a.create(a.a.fetch({id:e.action.oid,origin:"internal"},u).then(function(e){return e.items[0]}),{success:function(e){return t(o.a.openPreloadedCard(e))}}):Object(c.c)(e)?t(l.openCardEvent(e)):Object(c.d)(e)&&window.open(e.action.url,"_blank")}},openCardEvent:function(e,t){return void 0===t&&(t={}),function(n){n((t.forcePush?i.a.push:i.a.replace)({event:e,eventId:e.id,success:!0,mode:"event"}))}}};t.default=l},1287:function(e,t,n){"use strict";n.r(t);var r=n(6),i=n(4),o=n(11),a=n(42),s=n(16),c=n(8),l=n(163),u=n(14),d=n(98),p=(n(2138),n(7)),m=n(502),h=n(421),f=Object(p.a)("event-card-title-view"),v=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.event,n=Object(m.a)(t);return i.createElement(h.a,{title:n.title,truncateTitle:e.truncateTitle,onClose:e.onClose,onTitleClick:e.onTitleClick,sticky:!0},i.createElement("div",{className:f("rubric")},n.rubric))},t}(i.Component),b=Object(c.b)(v),_=(n(2140),n(2142),n(28)),g=n(32),E=Object(p.a)("event-card-body-view"),y=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderFeatures=function(){var e;return(null!==(e=Object(m.a)(t.props.event).features)&&void 0!==e?e:[]).map(function(e,t){return i.createElement(_.a,{key:e.key,icon:0===t?i.createElement(g.a,{name:"text",size:24,inline:!0}):void 0},i.createElement("div",{className:E("feature")},i.createElement("span",{className:E("feature-name")},e.name)," ",i.createElement("span",{className:E("feature-value")},e.value)))})},t._renderLocation=function(){var e=Object(m.a)(t.props.event).address;return e?i.createElement(_.a,{icon:i.createElement(g.a,{name:"point-on-map",size:24,inline:!0})},i.createElement("span",{className:E("location")},e)):null},t._renderWorkingTime=function(){var e=t.props.event;return i.createElement(_.a,{icon:i.createElement(g.a,{name:"time",size:24,inline:!0})},i.createElement("span",{className:E("working-time")},e.formattedDate))},t}return Object(r.a)(t,e),t.prototype.render=function(){return i.createElement("div",{className:E()},this._renderWorkingTime(),this._renderLocation(),this._renderFeatures())},t}(i.Component),w=Object(c.b)(y),C=(n(2144),n(179)),k=n(54),x=Object(p.a)("event-photos-view"),O=function(e){function t(t){var n;return(n=e.call(this,t)||this)._renderPhoto=function(e,t){var r=e.urlTemplate.replace("%s","L"),o=n.props.onPhotoClick;return i.createElement("div",{key:e.urlTemplate,className:x("photo",{single:t}),onClick:o?function(){return o(e)}:void 0,onMouseEnter:o?function(){return n.setState({hoveredImage:e})}:void 0,onMouseLeave:o?function(){return n.setState({hoveredImage:void 0})}:void 0},i.createElement(C.a,{height:188,url:r,hovered:n.state.hoveredImage===e}))},n.state={},n}return Object(r.a)(t,e),t.prototype.render=function(){var e=this,t=Object(m.a)(this.props.event).images;return t&&0!==t.length?1===t.length?this._renderPhoto(t[0],!0):i.createElement(k.a,{itemsGap:4,padding:16},t.map(function(t){return e._renderPhoto(t)})):null},t}(i.Component),j=Object(c.b)(O),S=n(293),I=(n(2146),n(53)),M=n(348),N=(n(45),Object(p.a)("event-card-actions-view")),P=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._prepareLink=function(e){return t.props.webviewLinks?"yandexmaps://open_url?url="+encodeURIComponent(e):e},t._renderButtons=function(){var e,n,r=t.props,o=Object(m.a)(r.event);return[].concat(null!==(e=null===(n=o.buttons)||void 0===n?void 0:n.map(function(e,n){return"openURL"===e.type?i.createElement("div",{className:N("button"),key:n},i.createElement(I.a,{view:"primary",type:"link",text:e.title,target:"_blank",url:t._prepareLink(e.url)})):null}))&&void 0!==e?e:[],[r.webviewLinks?null:i.createElement("div",{className:N("button"),key:"share"},i.createElement(M.a,{coordinates:r.event.poiData.center,withText:!0}))]).filter(Boolean)},t}return Object(r.a)(t,e),t.prototype.render=function(){this.props;return i.createElement("div",{className:N()},i.createElement(k.a,{itemsGap:0,padding:16,buttonSize:"m"},this._renderButtons()))},t}(i.Component),T=Object(c.b)(P),D=Object(p.a)("event-card-view"),R=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderDescription=function(){var e=Object(m.a)(t.props.event).description;return e?i.createElement("div",{className:D("description")},e):null},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.event;return i.createElement("div",{className:D()},i.createElement("div",{className:D("section")},i.createElement(b,{event:t,onClose:e.onClose}),i.createElement(j,{event:t,onPhotoClick:e.onPhotoClick})),i.createElement("div",{className:D("section")},i.createElement(w,{event:t})),i.createElement("div",{className:D("section")},this._renderDescription(),i.createElement(S.a,{coordinates:t.poiData.center}),i.createElement(T,{event:e.event})))},t}(i.Component),B=Object(c.b)(R),U=n(175),z={close:a.a.close,showCustomPhotos:U.a.showCustomPhotos},L=Object(u.a)(o.b(function(e){return{stackItem:s.h(e,"event")}},z),c.b),A=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onPhotoClick=function(e){var n=t.props.stackItem;if(null==n?void 0:n.success){var r=Object(m.a)(n.event).images;if(r){var i=String(r.indexOf(e));t.props.showCustomPhotos({meta:{id:i,skipAdvert:!1},isPreviewMode:!1,photos:r.map(function(e,t){return{id:String(t),url:e.urlTemplate.replace("%s","XXL")}}),selectedId:i})}}},t._renderPanel=function(e){var n=t.props;return i.createElement(d.a,{name:"event",analyticsName:"event_panel",renderMiniCard:function(){return t._renderMiniCard(e)}},e.success?i.createElement(B,{event:e.event,onClose:n.config.uatraits.isMobile?n.close:void 0,onPhotoClick:t._onPhotoClick}):i.createElement(l.a,null,"Что-то пошло не так.\nПопробуйте обновить страницу\nили зайти позднее."))},t._renderMiniCard=function(e){return e.success?i.createElement(b,{event:e.event,truncateTitle:!0}):null},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props.stackItem;return e?this._renderPanel(e):null},t}(i.Component);A.displayName="EventsComponent";t.default=L(A)},1296:function(e,t,n){"use strict";n.r(t);var r=n(6),i=n(4),o=n(11),a=n(14),s=n(2994),c=n(2995),l=n(232),u=n(1121),d=n(1110),p=n(19),m=n(8),h=n(29),f={getEvents:function(e,t){return Object(h.a)("events",{query:{center:e,eventsBranch:t.query.eventsBranch}},t)}},v=(n(2148),n(2993)),b=n(7),_=n(9),g=n(12),E=n(33),y=n(34),w=n(114),C=n(316),k=n(30),x=n(2150),O=n.n(x),j=Object(b.a)("event-placemark"),S={source:O.a,baseY:24,centerY:14,width:24,height:24},I=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onMouseEnter=function(){var e,t=n.props;null===(e=t.onMouseEnter)||void 0===e||e.call(t,t.event),n.setState({hovered:!0})},n._onMouseLeave=function(){var e,t;null===(e=(t=n.props).onMouseLeave)||void 0===e||e.call(t),n.setState({hovered:!1})},n.state={hovered:!1},n}Object(r.a)(t,e);var n=t.prototype;return n._getBackgroundIcon=function(){return this.props.active?Object(w.a)({mode:"active"},this._renderIcon()):Object(w.a)({icon:S},this._renderIcon())},n._getPlacemarkBackgroundStyle=function(){var e=this.props.event.poiData,t=this._getBackgroundIcon();return{color:this.state.hovered?"#f43":e.iconColor,height:t.height,width:t.width}},n._getPlacemarkTextStyle=function(){var e=this.props.event.poiData,t=this.state.hovered?"#f43":e.labelColor;return{color:t,WebkitTextFillColor:t}},n._renderIcon=function(){var e=this.props,t=[].concat(e.event.poiData.iconTags,["fallback"]).map(function(t){return E.e({type:"rubrics",name:t,size:e.active?"normal":"small"},e.config)}).find(Boolean);return i.createElement("div",{className:j("icon")},t?i.createElement(g.a,{url:t}):null)},n._renderTitle=function(){var e=this.props,t=e.event.poiData,n=Object(v.a)(t.label.title,{length:40}),r=this._getBackgroundIcon();return e.active?i.createElement("div",{className:j("title"),style:{top:r.centerY,left:r.width}},i.createElement(C.a,{background:!0,position:"left",subtitleItems:[{property:[],text:e.event.formattedDate,type:"working_hours"}],showSubtitle:!0,title:n})):i.createElement("div",{className:j("title"),style:{transform:"translate("+(r.baseX-40)+"px, "+r.baseY+"px)"}},i.createElement("div",{className:j("title-content"),style:this._getPlacemarkTextStyle()},n.split(" ").map(function(e,t){return i.createElement("span",{key:t,className:j("word")},e)}),i.createElement("div",{className:j("subtitle-content")},Object(v.a)(t.label.subtitle,{length:40}).split(" ").map(function(e,t){return i.createElement("span",{key:t,className:j("word")},e)}))))},n.render=function(){var e=this.props,t=e.event.poiData,n=this._getBackgroundIcon();return i.createElement(_.a,{name:"event_placemark",nodeState:{id:e.event.id,zoom:Math.round(e.zoom)},logClick:!0},i.createElement(y.default,{nonInteractive:!0,coordinates:t.center,onClick:e.onClick,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,zIndex:k.a.default},i.createElement("div",{className:j({active:e.active,clickable:Boolean(e.onClick)}),style:{transform:"translate(-"+n.baseX+"px, -"+n.baseY+"px)"}},i.createElement("div",{className:j("placemark"),style:this._getPlacemarkBackgroundStyle()},n.element),this._renderTitle())))},t}(i.Component),M=Object(m.b)(I),N=n(503),P=n(91),T=[[-40,-14],[40,34]];function D(e,t){return t>=e.min&&t<=e.max}var R=function(e){function t(t){var n,r;return(r=e.call(this,t)||this)._concatNonIntersectingPlacemarks=function(e,t){return e.every(function(e){return!Object(s.a)(t.bounds,e.bounds)})&&e.push(t),e},r._fetchEventsWithinViewport=function(){var e=r.state,t=r.props.mapLocation;e.error||e.responses.some(function(e){return Object(c.a)(e.meta.bounds,t.center)&&D(e.meta.zoomRange,t.zoom)})||(p.a.cancel(r._fetchAction),r._fetchAction=p.a.create(f.getEvents(t.center,r.props.config),{success:function(e){return r.setState(function(t){return{responses:[e].concat(t.responses)}})},fail:function(){return r.setState({error:!0})}}))},r._getEventPlacemark=function(e){var t=r.props.mapLocation.zoom,n=e.poiData.center,i=Object(l.a)(n,t),o=i[0],a=i[1],s=[[o+T[0][0],a+T[0][1]],[o+T[1][0],a+T[1][1]]];return{bounds:Object(u.a)(s,t),center:n,event:e}},r._getEvents=function(){var e=r.state.responses.filter(r._isResponseSuitableForViewport).reduce(function(e,t){return e.concat(t.events)},[]).filter(r._isEventWithinViewport),t=r.props.selectedEvent;return t?[t].concat(e.filter(function(e){return e.id!==t.id})):e},r._isEventWithinViewport=function(e){var t=r.props,n=t.mapLocation,i=t.selectedBusiness,o=e.zoomRange;return Object(c.a)(n.bounds,e.poiData.center)&&D(o,n.zoom)&&!("organizationCard"===e.action.type&&e.action.oid===(null==i?void 0:i.id))},r._isResponseSuitableForViewport=function(e){var t=r.props.mapLocation;return Object(d.a)(e.meta.bounds,t.bounds)&&D(e.meta.zoomRange,t.zoom)},r._isEventSelected=function(e){var t=r.props.selectedEvent;return e.id===(null==t?void 0:t.id)},r._onPlacemarkMouseEnter=function(e){var t,n,i=e.action;"organizationCard"===i.type&&(null===(t=(n=r.props).showOrgPreview)||void 0===t||t.call(n,i.oid,e.poiData.center))},r._onPlacemarkMouseLeave=function(){var e,t;null===(e=(t=r.props).hidePreview)||void 0===e||e.call(t)},r._renderPlacemarks=function(e){var t=r.props.mapLocation.zoom,n=r.props.openMapEvent;return e.map(function(e){return i.createElement(M,{active:r._isEventSelected(e.event),key:e.event.id,event:e.event,onClick:n?function(){return n(e.event)}:void 0,onMouseEnter:r._onPlacemarkMouseEnter,onMouseLeave:r._onPlacemarkMouseLeave,zoom:t})})},r._renderInvisibleCollidingPlacemarks=function(e){var t=e.map(function(e){return{anchor:e.center,id:e.event.id,pixelSize:T}});return i.createElement(N.a,{placemarks:t})},r._renderDebugResponseBounds=function(){return r.state.responses.map(function(e,t){return i.createElement(P.a,{key:t,geometry:{type:"LineString",coordinates:[[e.meta.bounds[0][0],e.meta.bounds[0][1]],[e.meta.bounds[0][0],e.meta.bounds[1][1]],[e.meta.bounds[1][0],e.meta.bounds[1][1]],[e.meta.bounds[1][0],e.meta.bounds[0][1]],[e.meta.bounds[0][0],e.meta.bounds[0][1]]]}})})},r.state={error:!1,responses:(null===(n=t.config.events)||void 0===n?void 0:n.mapEvents)?[t.config.events.mapEvents]:[]},r}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchEventsWithinViewport()},n.componentDidUpdate=function(e){this.props.mapLocation!==e.mapLocation&&this._fetchEventsWithinViewport()},n.componentWillUnmount=function(){p.a.cancel(this._fetchAction)},n.render=function(){var e;if("satellite"===this.props.mapType)return null;var t=this._getEvents().map(this._getEventPlacemark).reduce(this._concatNonIntersectingPlacemarks,[]);return i.createElement(i.Fragment,null,this._renderPlacemarks(t),this._renderInvisibleCollidingPlacemarks(t),(null===(e=this.props.config.query.debug)||void 0===e?void 0:e.includes("bounds"))?this._renderDebugResponseBounds():null)},t}(i.Component),B=Object(m.b)(R),U=n(967),z=n(16),L=n(235),A={openMapEvent:U.a.openMapEvent,showOrgPreview:L.a.showOrgPreview,hidePreview:L.a.hidePreview},H=Object(a.a)(o.b(function(e){var t,n,r,i,o,a=z.h(e,"event"),s=z.h(e,"orgpage"),c=z.h(e,"search-result");s?i=null!==(o=s.result)&&void 0!==o?o:void 0:"business"===(null==c?void 0:null===(t=c.response)||void 0===t?void 0:null===(n=t.items)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.type)&&(i=c.response.items[0]);return{mapLocation:e.map.location,mapType:e.map.type,selectedBusiness:i,selectedEvent:(null==a?void 0:a.success)?null==a?void 0:a.event:void 0}},A)),F=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){return i.createElement(B,this.props)},t}(i.Component);F.displayName="EventsMapComponent";t.default=H(F)},131:function(e,t,n){},135:function(e,t,n){},141:function(e,t,n){"use strict";var r=n(6),i=(n(145),n(4)),o=n(7),a=n(23),s=n(12),c=n(9),l=n(147),u=n.n(l),d=Object(o.a)("clipboard"),p=function(e){function t(t){var n;return(n=e.call(this,t)||this)._action=null,n._content=null,n._textarea=null,n._selectContent=function(){var e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(n._getContentRange()))},n._getContentRange=function(){var e=window.document.createRange();return e.selectNodeContents(n._content),e},n._showHelp=function(e){n.setState({success:e}),n._hideTimer=window.setTimeout(function(){n.setState({success:null})},2e3),!e&&!n.props.text&&n.props.children&&n._textarea&&(n._textarea.blur(),n._selectContent())},n._copy=function(e){e.stopPropagation(),window.clearTimeout(n._hideTimer);var t=n.props.text;if(!t&&n.props.children&&(t=n._getContentRange().toString().trim()),t&&n._textarea){n._textarea.value=t,n._textarea.select(),n._textarea.setSelectionRange(0,t.length);var r=!1;try{r=window.document.execCommand("copy")}catch(i){}n._showHelp(r),n._textarea.value="",n._textarea.blur()}},n._onMouseEnter=function(){n.setState({show:!0,success:null})},n._onMouseLeave=function(){n.setState({show:!1,success:null})},n._renderAction=function(){return i.createElement(c.a,{name:"clipboard",logClick:!0},i.createElement("div",{className:d("action-wrapper",{inline:!n.props.noIcon&&"input"!==n.props.view,view:n.props.view}),onClick:n._copy,ref:function(e){return n._action=e}},n.props.children,i.createElement("div",{className:d("action",{visible:n.props.visible,show:n.state.show})},n.props.noIcon?null:i.createElement("div",{className:d("icon")},i.createElement(s.a,{url:u.a})),i.createElement("textarea",{className:d("textarea"),ref:function(e){return n._textarea=e},readOnly:!0}))))},n._renderHelp=function(){var e=n.state.success;return i.createElement(a.a,{isShown:null!==e,getTarget:function(){return n._action},position:n.props.position||"top",restrictPosition:!0,type:e?"help":"error",onClose:function(){}},i.createElement("div",{className:d("help")},e?n.props.hint||"Скопировано":"Ошибка! Скопируйте вручную"))},n.state={clipboardSupported:!0,show:!1,success:null},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){window.document.queryCommandSupported&&window.document.queryCommandSupported("copy")||this.setState({clipboardSupported:!1})},n.componentWillUnmount=function(){window.clearTimeout(this._hideTimer)},n.render=function(){var e=this,t=this.props.children||null;return this.state.clipboardSupported?i.createElement("div",{className:d(),onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},i.createElement("div",{className:d("content"),ref:function(t){return e._content=t}},this._renderAction()),this._renderHelp()):i.createElement("div",{className:d()},t)},t}(i.Component);t.a=p},144:function(e,t,n){"use strict";var r=n(13),i=n(37),o=n(102),a=n(6),s=n(4),c=n(2962),l=n(8),u=n(16),d=!0,p=new Map,m=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._ref=s.createRef(),t._getTitleFromChildren=function(){var e=t.props.children;if("string"==typeof e)return e},t._getDefaultTitle=function(){var e=t.props.config;return Object(u.m)(e)?"Яндекс":"Яндекс.Карты"},t._updateTitle=function(){var e=t._ref.current,n=t._getTitleFromChildren()||e.innerText||e.textContent,r=n&&n.replace(/\s/g," ").trim();r&&(p.set(Object(o.a)(t),r),t._setDocumentTitle(r))},t._setDocumentTitle=function(e){d?d=!1:window.document.title=e?Object(c.a)(e)+" — "+t._getDefaultTitle():t._getDefaultTitle()},t}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._updateTitle()},n.getSnapshotBeforeUpdate=function(){return this._ref.current.textContent},n.componentDidUpdate=function(e,t,n){n!==this._ref.current.textContent&&this._updateTitle()},n.componentWillUnmount=function(){p.delete(this);var e=p.values().next().value;this._setDocumentTitle(e)},n.render=function(){var e=this,t=this.props,n=t.children,o=(t.config,t.elementRef,Object(i.a)(t,["children","config","elementRef"]));return s.createElement("h1",Object(r.a)({},o,{ref:function(n){e._ref.current=n,t.elementRef&&(t.elementRef.current=n)}}),n)},t}(s.PureComponent);t.a=Object(l.b)(m)},145:function(e,t,n){},147:function(e,t,n){e.exports=n.p+"_/e5e2c1a7a1e08d0ef752d275975c693a.svg"},148:function(e,t,n){"use strict";var r=n(27);t.a=Object(r.a)(function(){return n.e("promo").then(n.bind(null,423))},{open:!0,close:!0})},163:function(e,t,n){"use strict";n(187);var r=n(4),i=n(7),o=n(9),a=Object(i.a)("something-wrong-view");t.a=function(e){return r.createElement(o.a,{name:"error"},r.createElement("div",{className:a()},r.createElement("div",{className:a("image")}),r.createElement("div",{className:a("text")},e.children)))}},164:function(e,t,n){"use strict";var r=n(6),i=n(4),o=n(11),a={openMobileAppShare:n(148).a.open},s=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onClick=function(){var e=t.props;e.openMobileAppShare(e.openOptions)},t}return Object(r.a)(t,e),t.prototype.render=function(){return this.props.children({onClick:this._onClick})},t}(i.PureComponent);t.a=o.b(null,a)(s)},168:function(e,t,n){},179:function(e,t,n){"use strict";n(266);var r=n(4),i=n(8),o=n(7),a=n(68),s=Object(o.a)("background-image");t.a=Object(i.b)(function(e){return r.createElement("div",{className:s({"with-paranja":e.withParanja,hovered:e.hovered,touch:e.config.uatraits.isTouch}),style:{height:e.height,background:e.backgroundFallback}},r.createElement(a.a,null,r.createElement("div",{className:s("bg"),style:e.url?{backgroundImage:'url("'+e.url+'")'}:void 0})),r.createElement("div",{className:s("content")},e.children))})},187:function(e,t,n){},190:function(e,t,n){"use strict";var r=n(27);t.a=Object(r.a)(function(){return n.e("search").then(n.bind(null,577))},{toggle:!0,close:!0})},21:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(65),i=Object(r.a)("wideCard",!1,function(e){return{isWideCard:e}}),o=i.connect,a=i.Provider;t.b=o},2138:function(e,t,n){},2140:function(e,t,n){},2142:function(e,t,n){},2144:function(e,t,n){},2146:function(e,t,n){},2148:function(e,t,n){},2150:function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12z" fill="currentColor"/><path d="M12 1.45C6.173 1.45 1.45 6.173 1.45 12c0 5.827 4.723 10.55 10.55 10.55 5.827 0 10.55-4.723 10.55-10.55 0-5.827-4.723-10.55-10.55-10.55z" stroke="#fff" stroke-opacity=".6" stroke-width="1.1"/></svg>'},235:function(e,t,n){"use strict";var r=n(27);t.a=Object(r.a)(function(){return n.e("preview").then(n.bind(null,536))},{showUriPreview:!0,showOrgPreview:!0,showStopPreview:!0,showPreloadedPreview:!0,hidePreview:!0,cancelHidePreview:!0,showRealtyPreview:!0})},238:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="2ccc4e9f8fe2f8acc9e7eab53f797f56__b" d="M7 14A7 7 0 1 0 7 0a7 7 0 0 0 0 14z"/><filter id="2ccc4e9f8fe2f8acc9e7eab53f797f56__a" width="150%" height="150%" x="-25%" y="-17.9%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd" transform="translate(4 4)"><use fill="#000" filter="url(#2ccc4e9f8fe2f8acc9e7eab53f797f56__a)" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><use fill="#FFF" xlink:href="#2ccc4e9f8fe2f8acc9e7eab53f797f56__b"/><path d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z" fill="currentColor"/><path fill="#000" class="tint" d="M7 12A5 5 0 1 1 7 2a5 5 0 0 1 0 10z"/></g></svg>\n'},258:function(e,t,n){},260:function(e,t){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" viewBox="0 0 34 34" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="cbb016882db5c851af06eebb43c674f7__b" d="M17 31c7.732 0 14-6.268 14-14S24.732 3 17 3 3 9.268 3 17s6.268 14 14 14z"/><filter id="cbb016882db5c851af06eebb43c674f7__a" width="200%" height="200%" x="-50%" y="-50%" filterUnits="objectBoundingBox"><feOffset dy="1" in="SourceAlpha" result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.200000003 0" in="shadowBlurOuter1"/></filter></defs><g fill="none" fill-rule="evenodd"><use fill="#000" filter="url(#cbb016882db5c851af06eebb43c674f7__a)" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><use fill="#FFF" xlink:href="#cbb016882db5c851af06eebb43c674f7__b"/><path fill="currentColor" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/><path fill="#000" class="tint" d="M17 29c-6.627 0-12-5.373-12-12S10.373 5 17 5s12 5.373 12 12-5.373 12-12 12z"/></g></svg>\n'},261:function(e,t){e.exports='<svg width="60" height="68" viewBox="0 0 60 68" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M23.51 51.523a.5.5 0 0 1-.5.477c-.29 0-.51-.21-.52-.477-.145-3.168-1.756-5.217-4.832-6.147C7.53 42.968 0 33.863 0 23 0 10.297 10.297 0 23 0s23 10.297 23 23c0 10.863-7.53 19.968-17.658 22.376-3.076.93-4.687 2.98-4.83 6.147z" id="ae96eeecd750ec2a83543f00c9bc789d__b"/><filter x="-21.7%" y="-15.4%" width="143.5%" height="138.5%" filterUnits="objectBoundingBox" id="ae96eeecd750ec2a83543f00c9bc789d__a"><feGaussianBlur in="SourceGraphic" stdDeviation="3"/><feOffset dy="2"/><feComponentTransfer><feFuncA type="linear" slope=".3"/></feComponentTransfer></filter></defs><g fill="none" fill-rule="evenodd"><g fill-rule="nonzero" transform="translate(7 5)" fill="currentColor"><use filter="url(#ae96eeecd750ec2a83543f00c9bc789d__a)" xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/><use xlink:href="#ae96eeecd750ec2a83543f00c9bc789d__b"/></g><path d="M30 68c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z" fill="#fff" fill-rule="nonzero"/><path d="M30 66a2 2 0 1 0 .001-3.999A2 2 0 0 0 30 66z" fill="currentColor"/></g></svg>'},266:function(e,t,n){},28:function(e,t,n){"use strict";var r=n(6),i=(n(131),n(4)),o=n(7),a=n(21),s=n(12),c=n(120),l=n.n(c),u=Object(o.a)("card-feature-view"),d=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderIcon=function(){var e=t.props,n=e.iconUrl;if(null===n)return null;var r=e.iconClassName;return i.createElement("div",{className:u("icon-wrapper",{"no-color":e.keepIconColor})+(r?" "+r:"")},n?i.createElement(s.a,{url:n}):e.icon)},t._renderMain=function(){var e=t.props;return i.createElement("div",{className:u("main")},t._renderIcon(),i.createElement("div",{className:u("content")},e.title?i.createElement("div",{className:u("title")},e.title):null,i.createElement("div",{className:u("main-content")},e.children),e.subcontent?i.createElement("div",{className:u("subcontent")},e.subcontent):null))},t._renderAdditional=function(){var e=t.props;return e.value||e.arrowView?i.createElement("div",{className:u("additional"),onClick:e.onAdditionalClick},e.value?i.createElement("div",{className:u("value")},e.value):null,e.arrowView?i.createElement("div",{className:u("arrow",{view:e.arrowView})},i.createElement(s.a,{url:l.a})):null):null},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.subcontent,n=e.onClick,r=e.title?"medium":e.size||"large",o=null===e.icon||null===e.iconUrl;return i.createElement("div",{className:u({view:e.view||"normal",size:r,subcontent:Boolean(t),interactive:Boolean(n),"has-title":Boolean(e.title),disabled:e.disabled,"no-icon":o,"no-side-padding":!1!==e.noSidePadding&&(e.noSidePadding||e.isWideCard)})+(e.className?" "+e.className:""),onClick:n},i.createElement("div",{className:u("wrapper")},this._renderMain(),this._renderAdditional()),i.createElement("div",{className:u("border",{border:e.border,stretch:e.stretchBorder||o})}))},t}(i.Component);t.a=Object(a.b)(d)},289:function(e,t,n){"use strict";var r=n(6),i=n(4),o=n(11),a=n(8),s=n(19),c=n(20),l=n(190),u=n(14),d=n(67),p={toggleShare:l.a.toggle},m=Object(u.a)(o.b(function(e,t){return{url:t.url||Object(d.a)(e)}},p),a.b),h=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._toggleShare=function(){var e=t.props;e.toggleShare({id:e.id,url:e.url,coordinates:e.coordinates,push:e.push})},t._onOpenShareClick=function(){var e=t.props;window.navigator.share?(s.a.cancel(t._shareAction),t._shareAction=s.a.create(window.navigator.share({url:c.a(e.seoUrl?"/"+e.seoUrl:e.url,e.config),title:window.document.title,text:e.title?window.document.title+"\n"+e.title+"\n":void 0}),{fail:function(e){e.message.startsWith("Internal error:")&&t._toggleShare()}})):t._toggleShare()},t}Object(r.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){s.a.cancel(this._shareAction)},n.render=function(){return this.props.children({onClick:this._toggleShare})},t}(i.Component);t.a=m(h)},293:function(e,t,n){"use strict";var r=n(6),i=n(4),o=n(11),a=n(14),s=n(190),c=n(21),l=n(9),u=n(63),d=(n(343),n(7)),p=n(67),m=n(20),h=n(124),f=n(141),v=n(28),b=n(8),_=n(164),g=n(345),E=n.n(g),y=Object(d.a)("card-push-view"),w=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props;return e.config.uatraits.isMobile?null:i.createElement(_.a,{openOptions:{type:e.type,pushMessage:e.message,sendParams:{uri:e.uri,stopId:e.stopId}}},function(e){var t=e.onClick;return i.createElement(l.a,{name:"service",logClick:!0,metrikaGoal:"goal_deepuse"},i.createElement(v.a,{className:y("service"),view:"link",iconUrl:E.a,onClick:t},"Отправить в телефон"))})},t}(i.Component),C=Object(b.b)(w),k=n(38);function x(e){var t=60*((e=Math.abs(e))-Math.floor(e)),n=Math.round(60*(t-Math.floor(t)));return t=Math.floor(t),60===n&&(n=0,t+=1),60===t&&(t=0,e+=1),Math.floor(e)+"°"+t+"′"+(n?Math.round(n)+"″":"")}var O=n(346),j=n.n(O),S=n(347),I=n.n(S),M=o.b(function(e){var t;return{config:e.config,url:(null===(t=e.share.data)||void 0===t?void 0:t.url)||Object(p.a)(e)}}),N=Object(d.a)("card-share-view"),P=M(function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderDmsCoordinates=function(e){var t=e[0],n=e[1];return i.createElement(v.a,null,i.createElement(l.a,{name:"dms_coordinates",subtreeMetrikaGoal:"goal_deepuse"},i.createElement(f.a,{view:"primary"},i.createElement("div",{className:N("text",{clickable:!0}),dangerouslySetInnerHTML:{__html:[x(n)+(n>0?"N":"S"),x(t)+(t>0?"E":"W")].join(", ")}}))))},t._renderShortUrl=function(){var e=t.props;return i.createElement(v.a,{className:N("short-link"),iconUrl:j.a},i.createElement(l.a,{name:"short_link"},i.createElement(f.a,{view:"primary"},i.createElement("div",{className:N("text")},i.createElement(h.a,{url:e.url},function(t,n){return n?m.a(t,e.config):i.createElement(k.a,{view:"small",withoutMargin:!0})})))))},t._renderCoordinatesContent=function(e){var t=e[0],n=e[1];return i.createElement(l.a,{name:"coordinates",subtreeMetrikaGoal:"goal_deepuse"},i.createElement(f.a,{view:"primary"},i.createElement("div",{className:N("text")},n.toFixed(6)+", "+t.toFixed(6))))},t._renderCoordinates=function(){var e=t.props;return e.coordinates?i.createElement(u.a,{className:N("coordinates"),iconUrl:I.a,content:t._renderDmsCoordinates(e.coordinates),delimiter:null,isLast:!0},t._renderCoordinatesContent(e.coordinates)):null},t._renderPush=function(){var e=t.props;return e.push?i.createElement(C,e.push):null},t}return Object(r.a)(t,e),t.prototype.render=function(){return i.createElement("div",{className:N()},this._renderPush(),this._renderShortUrl(),this._renderCoordinates())},t}(i.Component)),T={closeShare:s.a.close},D=Object(a.a)(o.b(function(e,t){var n=e.share,r=n.data,i=n.isExpanded;return{config:e.config,isExpanded:(null==r?void 0:r.id)?r.id===t.id&&i:i}},T),c.b),R=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this.props.closeShare()},n.render=function(){var e=this.props;return i.createElement(l.a,{name:"share"},i.createElement(u.a,{isExpanded:e.isExpanded,delimiter:e.noDelimiter?null:void 0,content:i.createElement(P,{coordinates:e.coordinates,push:e.isWideCard?void 0:e.push})}))},t}(i.PureComponent);t.a=D(R)},30:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={screenshotDialog:99999,ruler:8030,editing:8030,hover:8020,active:8e3,search:{active:8e3,subtitle:7500,title:7e3,base:6500,dot:6e3},dialog:2e3,usermaps:{placemark:3e3,line:2e3,polygon:1e3},discovery:580,routes:550,routePins:{waypoint:8e3,masstransit:7900},masstransitStop:8001,moving:500,masstransitLineStop:510,home:451,work:450,default:400,tooltip:352,masstransitRegion:350,bookmarks:300,minimum:1}},301:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(195),i=n(233);function o(e){var t=e[0][1],n=[e[1][0]-e[0][0],e[1][1]-t],o=Math.tan(Object(r.a)(t+90)/2),a=Math.tan(Object(r.a)(n[1])/2),s=Math.max((-o*o-o*a)/(o*a-1),0),c=.5*Math.log(s),l=2*(Math.atan(Math.exp(c))-.25*Math.PI);return{center:[(e[0][0]+e[1][0])/2,Object(i.a)(l)],span:n}}},316:function(e,t,n){"use strict";var r=n(6),i=(n(317),n(4)),o=n(7),a=n(25),s=n(12),c=n(8),l=n(76),u=n(319),d=n.n(u),p=Object(o.a)("search-placemark-title"),m=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderStars=function(e){var t=e.property.find(function(e){return"id"===e.key});if(!t)return null;var n=a.x(t.value);if(0===n)return null;for(var r=new Array(n),o=0;o<n;o++)r[o]=i.createElement(s.a,{key:o,url:d.a});return i.createElement("span",{key:"stars",className:p("subtitle-item")},r)},t._renderRating=function(e){var n=e.property.find(function(e){return"value_5"===e.key});return n?i.createElement("span",{className:p("subtitle-item"),key:"rating"},i.createElement(s.a,{url:d.a,className:p("subtitle-item-rating-image")}),i.createElement("span",{className:p("subtitle-item-rating")},l.b(Number(n.value),t.props.config.lang,{min:1,max:1}))):null},t._renderWorkingHours=function(e){var t=e.property.find(function(e){return"is_open"===e.key}),n="closed_for_visitors"===e.type||!!t&&"0"===t.value;return i.createElement("span",{key:"working_hours",className:p("subtitle-item",{"closed-now":n})},e.text)},t._renderSubtitleItem=function(e){var n=e.text?e.text:"";return"star"===e.type?t._renderStars(e):"rating"===e.type?t._renderRating(e):"working_hours"===e.type||"closed_for_visitors"===e.type?t._renderWorkingHours(e):n?i.createElement("span",{key:e.type,className:p("subtitle-item")},n):null},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=this.props.subtitleItems;return i.createElement("div",{className:p({background:e.background,"low-relevance":e.isLowRelevance,position:e.position,"no-truncate":e.disableTruncate})},i.createElement("div",{className:p("title")},e.title),t&&e.showSubtitle?i.createElement("div",{className:p("subtitle")},t.map(this._renderSubtitleItem)):null)},t}(i.PureComponent);t.a=Object(c.b)(m)},317:function(e,t,n){},319:function(e,t,n){e.exports=n.p+"_/cbb4eab83cc1f046b092166074e47cb5.svg"},34:function(e,t,n){"use strict";n.r(t);var r=n(87),i=n(6),o=(n(71),n(4)),a=n(5),s=n(7),c=n(31),l=n(30),u=n(62),d=300,p=Object(s.a)("map-placemark"),m=function(){},h=function(e){function t(t){var n;return(n=e.call(this,t)||this)._container=document.createElement("div"),n._isDragged=!1,n._initCursor=function(){n._updateCursor(),n._marker.group().on("dragStart",function(){n._isDragged=!0,n._container.style.cursor="grabbing",n.props.map.container.style.cursor="grabbing"}).on("dragEnd",function(){n._isDragged=!1,n._updateCursor(),n.props.map.container.style.cursor="default"})},n._updateCursor=function(){n._container.style.cursor=n.props.onClick||n.props.onMouseEnter||n.props.draggable?"pointer":"default"},n._addMapEventHandlers=function(e){var t={dragStart:e.onDragStart,dragMove:e.onDragMove,dragEnd:e.onDragEnd};Object.keys(t).forEach(function(e){t[e]&&n._mapEventHandlers.on(e,function(){t[e]({coordinates:n._marker.coordinates})})})},n._onClick=function(e){e.stopPropagation();var t=n.props,r=t.onClick||m,i=t.onFastClick||m,o=t.onDoubleClick||m;n._clickTimer?(o(),window.clearTimeout(n._clickTimer),n._clickTimer=void 0):(i(),n._clickTimer=window.setTimeout(function(){r(),n._clickTimer=void 0},d))},n._container.className=p(),n._marker=t.map.createMarker({coordinates:t.coordinates,element:n._container,options:{draggable:t.draggable,zIndex:t.zIndex||l.a.default,disableRoundCoordinates:t.disableRoundCoordinates,blockEvents:t.blockEvents}}),n._mapEventHandlers=n._marker.group(),n}Object(i.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;this._initCursor(),this._addMapEventHandlers(e),e.map.addMarker(this._dataSourceId,this._marker)},n.componentWillUnmount=function(){this.props.map.destroyed||(this._mapEventHandlers.offAll(),this.props.map.removeMarker(this._dataSourceId,this._marker),this._marker.destroy(),this._isDragged&&(this.props.map.container.style.cursor="default")),window.clearTimeout(this._clickTimer)},n.componentDidUpdate=function(e){var t=e.dataSourceId?e.dataSourceId:u.d.DEFAULT_MARKERS;t!==this._dataSourceId&&(this.props.map.removeMarker(t,this._marker),this.props.map.addMarker(this._dataSourceId,this._marker));var n=this.props;n.coordinates!==e.coordinates&&this._marker.setCoordinates(n.coordinates),e.draggable!==n.draggable&&this._marker.toggleDrag(n.draggable||!1),e.zIndex!==n.zIndex&&this._marker.setZIndex(n.zIndex||l.a.default),e.disableRoundCoordinates!==n.disableRoundCoordinates&&this._marker.toggleRoundCoordinates(n.disableRoundCoordinates||!1),n.onDragStart===e.onDragStart&&n.onDragMove===e.onDragMove&&n.onDragEnd===e.onDragEnd||(this._mapEventHandlers.offAll(),this._addMapEventHandlers(n)),e.draggable===n.draggable&&e.onClick===n.onClick||this._updateCursor()},n.render=function(){var e=this.props,t=o.createElement("div",{className:p("wrapper",{"non-interactive":e.nonInteractive}),onClick:this._onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseMove:e.onMouseMove},e.children);return a.createPortal(t,this._container)},Object(r.a)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||u.d.DEFAULT_MARKERS}}]),t}(o.PureComponent);t.default=Object(c.b)({shouldWait:!0})(h)},343:function(e,t,n){},345:function(e,t,n){e.exports=n.p+"_/113d4bdd030901e316d83e1a389ed2ad.svg"},346:function(e,t,n){e.exports=n.p+"_/b75f293b42e1975dc602910bdfab77e7.svg"},347:function(e,t,n){e.exports=n.p+"_/c1688d08da22cea405f7b5d074ee4220.svg"},348:function(e,t,n){"use strict";var r=n(37),i=n(6),o=n(4),a=n(53),s=n(289),c=n(349),l=n.n(c),u=function(e){function t(){return e.apply(this,arguments)||this}return Object(i.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.withText,n=Object(r.a)(e,["withText"]);return o.createElement(s.a,n,function(e){var n=e.onClick;return o.createElement(a.a,{type:"share",analytics:"share",text:t?"Поделиться":void 0,hint:"Поделиться",icon:l.a,onClick:n})})},t}(o.Component);t.a=u},349:function(e,t,n){e.exports=n.p+"_/0049a900fa223f25a87aa8d76b566925.svg"},404:function(e,t,n){},406:function(e,t,n){},421:function(e,t,n){"use strict";var r=n(6),i=(n(404),n(36)),o=(n(406),n(4)),a=n(7),s=Object(a.a)("expand-button"),c=function(e){var t,n=(2+4*(null!==(t=e.fold)&&void 0!==t?t:0)).toFixed(2);return o.createElement("div",{className:s(),onClick:e.onClick},o.createElement("svg",{viewBox:"0 0 24 8",xmlns:"http://www.w3.org/2000/svg",className:s("dash")},o.createElement("path",{d:"M2 "+n+"L12 2L22 "+n,fill:"none",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})))},l=n(9),u=n(39),d=n(144),p=n(45),m=Object(a.a)("card-title-view"),h=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=o.createRef(),n._renderInner=function(e){var t=n.props,r=t.dangerouslySetInnerHTML?o.createElement("span",{dangerouslySetInnerHTML:{__html:e}}):e;return t.onTitleClick?o.createElement(l.a,{name:"title",metrikaGoal:"deepuse",logClick:!0},o.createElement("div",{className:m("title-link")},o.createElement(u.a,{href:t.url,onLeftClick:t.onTitleClick},r)),n._renderBadge()):o.createElement(o.Fragment,null,r,n._renderBadge())},n._renderBadge=function(){var e=n.props.renderBadge;return e?e():null},n.state={fixed:!1,offsetHeight:null,scrollHeight:null},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t){!t.fixed&&this.state.fixed&&this._ref.current&&this.setState({offsetHeight:this._ref.current.offsetHeight,scrollHeight:this._ref.current.scrollHeight}),t.fixed&&!this.state.fixed&&this.setState({offsetHeight:null,scrollHeight:null})},n.render=function(){var e=this,t=this.props,n=this.state,r=t.sticky&&n.fixed?"one-line":t.truncateTitle?"few-lines":void 0,a={marginBottom:t.sticky&&n.fixed&&null!==n.scrollHeight&&null!==n.offsetHeight?n.scrollHeight-n.offsetHeight+"px":void 0},s=o.createElement("div",{className:m("wrapper",{view:t.view})},t.displayTitle&&t.displayTitle!==t.title?o.createElement(o.Fragment,null,o.createElement(d.a,{className:m("hidden-title")},t.title),o.createElement("div",{ref:this._ref,className:m("title",{truncated:r}),itemProp:"name",style:a},this._renderInner(t.displayTitle))):o.createElement(d.a,{elementRef:this._ref,className:m("title",{truncated:r}),itemProp:"name",style:a},this._renderInner(t.title)));return o.createElement(o.Fragment,null,o.createElement(p.a,{header:!0,position:"top",order:0,disabled:!t.sticky,onFixedChange:function(t){return e.setState({fixed:t})}},t.withShutterControl?o.createElement(c,null):null,t.onClose?o.createElement(i.a,{onClick:t.onClose,offset:"large",circle:!0}):null,s),t.noSubtitle?null:o.createElement("div",{className:m("subtitle",{view:t.view,"no-bottom-padding":t.noBottomPadding})},t.children))},t}(o.Component);t.a=h},45:function(e,t,n){"use strict";var r=n(6),i=(n(73),n(4)),o=n(7),a=n(85),s=n(61),c=1,l=Object(o.a)("sticky-wrapper"),u=function(e){function t(t){var n;return(n=e.call(this,t)||this)._containerRef=i.createRef(),n._isDisabled=function(e){return void 0===e&&(e=n.props),e.disabled||!e.scrollId},n._registerContainer=function(){var e,t=n.props,r=null!==(e=t.order)&&void 0!==e?e:c;if(n._containerRef.current){if(!t.scrollId)return;t.registerStickyElement(r,n._containerRef,n._onPositionUpdate),t.updateStickyElement(r,n._containerRef.current.offsetHeight),n._unregisterContainer=function(){t.unregisterStickyElement(r)}}},n._onIntersectionChange=function(e){n.setState({fixed:!e})},n._onPositionUpdate=function(e){var t,r;n.setState({position:e}),null===(t=(r=n.props).onOffsetChange)||void 0===t||t.call(r,e)},n._onIntersectionParentBoundaries=function(e){n.setState({reachedParentBoundaries:!e})},n.state={fixed:!1,reachedParentBoundaries:!1,position:0},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._isDisabled()||this._registerContainer()},n.componentDidUpdate=function(e,t){var n=this.props,r=this.state,i=n.children!==e.children;(n.children&&i||this._isDisabled(e)&&!this._isDisabled())&&this._registerContainer(),n.onFixedChange&&t.fixed!==r.fixed&&n.onFixedChange(r.fixed)},n.componentWillUnmount=function(){var e;null===(e=this._unregisterContainer)||void 0===e||e.call(this)},n.render=function(){var e,t=this.props,n=this.state;return t.children?this._isDisabled()?"always"===this.props.border?i.createElement("div",{className:l("pseudo-sticky")},t.children):t.children:i.createElement(i.Fragment,null,"top"===t.position?i.createElement(s.a,{threshold:0,style:n.position?{transform:"translateY(-"+n.position+"px)"}:void 0,className:l("observer-target"),onChange:this._onIntersectionChange},null):null,i.createElement("div",{className:l({position:t.position,fixed:n.fixed,header:t.header,border:null!==(e=t.border)&&void 0!==e?e:"auto",wide:t.wide,"reached-boundaries":n.reachedParentBoundaries,empty:!t.children}),style:{top:this.state.position,zIndex:t.zIndex},ref:this._containerRef},i.createElement(s.a,{threshold:0,style:n.position?{transform:"translateY(-"+n.position+"px)"}:void 0,className:l("observer-target",{absolute:!0}),onChange:this._onIntersectionParentBoundaries},null),t.children)):null},t}(i.Component);t.a=Object(a.b)(u)},502:function(e,t,n){"use strict";function r(e){return i(e)?e.action.blockData:e.action.cardData}function i(e){return"organizationCard"===e.action.type}function o(e){return"eventCard"===e.action.type}function a(e){return"url"===e.action.type}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return a})},503:function(e,t,n){"use strict";var r=n(6),i=n(4),o=n(52),a=n.n(o),s=n(31),c=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._uuid=a.a.v4(),t._getCollidingPrimitiveId=function(e){return t._uuid+":"+e.id},t._getCollidingPrimitives=function(e){var n=new Map;return e.forEach(function(e){n.set(t._getCollidingPrimitiveId(e),{anchor:e.anchor,rect:{minX:e.pixelSize[0][0],minY:e.pixelSize[0][1],maxX:e.pixelSize[1][0],maxY:e.pixelSize[1][1]}})}),n},t}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props,t=this._getCollidingPrimitives(e.placemarks);e.map.addInvisibleCollidingPrimitives(t)},n.shouldComponentUpdate=function(){return!this.props.preventUpdates},n.componentDidUpdate=function(){var e=this,t=this.props,n=t.map.getInvisibleCollidingPrimitives(),r=[],i=this._getCollidingPrimitives(t.placemarks);n.forEach(function(t,n){n.startsWith(e._uuid+":")&&r.push(n)}),t.map.removeInvisibleCollidingPrimitives(r),t.map.addInvisibleCollidingPrimitives(i)},n.componentWillUnmount=function(){var e=this.props;e.map.removeInvisibleCollidingPrimitives(e.placemarks.map(this._getCollidingPrimitiveId))},n.render=function(){return null},t}(i.Component);t.a=Object(s.b)({shouldWait:!0})(c)},53:function(e,t,n){"use strict";var r=n(10),i=n(6),o=(n(135),n(4)),a=n(7),s=n(8),c=n(15),l=n(12),u=n(9),d=n(43),p=Object(a.a)("action-button-view"),m=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onClick=function(e){var n=t.props;n.onClick&&n.onClick(e)},t._renderAnalyticsWrap=function(e){var n=t.props;return n.analytics?o.createElement(u.a,{name:n.analytics,metrikaGoal:n.metrikaGoal,gaGoal:n.gaGoal,logClick:!0},e):e},t._renderHintWrap=function(e){var n=t.props;return n.hint?o.createElement(d.a,{text:n.hint,position:"bottom"},e):e},t}return Object(i.a)(t,e),t.prototype.render=function(){var e=this.props;return this._renderHintWrap(this._renderAnalyticsWrap(o.createElement("div",{className:p(Object(r.a)(Object(r.a)({},e.mods),{},{stretched:e.isStretched,type:e.type})),ref:e.nodeRef},o.createElement(c.a,{view:e.view||"secondary-blue",size:e.size||"medium",isStretched:e.isStretched,icon:e.icon?o.createElement(l.a,{url:e.icon,className:p("icon")}):null,rel:e.rel,url:e.url,target:e.target,onClick:this._onClick,onMouseEnter:e.onMouseEnter},e.text))))},t}(o.Component);t.a=Object(s.b)(m)},63:function(e,t,n){"use strict";var r=n(6),i=(n(168),n(4)),o=n(7),a=n(21),s=n(112),c=n(9),l=n(56),u=n(28),d=n(300),p=Object(o.a)("card-dropdown-view"),m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._card=i.createRef(),n._controlAnalyticsRef=i.createRef(),n._onMoreClick=function(e){var t;"A"!==e.target.nodeName&&(null===(t=n._controlAnalyticsRef.current)||void 0===t||t.logEvent("click"),e.preventDefault(),e.stopPropagation(),n.setState({isExpanded:!n.state.isExpanded}))},n._collapseContent=function(){n._content&&(n._content.style.overflow="",n._card.current&&(n._card.current.style.overflow=""),n._animateContent(n._content.offsetHeight,0,n._content))},n._expandContent=function(){n._content&&n._animateContent(0,n._content.offsetHeight,n._content)},n._animateContent=function(e,t,n){n.style[Object(s.b)().styles.transition]="max-height 0.3s",n.style.maxHeight=e+"px",n.getBoundingClientRect(),n.style.maxHeight=t+"px"},n._onTransitionEnd=function(e){e.target===n._content&&n._content&&n._card.current&&(n._content.style[Object(s.b)().styles.transition]="",n._content.style.maxHeight="",n._content.style.overflow="visible",n._card.current.style.overflow="visible")},n._renderContent=function(){var e=n.state.isExpanded,t=n.props;return e?i.createElement(c.a,{name:"content"},i.createElement("div",{className:p("content"),ref:function(e){return n._content=e},onTransitionEnd:n._onTransitionEnd},t.content,void 0===t.delimiter?i.createElement("div",{className:p("delimiter")}):t.delimiter)):null},n._renderChildren=function(){var e=n.props,t=e.children;if(!t)return null;var r=Boolean(!e.arrowHidden&&e.content),o=n.state.isExpanded;return i.createElement("div",null,i.createElement(u.a,{className:e.className,title:e.title,view:e.view,size:e.size,iconUrl:e.iconUrl,icon:e.icon,iconClassName:e.iconClassName,keepIconColor:e.keepIconColor,subcontent:e.subcontent,onClick:e.onClick||(r?n._onMoreClick:void 0),onAdditionalClick:n._onMoreClick,border:e.isLast&&!o||e.hideCardBorder?"hide":void 0,stretchBorder:e.stretchBorder,value:e.value,arrowView:r?o?"up":"down":void 0,noSidePadding:e.noSidePadding},Object(d.a)(t)?t({isExpanded:o}):t,r?i.createElement(c.a,{name:"control",nodeRef:n._controlAnalyticsRef,logClick:!0}):null),i.createElement("div",null))},n.state={isExpanded:Boolean(t.isInitiallyExpanded)},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(){var e=this.props.isExpanded;"boolean"==typeof e&&this.state.isExpanded!==e&&this.setState({isExpanded:e})},n.render=function(){return i.createElement("div",{ref:this._card,className:p({wide:this.props.isWideCard})},this._renderChildren(),i.createElement(l.a,{onShow:this._expandContent,onHideStart:this._collapseContent},this._renderContent()))},t}(i.Component);t.a=Object(a.b)(m)},68:function(e,t,n){"use strict";var r=n(6),i=n(4),o=n(61),a=n(8),s=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={shouldRender:t.immediately||Boolean(t.config.uatraits.isRobot)||t.config.query["no-lazy-render"]},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){!e.immediately&&this.props.immediately&&this.setState({shouldRender:!0})},n.render=function(){var e=this,t=this.props;if(this.state.shouldRender)return this.props.children;var n=t.placeholder||null;return i.createElement(o.a,{style:{width:"100%",height:"100%"},rootMargin:t.rootMargin||"100px",onChange:function(t){return e.setState({shouldRender:t})}},n)},t}(i.PureComponent);t.a=Object(a.b)(s)},71:function(e,t,n){},73:function(e,t,n){},91:function(e,t,n){"use strict";var r=n(87),i=n(6),o=n(4),a=n(52),s=n.n(a),c=n(31),l=n(2983),u=n(62),d=n(121),p=n(14),m={onClick:"click",onFastClick:"fastclick",onTouchEnd:"touchend",onDoubleClick:"dblclick",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseUp:"mouseup",onMouseDown:"mousedown",onMouseMove:"mousemove"},h=Object(p.a)(d.b,Object(c.b)({shouldWait:!0})),f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._handlers={},n._getFeature=function(){return{type:"Feature",id:n._id,geometry:n.props.geometry}},n._addHandler=function(e,t,r){n._handlers[e]=function(e,t,i){e&&"feature"===e.type&&e.feature.id===n._id&&r(i,t)},n.props.map.events.on(m[e],t,n._handlers[e])},n._removeHandler=function(e,t){n.props.map.events.off(m[e],t,n._handlers[e]),delete n._handlers[e]},n._id=t.id||s.a.v4(),n}Object(i.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props;t.map.addFeature(this._dataSourceId,this._getFeature(),t.drawingStyle,t.parentGroupId),Object.keys(m).forEach(function(n){t[n]&&e._addHandler(n,e._dataSourceId,t[n])})},n.componentDidUpdate=function(e){var t=this,n=this.props,r=e.dataSourceId?e.dataSourceId:u.d.DEFAULT_GRAPHICS;r!==this._dataSourceId?(n.map.removeFeatureById(r,this._id),n.map.addFeature(this._dataSourceId,this._getFeature(),n.drawingStyle,n.parentGroupId)):((!Object(l.a)(e.drawingStyle,n.drawingStyle)||!Object(l.a)(e.geometry,n.geometry))&&n.map.updateFeature(this._dataSourceId,this._getFeature(),n.drawingStyle),e.parentGroupId!==n.parentGroupId&&n.map.moveFeatureToGroup(this._dataSourceId,this._getFeature().id,n.parentGroupId));Object.keys(m).forEach(function(i){n[i]===e[i]&&r===t._dataSourceId||(e[i]&&t._removeHandler(i,r),n[i]&&t._addHandler(i,t._dataSourceId,n[i]))})},n.componentWillUnmount=function(){var e=this;Object.keys(this._handlers).forEach(function(t){return e._removeHandler(t,e._dataSourceId)}),this.props.map.removeFeatureById(this._dataSourceId,this._id)},n.render=function(){return null},Object(r.a)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||u.d.DEFAULT_GRAPHICS}}]),t}(o.PureComponent);t.a=h(f)},967:function(e,t,n){"use strict";var r=n(27);t.a=Object(r.a)(function(){return n.e("events").then(n.bind(null,1257))},{openMapEvent:!0,openCardEvent:!0})}}]);