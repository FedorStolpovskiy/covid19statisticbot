(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["covid"],{104:function(e,t,n){"use strict";n(165);var a=n(4),o=n(7),r=n(12),i=n(167),s=n.n(i),l=Object(o.a)("flip-icon");t.a=function(e){var t=e.isFlipped;return a.createElement(r.a,{className:l({flipped:t}),url:s.a})}},1171:function(e,t,n){"use strict";var a=n(6),o=(n(1918),n(4)),r=n(7),i=n(8),s=n(41),l=n(76),c=n(264),u=n(1172),d=Object(r.a)("covid-stat-view"),m=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={hideDiff:!1},n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){0},n.render=function(){var e,t,n,a=this.props,r=a.item,i=c.a.getDiffHistogram(r),s=[{title:(null===(e=a.data.stat)||void 0===e?void 0:e.cases)||"Заражений<br/>за всё время",value:r.cases}];if(i&&i.length>1&&!this.state.hideDiff){var m,p=i&&i[i.length-1],f=i&&i[i.length-2],v=p.value-f.value;s.push({title:((null===(m=a.data.stat)||void 0===m?void 0:m.casesDiff)||"Заражений<br/>за&nbsp;")+c.a.getDateByTimestamp(p.ts,a.config,a.timeContext),value:v})}r.cured>0&&s.push({title:(null===(n=a.data.stat)||void 0===n?void 0:n.cured)||"Выздоровлений",value:r.cured});return s.push({title:(null===(t=a.data.stat)||void 0===t?void 0:t.deaths)||"Смертей",value:r.deaths}),o.createElement("div",{className:d()},o.createElement("div",{className:d("items")},s.map(function(e,t){return o.createElement("div",{key:t,className:d("item")},o.createElement("div",{className:d("item-value")},"number"==typeof e.value?l.b(e.value,"ru"):e.value),o.createElement("div",{className:d("item-title"),dangerouslySetInnerHTML:{__html:e.title}}))})),r.histogram?o.createElement(u.a,{data:a.histogramDiff?c.a.getDiffHistogram(r):r.histogram,diff:a.histogramDiff}):null)},t}(o.Component);t.a=Object(s.b)(Object(i.b)(m))},1172:function(e,t,n){"use strict";var a=n(6),o=(n(1920),n(4)),r=n(7),i=n(8),s=n(41),l=n(9),c=n(76),u=n(264),d=Object(r.a)("covid-histogram-view"),m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._ref=o.createRef(),n._getBarsData=function(){var e=n.props.diff?n.props.data.map(function(e,t,n){return{value:0===t?0:e.value-n[t-1].value,ts:e.ts}}).slice(1):[].concat(n.props.data),t=Math.max.apply(Math,e.map(function(e){return e.value})),a=!1;return e.reverse().map(function(e){var n=e.value/t*100,o=100===n&&!a;return o&&(a=!0),{value:e.value,ts:e.ts,percentage:n,isMax:o}}).reverse()},n._isJoint=function(){var e=n._getBarWidth(100);return!n.props.diff&&void 0!==e&&e<=2},n._getBarWidth=function(e){if(!(!n.state.width||e<4||n.state.barsData.filter(function(e){return e.percentage<4}).length<4))return Math.floor(n.state.width/n.state.barsData.length)-1},n._onClick=function(e){n.setState({activeItem:e})},n._onMouseEnter=function(e){n.setState({activeItem:e})},n._onMouseLeave=function(e){n.state.activeItem===e&&n.setState({activeItem:void 0})},n._renderBar=function(e,t){var a=n.props,r=n.state,i=n._isJoint()?void 0:n._getBarWidth(e.percentage),s=e===r.activeItem,l=r.activeItem?s:a.diff?t===a.data.length-1:0===t||t===a.data.length-1,m=r.activeItem?s:t===a.data.length-1,p=a.diff?Math.ceil(e.percentage/100*6)||1:void 0;return o.createElement("div",{key:t,className:d("bar",{group:p,active:s}),"data-name":l?u.a.getDateByTimestamp(e.ts,a.config,a.timeContext):void 0,style:{height:e.percentage+"%",width:i,flexGrow:i?0:void 0},onClick:void 0,onMouseEnter:function(){return n._onMouseEnter(e)},onMouseLeave:function(){return n._onMouseLeave(e)}},m?o.createElement("div",{className:d("bar-value")},a.diff&&e.value>0?"+":"",c.b(e.value,"ru")):null)},n._renderBars=function(){return o.createElement("div",{className:d("bars")},n.state.barsData.map(n._renderBar))},n.state={barsData:n._getBarsData()},n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._ref.current&&this.setState({width:this._ref.current.offsetWidth})},n.componentDidUpdate=function(e){e.data!==this.props.data&&this.setState({barsData:this._getBarsData()})},n.render=function(){var e=this.props;return e.data.length<10?null:o.createElement(l.a,{name:"histogram"},o.createElement("div",{className:d({small:e.small,diff:e.diff,joint:this._isJoint()}),ref:this._ref},this._renderBars()))},t}(o.PureComponent);t.a=Object(s.b)(Object(i.b)(m))},1173:function(e,t,n){"use strict";var a=n(6),o=(n(1931),n(4)),r=n(7),i=n(8),s=Object(r.a)("isolation-badge-view"),l=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement("div",{className:s(),style:{backgroundColor:e.color}},Math.round(10*e.level)+"%")},t}(o.PureComponent);t.a=Object(i.b)(l)},128:function(e,t,n){"use strict";var a,o=n(6),r=n(4),i=[],s=!1;function l(e){0===(i=i.filter(function(t){return t!==e})).length&&a&&a.disconnect()}var c=function(e){function t(){return e.apply(this,arguments)||this}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e,t;s||(e=this.props.listener,(t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)&&(a||(a=new t(function(e){var t=e.find(function(e){return"class"===e.attributeName});if(t){var n=t.target.getAttribute("class");n&&(s=n.includes("_font_loaded"))&&setTimeout(function(){i.forEach(function(e){e(),l(e)})},1)}})).observe(window.document.getElementsByTagName("body")[0],{attributes:!0,attributeFilter:["class"]}),i.push(e)))},n.componentWillUnmount=function(){l(this.props.listener)},n.render=function(){return null},t}(r.PureComponent);t.a=c},1280:function(e,t,n){"use strict";n.r(t);var a=n(6),o=n(10),r=n(4),i=n(11),s=n(98),l=n(16),c=n(22),u=n(42),d=n(358),m=n(1144),p=(n(1914),n(7)),f=(n(1916),n(76)),v=n(34),h=n(162),_=n(36),g=n(8),b=n(31),E=n(9),w=(n(66),n(1171)),y=n(264),C=Object(p.a)("covid-placemark"),k=function(e){function t(t){var n;return(n=e.call(this,t)||this)._popupTimer=0,n._ref=r.createRef(),n._onMouseEnter=function(){window.clearTimeout(n._popupTimer),n.state.hover||(n._popupTimer=window.setTimeout(function(){n.setState({hover:!0})},300))},n._onMouseLeave=function(){window.clearTimeout(n._popupTimer),n.state.hover&&(n._popupTimer=window.setTimeout(function(){n.setState({hover:!1})},150))},n._onClose=function(){window.clearTimeout(n._popupTimer),n.setState({hover:!1}),n.props.selectItem(void 0)},n._renderBalloonContent=function(){var e=n.props,t=e.item,a="https://news.yandex.ru/yandsearch?text=коронавирус+"+t.name+"&rpt=nnews2&grhow=clutop&rel=rel";return r.createElement(E.a,{name:"covid_balloon",nodeState:{name:t.name}},r.createElement("div",{className:C("balloon")},r.createElement(_.a,{circle:!1,offset:{top:12,right:12},onClick:n._onClose}),r.createElement("div",{className:C("balloon-title"),dangerouslySetInnerHTML:{__html:t.name}}),r.createElement(w.a,{data:e.data,item:t,histogramDiff:e.showDiff}),t.ru&&e.data.balloon.link?r.createElement(E.a,{name:"link",logClick:!0},r.createElement("a",{className:C("balloon-link"),href:a,target:"_blank"},e.data.balloon.link)):null))},n._renderBalloon=function(){var e=n.props,t=e.item;return(e.isSelected||n.state.hover)&&t.coordinates?r.createElement(h.a,{isShown:!0,coordinates:t.coordinates,onClose:n._onClose,position:["top","bottom"],offset:{main:12,side:0},onMouseEnter:n._onMouseEnter,onMouseLeave:n._onMouseLeave,getExcludedNodes:function(){return n._ref.current||void 0}},n._renderBalloonContent()):null},n.state={hover:!1},n}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.item;if(!t.coordinates)return null;var n=e.showDiff?y.a.getDiffHistogram(t):t.histogram;if((e.showDiff||e.currentTs)&&!n)return null;var a=e.showDiff||e.currentTs?function(e,t,n){var a=n?e.find(function(e){return e.ts===n}):e[e.length-1];if(t){var o=a?e[e.indexOf(a)-1]:void 0;return a&&o?a.value-o.value:void 0}return a?a.value:void 0}(n,e.showDiff,e.currentTs):t.cases;if(void 0===a)return null;var o=e.showDiff?Math.max.apply(Math,n.map(function(a,o){var r=a.value;return e.showDiff?0===o?0:r-n[o-1].value:t.cases})):0,i=e.showDiff?Math.max(6*Math.ceil(Math.log(a)),10):Math.max(5*Math.ceil(Math.log(a/10+3)),8);return i%2!=0&&(i+=1),r.createElement(r.Fragment,null,r.createElement(v.default,{coordinates:t.coordinates,zIndex:9e3+a+(e.isSelected?1e6:0),onClick:function(){return e.selectItem(t.name)},onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},r.createElement("div",{ref:this._ref,className:C({selected:e.isSelected,ru:e.showDiff?void 0:"ru"===e.config.tld&&(t.ru||t.ruCountry),group:e.showDiff?Math.ceil(a/o*6)||1:void 0}),style:{width:i,height:i}},r.createElement("div",{className:C("center",{visible:e.showTitle||t.ruCountry})}),r.createElement("div",{className:C("content",{visible:e.showTitle||t.ruCountry})},f.b(a,"ru")))),this._renderBalloon())},t}(r.PureComponent);var S=Object(g.b)(Object(b.b)({shouldWait:!0})(k)),M=n(64),T=n(796),I=(n(280),n(734)),N=(n(1922),n(41)),D=n(12),L=n(433),O=n(1924),x=n.n(O),j=n(1925),P=n.n(j),R=(n(1926),Object(p.a)("covid-timeline-view")),z=134,W=function(){},B=function(e){function t(t){var n,a;return(a=e.call(this,t)||this)._playInterval=0,a._onSliderChange=function(e){a._pause(),a._onChange(e)},a._onChange=function(e){a.props.onChange(a._items[a._items.length-1]===e?void 0:e)},a._play=function(){var e=a.props;a.setState({isPlaying:!0}),window.clearInterval(a._playInterval),e.currentTs&&e.currentTs!==a._items[a._items.length-1]||e.onChange(a._items[0]),a._playInterval=window.setInterval(function(){var e=a._items.indexOf(a.props.currentTs);-1!==e&&e!==a._items.length-1?a._onChange(a._items[e+1]):a._pause()},500)},a._pause=function(){window.clearInterval(a._playInterval),a.setState({isPlaying:!1})},a._onClose=function(){a._pause(),a.props.onChange(),a.setState({initialized:!1})},a._toggle=function(){a.state.isPlaying?a._pause():a._play()},a._onInit=function(){a.props.onInit(),a.setState({initialized:!0}),a._play()},a._renderPlayControl=function(){return r.createElement(E.a,{name:"control",logClick:!0},r.createElement("div",{className:R("control"),onClick:a._toggle},r.createElement(D.a,{url:a.state.isPlaying?P.a:x.a})))},a._renderTrack=function(){var e=a.props;return r.createElement(E.a,{name:"track",logClick:!0},r.createElement("div",{className:R("track")},r.createElement(L.a,{showProgress:!0,value:e.currentTs||a._items[a._items.length-1],label:"",step:a._items[1]-a._items[0],min:a._items[0],max:a._items[a._items.length-1],onChange:a._onSliderChange,onMoveStart:W,onMoveEnd:W,onTrackClick:W})))},a.state={isPlaying:!1,initialized:!1},a._items=((null===(n=t.data.items.find(function(e){return e.id===z}))||void 0===n?void 0:n.histogram)||t.data.histogram).map(function(e){return e.ts}),a}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.state,t=this.props;if(!t.data.histogram)return null;if(!e.initialized)return r.createElement(E.a,{name:"playback",logClick:!0},r.createElement(E.a,{name:"show_control",logClick:!0},r.createElement("div",{className:R("wrapper")},r.createElement("div",{className:R(),onClick:this._onInit},r.createElement(D.a,{className:R("control"),url:x.a}),r.createElement("div",{className:R("label")},"Воспроизвести")))));var n=t.currentTs||this._items[this._items.length-1];return r.createElement(E.a,{name:"playback"},r.createElement("div",{className:R("wrapper",{initialized:e.initialized})},r.createElement("div",{className:R({initialized:e.initialized})},this._renderPlayControl(),this._renderTrack(),r.createElement("div",{className:R("date")},y.a.getDateByTimestamp(n,t.config,t.timeContext))),null))},t}(r.PureComponent),H=Object(N.b)(Object(g.b)(B)),U=Object(p.a)("covid-map-view"),A=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onMapUpdate=function(){var e=n._getZoomLimits(),t=e.zoomLimit,a=e.zoomLimitRu;t===n.state.zoomLimit&&a===n.state.zoomLimitRu||n.setState({zoomLimit:t,zoomLimitRu:a})},n._getZoomLimits=function(){var e,t,a,o,r,i,s=n.props,l=s.map.zoom;return{zoomLimit:l<=3.5?(null===(e=s.data.zoomLimitsWorld)||void 0===e?void 0:e[0])||2e6:l<=4.5?(null===(t=s.data.zoomLimitsWorld)||void 0===t?void 0:t[1])||5e5:l<=5.5?(null===(a=s.data.zoomLimitsWorld)||void 0===a?void 0:a[2])||1e5:0,zoomLimitRu:l<=3.5?(null===(o=s.data.zoomLimits)||void 0===o?void 0:o[0])||5e4:l<=4.5?(null===(r=s.data.zoomLimits)||void 0===r?void 0:r[1])||25e3:l<=5.5?(null===(i=s.data.zoomLimits)||void 0===i?void 0:i[2])||1e4:0}},n._renderControls=function(){var e,t,a,o,i=n.props,s=n.state,l=r.createElement("div",{className:U("switcher")},r.createElement(I.a,{view:"filled-air",items:[{key:"total",title:(null===(e=i.data.mapSwitch)||void 0===e?void 0:e.allCases)||"Все случаи"},{key:"diff",title:(null===(t=i.data.mapSwitch)||void 0===t?void 0:t.newCases)||"Новые"}],selectedKey:s.showDiff?"diff":"total",onClick:function(e){return n.setState({showDiff:"diff"===e})}})),c=s.showDiff?r.createElement("div",{className:U("legend")},r.createElement("div",{className:U("legend-start")},(null===(a=i.data.legend)||void 0===a?void 0:a.start)||"Спад"),[1,2,3,4,5,6].map(function(e){return r.createElement("div",{className:U("legend-item",{group:e}),key:e})}),r.createElement("div",{className:U("legend-end")},(null===(o=i.data.legend)||void 0===o?void 0:o.end)||"Рост")):null,u=T.a;return r.createElement(u,null,r.createElement("div",{className:U("controls")},null,r.createElement("div",{className:U("controls-group")},i.config.query.embed?null:r.createElement(H,{data:i.data,currentTs:i.currentTs,onChange:i.changeCurrentTs,onInit:i.minimizePanel}),l),c))},n.state=Object(o.a)(Object(o.a)({},n._getZoomLimits()),{},{showDiff:!1}),n}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props,t=this.state,n=e.data;return r.createElement(r.Fragment,null,n.items.filter(function(t){return!e.showWorldStat||!t.ru}).concat(e.showWorldStat?y.a.getRussiaItem(n):[]).map(function(a,o){return r.createElement(S,{key:o,data:n,item:a,isSelected:e.selectedName===a.name,selectItem:e.selectItem,showTitle:a.cases>(a.ru?t.zoomLimitRu:t.zoomLimit),showDiff:t.showDiff,currentTs:e.currentTs})}),r.createElement(M.default,{onUpdate:this._onMapUpdate}),this._renderControls())},t}(r.PureComponent),F=Object(g.b)(Object(b.b)({shouldWait:!0})(A)),X=(n(1927),Object(p.a)("isolation-placemark-view")),V=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.data,n=t.histogramDays?t.histogramDays[t.histogramDays.length-1].value:t.levelDay,a=y.a.getIsolationColor(n,e.isolationData);return r.createElement("div",{className:X({size:3})},r.createElement("div",{className:X("background"),style:{backgroundColor:a}}),r.createElement("div",{className:X("content")},Math.round(10*n)+"%"))},t}(r.PureComponent),q=Object(g.b)(V),K=n(1333),Z=n(730),J=function(e){function t(t){var n;return(n=e.call(this,t)||this)._popupTimer=0,n._ref=r.createRef(),n._onMouseEnter=function(e){window.clearTimeout(n._popupTimer),n.state.hover!==e.id&&(n._popupTimer=window.setTimeout(function(){n.setState({hover:e.id})},200))},n._onMouseLeave=function(){window.clearTimeout(n._popupTimer),n.state.hover&&(n._popupTimer=window.setTimeout(function(){n.setState({hover:void 0})},200))},n._onClose=function(){window.clearTimeout(n._popupTimer),n.setState({hover:void 0}),n.props.selectItem(void 0)},n._renderPinContent=function(e){return r.createElement(q,{data:e,isolationData:n.props.data})},n._renderPin=function(e){var t=n.props,a=t.selectedId===e.id;return r.createElement(v.default,{key:e.id,coordinates:e.coordinates,zIndex:9e3+e.population+(a?1e6:0),onClick:function(){return t.selectItem(e.id)},onMouseEnter:function(){return n._onMouseEnter(e)},onMouseLeave:function(){return n._onMouseLeave()}},n._renderPinContent(e))},n._renderBalloonContent=function(e){return r.createElement(Z.a,null,r.createElement("div",{className:"covid-placemark__balloon"},r.createElement(_.a,{circle:!1,offset:{top:12,right:12},onClick:n._onClose}),r.createElement(K.a,{city:e,data:n.props.data,allowFixedWidthHistogram:!0})))},n._renderBalloon=function(){var e=n.props;if(!e.selectedId&&!n.state.hover)return null;var t=e.data.cities.find(function(t){return t.id===e.selectedId||!e.selectedId&&t.id===n.state.hover});return t&&t.coordinates?r.createElement(h.a,{key:t.name,isShown:!0,coordinates:t.coordinates,onClose:n._onClose,position:["top","bottom"],offset:{main:12,side:0},onMouseEnter:function(){return n._onMouseEnter(t)},onMouseLeave:function(){return n._onMouseLeave()},getExcludedNodes:function(){return n._ref.current||void 0}},n._renderBalloonContent(t)):null},n.state={hover:void 0},n}return Object(a.a)(t,e),t.prototype.render=function(){var e=this,t=this.props;return r.createElement(r.Fragment,null,t.data.cities.map(function(t){return e._renderPin(t)}),this._renderBalloon())},t}(r.PureComponent),G=Object(g.b)(Object(b.b)({shouldWait:!0})(J)),Y=n(1935),Q=n(1941),$=n(224),ee=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){var e,t,n=this.props,a=[{key:"covid",title:(null===(e=n.data.switch)||void 0===e?void 0:e.covid)||"Распространение"},{key:"isolation",title:(null===(t=n.data.switch)||void 0===t?void 0:t.isolation)||"Самоизоляция"}];return r.createElement("div",{onClick:function(e){return e.stopPropagation()}},r.createElement($.a,{tab:n.isolation?"isolation":"covid",tabs:a,onTabChange:function(e){return n.onSwitch("isolation"===e.key)}}))},t}(r.PureComponent),te=Object(g.b)(ee),ne=n(38),ae=n(487),oe={close:u.a.close,setMobileViewState:c.a.setMobileViewState,open:d.a.open,openIsolation:d.a.openIsolation,openActual:m.a.open,setMapLocation:c.a.setMapLocation},re=i.b(function(e){var t=l.h(e,"covid");return Object(o.a)(Object(o.a)({},t),{},{config:e.config})},oe),ie=function(e){function t(t){var n;return(n=e.call(this,t)||this)._selectItem=function(e){n.setState({selectedName:e})},n._selectIsolationItem=function(e){n.setState({selectedId:e})},n._minimizePanel=function(){n.props.setMobileViewState("micro")},n._setShowWorldStat=function(e){n.setState({showWorldStat:e})},n._onSwitch=function(e){e?n.props.openIsolation():n.props.open()},n._renderTabs=function(){var e=n.props;return e.data&&"error"!==e.data.type&&e.data.switch?r.createElement(te,{data:e.data,isolation:e.isolation,onSwitch:n._onSwitch}):null},n._renderPanel=function(e){var t=n.props,a=t.data;return a&&"error"!==a.type?r.createElement(r.Fragment,null,n._renderTabs(),"isolation"===a.type?r.createElement(Q.a,{collapsed:e,data:a,hidePromo:t.hidePromo,selectedId:n.state.selectedId,selectItem:n._selectIsolationItem,onClose:t.close,onPromoClick:t.openActual}):r.createElement(Y.a,{collapsed:e,data:a,hidePromo:t.hidePromo,selectedName:n.state.selectedName,selectItem:n._selectItem,showWorldStat:n.state.showWorldStat,setShowWorldStat:n._setShowWorldStat,onClose:t.close,onPromoClick:t.openActual})):null},n.state={showWorldStat:"ru"!==t.config.tld},n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;e.data&&"error"===e.data.type&&window.setTimeout(function(){e.isolation?e.openIsolation():e.open()},500)},n.componentDidUpdate=function(e){var t=this.props;e.data&&!t.data&&e.previousMapLocation&&t.setMapLocation(e.previousMapLocation)},n.componentWillUnmount=function(){var e=this.props;e.data&&e.previousMapLocation&&e.setMapLocation(e.previousMapLocation)},n.render=function(){var e=this,t=this.props,n=t.data;return n?"error"===n.type?r.createElement(s.a,{name:"covid",analyticsName:"covid_panel"},r.createElement("div",{style:{margin:"30px"}},r.createElement(ne.a,{view:"large"}))):r.createElement(r.Fragment,null,"isolation"===n.type?r.createElement(G,{data:n,selectedId:this.state.selectedId,selectItem:this._selectIsolationItem}):r.createElement(F,{data:n,selectedName:this.state.selectedName,selectItem:this._selectItem,showWorldStat:this.state.showWorldStat,currentTs:this.state.currentTs,changeCurrentTs:function(t){return e.setState({currentTs:t})},minimizePanel:this._minimizePanel}),t.data&&"error"!==t.data.type?r.createElement(ae.a,{name:"covid",dataSourceIds:["map"]}):null,r.createElement(s.a,{name:"covid",analyticsName:"covid_panel",onClose:t.close,renderMiniCard:function(){return e._renderPanel(!0)}},this._renderPanel(!1))):null},t}(r.PureComponent);t.default=re(ie)},1333:function(e,t,n){"use strict";var a=n(6),o=(n(1929),n(4)),r=n(7),i=n(8),s=n(41),l=n(1173),c=n(40),u=(n(1933),n(9)),d=n(264),m=Object(r.a)("isolation-histogram-view"),p=176,f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getValuePercentage=function(e){return e/10*100},n._getItems=function(){var e=n.props;return e.allowFixedWidth?e.data:e.data.slice(-p)},n._onClick=function(e){n.setState({activeItem:e})},n._renderBar=function(e,t){var a=n.props,r=d.a.getIsolationColor(e.value,a.isolationData),i=60*a.getToday().getTimezoneOffset(),s=Math.floor(e.ts+10800+i),l=Object(c.b)(new Date(1e3*s),a.config),u=n._getItems(),p=e===n.state.activeItem,f=n.state.activeItem?p:0===t||t===u.length-1,v=n.state.activeItem?p:t===u.length-1;return o.createElement("div",{key:t,className:m("bar",{active:p}),"data-name":f?l:void 0,style:{height:n._getValuePercentage(e.value)+"%",backgroundColor:r,minWidth:a.allowFixedWidth?"1px":void 0},onClick:void 0,onMouseEnter:function(){return n._onClick(e)},onMouseLeave:function(){n.state.activeItem===e&&n.setState({activeItem:void 0})}},v?o.createElement("div",{className:m("bar-value")},Math.round(10*e.value)+"%"):null)},n._renderBars=function(){return o.createElement("div",{className:m("bars")},n._getItems().map(n._renderBar))},n.state={},n}return Object(a.a)(t,e),t.prototype.render=function(){return o.createElement(u.a,{name:"histogram"},o.createElement("div",{className:m()},this._renderBars()))},t}(o.Component),v=Object(s.b)(Object(i.b)(f)),h=Object(r.a)("isolation-city-view"),_=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.city,n=t.dayTimestamp,a=t.levelDay,r=60*e.getToday().getTimezoneOffset(),i=new Date(1e3*Math.floor(n+10800+r)),s=Object(c.b)(i,e.config),u=t.histogramDays;return o.createElement("div",{className:h()},o.createElement("div",{className:h("title")},t.name),o.createElement("div",{className:h("info-wrapper")},o.createElement("div",{className:h("info")},o.createElement("div",{className:h("badge-wrapper")},o.createElement(l.a,{level:a,color:d.a.getIsolationColor(a,e.data)})),o.createElement("div",{className:h("info-text"),dangerouslySetInnerHTML:{__html:s}}))),u?o.createElement(v,{data:u,city:t,isolationData:e.data,allowFixedWidth:e.allowFixedWidthHistogram}):null)},t}(o.PureComponent);t.a=Object(s.b)(Object(i.b)(_))},1558:function(e,t,n){"use strict";n.r(t);var a,o=n(19),r=n(42),i=n(22),s=n(29),l=n(16),c={open:function(e){return void 0===e&&(e={}),function(t,n,c){var u=c.config;o.a.cancel(a);var d=n(),m=u.covidData&&"covid"===u.covidData.type?Promise.resolve(u.covidData):Object(s.a)("covid",{query:{lang:u.lang}},u);a=o.a.create(m,{success:function(n){var a=l.h(d,"covid"),o={mode:"covid",mobileViewState:a?a.mobileViewState:"mini",data:n,hidePromo:e.hidePromo,previousMapLocation:d.map.location};"covid"===l.d(d)?t(r.a.replace(o)):e.isPush?t(r.a.push(o)):t(r.a.reset([o])),t(i.a.setMapLocation(n.mapLocation))}})}},openIsolation:function(e){return void 0===e&&(e={}),function(t,n,c){var u=c.config;o.a.cancel(a);var d=n(),m=u.covidData&&"isolation"===u.covidData.type?Promise.resolve(u.covidData):Object(s.a)("covid",{query:{lang:u.lang,isolation:!0}},u);a=o.a.create(m,{success:function(n){var a=l.h(d,"covid"),o={mode:"covid",mobileViewState:a?a.mobileViewState:"mini",data:n,isolation:!0,hidePromo:e.hidePromo,previousMapLocation:d.map.location};"covid"===l.d(d)?t(r.a.replace(o)):e.isPush?t(r.a.push(o)):t(r.a.reset([o])),n.mapLocation&&t(i.a.setMapLocation(n.mapLocation))}})}}};t.default=c},162:function(e,t,n){"use strict";var a=n(13),o=n(37),r=n(6),i=n(4),s=n(34),l=n(64),c=n(23),u=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._ref=i.createRef(),t._onMapUpdate=function(){t.forceUpdate()},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.coordinates,r=Object(o.a)(t,["coordinates"]);return i.createElement(i.Fragment,null,i.createElement(s.default,{coordinates:n,nonInteractive:!0},i.createElement("div",{ref:this._ref}),i.createElement(c.a,Object(a.a)({type:"balloon"},r,{getTarget:function(){return e._ref.current}}),r.children)),i.createElement(l.default,{onUpdate:r.isShown?this._onMapUpdate:void 0}))},t}(i.PureComponent);t.a=u},165:function(e,t,n){},167:function(e,t,n){e.exports=n.p+"_/ab65d8cbf4996eb9048efd9031d9f38b.svg"},1914:function(e,t,n){},1916:function(e,t,n){},1918:function(e,t,n){},1920:function(e,t,n){},1922:function(e,t,n){},1924:function(e,t,n){e.exports=n.p+"_/c5d7c8869d6a40e2a9dd75000cb70373.svg"},1925:function(e,t,n){e.exports=n.p+"_/387a0e8d2f04fc18969211c909329285.svg"},1926:function(e,t,n){e.exports=n.p+"_/131f0b80ceff357f32f6b4ca8a40eeec.svg"},1927:function(e,t,n){},1929:function(e,t,n){},1931:function(e,t,n){},1933:function(e,t,n){},1935:function(e,t,n){"use strict";var a=n(6),o=n(1936),r=n.n(o),i=n(4),s=n.n(i),l=n(7),c=n(26),u=n(41),d=n(11),m=n(22),p=n(2995),f=n(9),v=n(76),h=n(1938),_=n(12),g=n(264),b=n(36),E=n(1171),w=n(45),y=n(139),C=n(734),k=n(35),S=n(591),M=n(907),T=n.n(M),I=n(40),N=Object(c.a)({resolved:{},chunkName:function(){return"covid-extra"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("covid-extra").then(n.bind(null,1234))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var a=this.resolve(t);return n(a)},resolve:function e(){return 1234}},{ssr:!1}),D={setMapLocation:m.a.setMapLocation},L=d.b(function(e){return{mapLocation:e.map.location,config:e.config}},D),O=Object(l.a)("covid-panel-view"),x=10800,j=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getUserItem=function(){var e=n.props;return e.data.items.find(function(t){return t.id===e.config.userRegion.id})||e.data.items.find(function(t){return t.id===e.data.matchedRegionId})},n._onItemClick=function(e){var t=n.props;e.coordinates&&!Object(p.a)(t.mapLocation.bounds,e.coordinates)&&t.setMapLocation({center:e.coordinates,duration:300}),t.selectItem(e.name)},n._onScroll=function(e){var t=!!e&&e.scrollTop>130;t!==n.state.fixTitle&&n.setState({fixTitle:t})},n._renderStatSwitch=function(){var e=n.props,t=n.state;return"ru"!==e.config.tld?null:i.createElement(w.a,{position:"top",order:2},i.createElement("div",{className:O("stat-switch")},i.createElement(C.a,{view:"filled",items:[{key:"ru",title:"Россия"},{key:"my",title:"Мой регион"},{key:"world",title:"Мир"}],selectedKey:t.showUserRegion?"my":e.showWorldStat?"world":"ru",onClick:function(t){e.setShowWorldStat("world"===t),n.setState({showUserRegion:"my"===t})}})))},n._renderStat=function(){var e=n.props,t=n.state.showUserRegion?n._getUserItem():void 0;return i.createElement("div",{className:O("stat")},t?i.createElement("div",{className:O("stat-title")},t.name):null,i.createElement(E.a,{data:e.data,item:t||g.a.getCovidStatData(e.data,e.showWorldStat)}))},n._renderTestsCount=function(){var e=n.props;return e.data.tests&&e.data.testsText&&!e.showWorldStat?i.createElement("div",{className:O("tests")},i.createElement("span",{className:O("tests-text")},e.data.testsText," "),i.createElement("span",{className:O("tests-count")},v.b(e.data.tests,"ru"))):null},n.state={fixTitle:!1,showUserRegion:!1},n}return Object(a.a)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.data,a=60*t.getToday().getTimezoneOffset(),o=n.ts?Object(I.c)(new Date(1e3*(n.ts+a+x)),t.config):void 0,r=null===(e=n.subtitle)||void 0===e?void 0:e.replace("{timestamp}",o||"");return i.createElement(f.a,{name:"covid"},i.createElement("div",{className:O({collapsed:t.collapsed})},i.createElement(b.a,{onClick:t.onClose,offset:"large"}),i.createElement(y.a,{eventHandler:this._onScroll}),i.createElement("div",{className:O("title"),dangerouslySetInnerHTML:{__html:n.title}}),null,this.state.fixTitle?i.createElement(k.a,{selector:".body"},i.createElement("div",{className:O("title",{head:!0}),dangerouslySetInnerHTML:{__html:n.title}})):null,this.state.fixTitle?i.createElement(k.a,{selector:".body"},i.createElement("div",{className:O("logo")},i.createElement(S.a,{view:"map"}))):null,i.createElement("div",{className:O("content")},r?i.createElement("div",{className:O("subtitle"),dangerouslySetInnerHTML:{__html:r}}):null,n.description?i.createElement("div",{className:O("description"),dangerouslySetInnerHTML:{__html:n.description}}):null,n.link?i.createElement(f.a,{name:"link",logClick:!0},i.createElement("a",{className:O("link"),href:n.link.url,target:"_blank"},i.createElement(_.a,{url:T.a,className:O("link-icon")}),i.createElement("span",{className:O("link-text"),dangerouslySetInnerHTML:{__html:n.link.text}}))):null,n.coronaPromo&&!t.hidePromo?i.createElement(f.a,{name:"promo",logClick:!0},i.createElement("img",{className:O("promo"),src:n.coronaPromo.image,style:{height:n.coronaPromo.height},onClick:t.onPromoClick})):null,this._renderStatSwitch(),this._renderStat(),this._renderTestsCount(),i.createElement(h.a,{data:n,showWorldStat:t.showWorldStat,onItemClick:this._onItemClick}),i.createElement(N,{data:t.data,showWorldStat:t.showWorldStat}),n.footer?i.createElement("div",{className:O("footer"),dangerouslySetInnerHTML:{__html:n.footer}}):null)))},t}(i.PureComponent);t.a=Object(u.b)(L(j))},1936:function(e,t,n){},1938:function(e,t,n){"use strict";var a=n(6),o=(n(1939),n(4)),r=n(7),i=n(8),s=n(9),l=n(76),c=n(104),u=n(264),d=Object(r.a)("covid-table-view"),m=function(e){function t(t){var n;return(n=e.call(this,t)||this)._getDiff=function(e){var t=u.a.getDiffHistogram(e);return t?t[t.length-1].value-t[t.length-2].value:0},n._selectSort=function(e){n.setState({sort:e})},n._renderRow=function(e,t){var a=n._getDiff(e);return o.createElement(s.a,{key:t,name:"item",nodeState:{name:e.name},logClick:!0},o.createElement("tr",{className:d("item"),onClick:function(){return n.props.onItemClick(e)}},o.createElement("td",{className:d("item-name")},e.name),o.createElement("td",{className:d("item-cases")},l.b(e.cases,"ru")),o.createElement("td",{className:d("item-cases-diff")},a?o.createElement("span",{className:d("item-cases-diff-text")},l.b(a,"ru")):null),o.createElement("td",{className:d("item-deaths")},l.b(e.deaths,"ru"))))},n.state={sort:"cases",expanded:!1},n._sortFunctions={name:function(e,t){return e.name.localeCompare(t.name)},cases:function(e,t){return t.cases-e.cases||e.name.localeCompare(t.name)},"cases-diff":function(e,t){return n._getDiff(t)-n._getDiff(e)||e.name.localeCompare(t.name)},deaths:function(e,t){return t.deaths-e.deaths||e.name.localeCompare(t.name)}},n}return Object(a.a)(t,e),t.prototype.render=function(){var e,t,n,a,r=this,i=this.props,s=this.state,l=i.data,m=u.a.getRussiaItem(l);if(!(i.data.histogram&&i.data.histogram[i.data.histogram.length-1]))return null;var p=l.items.concat(m).filter(function(e){return i.showWorldStat?!e.ru:e.ru}).sort(this._sortFunctions[s.sort]),f=s.expanded?p:p.slice(0,5),v=i.showWorldStat?l.listTitleWorld:l.listTitle;return o.createElement("div",{className:d()},v?o.createElement("div",{className:d("title"),dangerouslySetInnerHTML:{__html:v}}):null,o.createElement("table",{className:d("table")},o.createElement("thead",{className:d("head")},o.createElement("tr",null,o.createElement("th",{className:d("head-sort"),onClick:function(){return r._selectSort("name")},dangerouslySetInnerHTML:{__html:(null===(e=i.data.table)||void 0===e?void 0:e.name)||"Регион"}}),o.createElement("th",{className:d("head-cases"),onClick:function(){return r._selectSort("cases")},dangerouslySetInnerHTML:{__html:(null===(t=i.data.table)||void 0===t?void 0:t.cases)||"Заражений"}}),o.createElement("th",{className:d("head-cases-diff"),onClick:function(){return r._selectSort("cases-diff")},dangerouslySetInnerHTML:{__html:(null===(n=i.data.table)||void 0===n?void 0:n.casesDiff)||"Новых"}}),o.createElement("th",{className:d("head-deaths"),onClick:function(){return r._selectSort("deaths")},dangerouslySetInnerHTML:{__html:(null===(a=i.data.table)||void 0===a?void 0:a.deaths)||"Смертей"}}))),o.createElement("tbody",null,f.map(this._renderRow))),s.expanded?null:o.createElement("div",{className:d("expand"),onClick:function(){return r.setState({expanded:!0})}},l.listShowAll||"Показать все",o.createElement(c.a,{isFlipped:!1})))},t}(o.PureComponent);t.a=Object(i.b)(m)},1939:function(e,t,n){},1941:function(e,t,n){"use strict";var a=n(6),o=n(1942),r=n.n(o),i=n(4),s=n.n(i),l=n(26),c=n(7),u=n(11),d=n(22),m=n(2995),p=n(9),f=n(40),v=n(1333),h=n(264),_=n(36),g=n(45),b=n(139),E=n(35),w=n(591),y=Object(l.a)({resolved:{},chunkName:function(){return"covid-extra"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("covid-extra").then(n.bind(null,1235))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var a=this.resolve(t);return n(a)},resolve:function e(){return 1235}},{ssr:!1}),C={setMapLocation:d.a.setMapLocation},k=u.b(function(e){return{mapLocation:e.map.location,config:e.config}},C),S=Object(c.a)("isolation-panel-view"),M=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onItemClick=function(e){var t=n.props;e.coordinates&&!Object(m.a)(t.mapLocation.bounds,e.coordinates)&&t.setMapLocation({center:e.coordinates,duration:300}),t.selectItem(e.id)},n._onScroll=function(e){var t=!!e&&e.scrollTop>120;t!==n.state.fixTitle&&n.setState({fixTitle:t})},n._renderLegend=function(){var e=n.props,t=e.data.isolationLegendV2;return t?i.createElement("div",{className:S("legend")},t.map(function(t){return i.createElement("div",{className:S("legend-item"),key:t.title},i.createElement("div",{className:S("legend-icon"),style:{backgroundColor:h.a.getIsolationColor(t.level,e.data)}}),i.createElement("div",{className:S("legend-title")},t.title))})):null},n.state={fixTitle:!1},n}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.data,n=e.data.matchedRegionId||213,a=t.cities.find(function(e){return e.id===n});a&&!a.histogramDays&&(a=void 0);var o=Object(f.c)(new Date(1e3*t.timestamp),e.config),r=(t.isolationSubtitle||"{timestamp}").replace("{timestamp}",o);return i.createElement(p.a,{name:"covid"},i.createElement("div",{className:S({collapsed:e.collapsed})},i.createElement(_.a,{onClick:e.onClose,offset:"large"}),i.createElement(b.a,{eventHandler:this._onScroll}),i.createElement(g.a,{position:"top",order:1,disabled:!0},i.createElement("div",{className:S("title"),dangerouslySetInnerHTML:{__html:t.isolationTitle}})),this.state.fixTitle?i.createElement(E.a,{selector:".body"},i.createElement("div",{className:S("title",{fixed:!0}),dangerouslySetInnerHTML:{__html:t.isolationTitle}})):null,this.state.fixTitle?i.createElement(E.a,{selector:".body"},i.createElement("div",{className:S("logo")},i.createElement(w.a,{view:"map"}))):null,i.createElement("div",{className:S("content")},r?i.createElement("div",{className:S("subtitle"),dangerouslySetInnerHTML:{__html:r}}):null,t.isolationDescription?i.createElement("div",{className:S("description"),dangerouslySetInnerHTML:{__html:t.isolationDescription}}):null,this._renderLegend(),t.isolationLink?i.createElement(p.a,{name:"link",logClick:!0},i.createElement("a",{className:S("link"),href:t.isolationLink.url,target:"_blank"},i.createElement("span",{className:S("link-text"),dangerouslySetInnerHTML:{__html:t.isolationLink.text}}))):null,t.coronaPromo&&!e.hidePromo?i.createElement(p.a,{name:"promo",logClick:!0},i.createElement("img",{className:S("promo"),src:t.coronaPromo.image,style:{height:t.coronaPromo.height},onClick:e.onPromoClick})):null,a?i.createElement("div",{className:S("city-info")},i.createElement(v.a,{city:a,data:t})):null,i.createElement(y,{data:t,onItemClick:this._onItemClick}),t.isolationFooter?i.createElement("div",{className:S("footer"),dangerouslySetInnerHTML:{__html:t.isolationFooter}}):null)))},t}(i.PureComponent);t.a=k(M)},1942:function(e,t,n){},224:function(e,t,n){"use strict";var a=n(6),o=(n(225),n(4)),r=n(54),i=n(9),s=n(7),l=n(128),c=Object(s.a)("tabs-select-view"),u=function(e){function t(t){var n;(n=e.call(this,t)||this)._alignPad=function(){var e,t,a=n.props,o=a.tab;if(o){var r=null!==(e=null===(t=n._tabRefs[o])||void 0===t?void 0:t.current)&&void 0!==e?e:null;if(r){var i=r.scrollWidth,s=r.offsetLeft;n.setState({padWidth:i,padTranslateX:s})}if(!a.disableAnimation){var l,c,u=a.tabs.findIndex(function(e){return e.key===o});null===(l=(c=n)._setScrollPosition)||void 0===l||l.call(c,u)}}},n._renderTabTitle=function(e){return o.createElement(i.a,{key:e.key,name:"tab",nodeState:{tab:e.key},logClick:!0},o.createElement("div",{className:c("title",{name:e.key,selected:n.props.tab===e.key}),onClick:function(){return n.props.onTabChange(e)}},o.createElement("div",{className:c("label"),ref:n._tabRefs[e.key]},e.title),e.count?o.createElement("div",{className:c("counter")},e.count):null))},n._renderPad=function(){return o.createElement("div",{className:c("pad",{inited:void 0!==n.state.padTranslateX}),style:{width:n.state.padWidth,transform:n.state.padTranslateX?"translateX("+n.state.padTranslateX+"px)":void 0}})};var a=t.tabs.map(function(e){return e.key});return n.state={},n._tabRefs=a.reduce(function(e,t){return e[t]=o.createRef(),e},{}),n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){setTimeout(this._alignPad,0)},n.componentDidUpdate=function(e){e.tab!==this.props.tab&&this._alignPad()},n.render=function(){var e,t=this,n=this.props;if(0===n.tabs.length)return null;var a=n.tabs.findIndex(function(e){return e.key===n.tab});return o.createElement(i.a,{name:"tabs"},o.createElement("div",{className:c({wide:n.wide})},o.createElement("div",{className:c("titles")},o.createElement(r.a,{clickStep:2,itemsGap:0,buttonSize:"m",padding:4,renderInScrollContainer:this._renderPad,scrollContainerStyle:{position:"relative"},setPositionRef:function(e){return t._setScrollPosition=e},initialPosition:n.disableAnimation&&-1!==a?a:void 0,disableOldBrowsersWorkaround:!0},n.tabs.map(this._renderTabTitle)),null===(e=n.children)||void 0===e?void 0:e.call(n,{refs:this._tabRefs}),o.createElement(l.a,{listener:this._alignPad}))))},t}(o.Component);t.a=u},225:function(e,t,n){},264:function(e,t,n){"use strict";var a=n(10),o=n(76),r=n(40),i=n(48),s={getIsolationColor:function(e,t){return t.colors[e.toFixed(1)]||t.colors[e]},getDiff:function(e,t){var n=Math.round(10*(e-t))/10;return(n>0?"+":"")+Object(o.b)(n,"ru",{min:1,max:1})},getCovidStatData:function(e,t){return e.items.filter(function(e){return t?!e.ru:e.ru}).reduce(function(e,t){return e.cases+=t.cases,e.cured+=t.cured,e.deaths+=t.deaths,e},{cases:0,cured:0,deaths:0,histogram:t?void 0:e.histogram,ruCountry:!t})},getRussiaItem:function(e){return Object(a.a)(Object(a.a)({},s.getCovidStatData(e,!1)),{},{name:e.russiaName||"Россия",ruCountry:!0,histogram:e.histogram,coordinates:e.russiaCoordinates||[99.505405,61.698653],id:225})},getDateByTimestamp:function(e,t,n){var a=60*i.i(n).getTimezoneOffset();return Object(r.b)(new Date(1e3*(e+a)),t)},getDiffHistogram:function(e){if(e.histogram&&!(e.histogram.length<3)){var t=e.ru||e.ruCountry?e.histogram:e.histogram.slice(0,e.histogram.length-1);if(1!==t.length)return t}}};t.a=s},30:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={screenshotDialog:99999,ruler:8030,editing:8030,hover:8020,active:8e3,search:{active:8e3,subtitle:7500,title:7e3,base:6500,dot:6e3},dialog:2e3,usermaps:{placemark:3e3,line:2e3,polygon:1e3},discovery:580,routes:550,routePins:{waypoint:8e3,masstransit:7900},masstransitStop:8001,moving:500,masstransitLineStop:510,home:451,work:450,default:400,tooltip:352,masstransitRegion:350,bookmarks:300,minimum:1}},34:function(e,t,n){"use strict";n.r(t);var a=n(87),o=n(6),r=(n(71),n(4)),i=n(5),s=n(7),l=n(31),c=n(30),u=n(62),d=300,m=Object(s.a)("map-placemark"),p=function(){},f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._container=document.createElement("div"),n._isDragged=!1,n._initCursor=function(){n._updateCursor(),n._marker.group().on("dragStart",function(){n._isDragged=!0,n._container.style.cursor="grabbing",n.props.map.container.style.cursor="grabbing"}).on("dragEnd",function(){n._isDragged=!1,n._updateCursor(),n.props.map.container.style.cursor="default"})},n._updateCursor=function(){n._container.style.cursor=n.props.onClick||n.props.onMouseEnter||n.props.draggable?"pointer":"default"},n._addMapEventHandlers=function(e){var t={dragStart:e.onDragStart,dragMove:e.onDragMove,dragEnd:e.onDragEnd};Object.keys(t).forEach(function(e){t[e]&&n._mapEventHandlers.on(e,function(){t[e]({coordinates:n._marker.coordinates})})})},n._onClick=function(e){e.stopPropagation();var t=n.props,a=t.onClick||p,o=t.onFastClick||p,r=t.onDoubleClick||p;n._clickTimer?(r(),window.clearTimeout(n._clickTimer),n._clickTimer=void 0):(o(),n._clickTimer=window.setTimeout(function(){a(),n._clickTimer=void 0},d))},n._container.className=m(),n._marker=t.map.createMarker({coordinates:t.coordinates,element:n._container,options:{draggable:t.draggable,zIndex:t.zIndex||c.a.default,disableRoundCoordinates:t.disableRoundCoordinates,blockEvents:t.blockEvents}}),n._mapEventHandlers=n._marker.group(),n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;this._initCursor(),this._addMapEventHandlers(e),e.map.addMarker(this._dataSourceId,this._marker)},n.componentWillUnmount=function(){this.props.map.destroyed||(this._mapEventHandlers.offAll(),this.props.map.removeMarker(this._dataSourceId,this._marker),this._marker.destroy(),this._isDragged&&(this.props.map.container.style.cursor="default")),window.clearTimeout(this._clickTimer)},n.componentDidUpdate=function(e){var t=e.dataSourceId?e.dataSourceId:u.d.DEFAULT_MARKERS;t!==this._dataSourceId&&(this.props.map.removeMarker(t,this._marker),this.props.map.addMarker(this._dataSourceId,this._marker));var n=this.props;n.coordinates!==e.coordinates&&this._marker.setCoordinates(n.coordinates),e.draggable!==n.draggable&&this._marker.toggleDrag(n.draggable||!1),e.zIndex!==n.zIndex&&this._marker.setZIndex(n.zIndex||c.a.default),e.disableRoundCoordinates!==n.disableRoundCoordinates&&this._marker.toggleRoundCoordinates(n.disableRoundCoordinates||!1),n.onDragStart===e.onDragStart&&n.onDragMove===e.onDragMove&&n.onDragEnd===e.onDragEnd||(this._mapEventHandlers.offAll(),this._addMapEventHandlers(n)),e.draggable===n.draggable&&e.onClick===n.onClick||this._updateCursor()},n.render=function(){var e=this.props,t=r.createElement("div",{className:m("wrapper",{"non-interactive":e.nonInteractive}),onClick:this._onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseMove:e.onMouseMove},e.children);return i.createPortal(t,this._container)},Object(a.a)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||u.d.DEFAULT_MARKERS}}]),t}(r.PureComponent);t.default=Object(l.b)({shouldWait:!0})(f)},433:function(e,t,n){"use strict";var a=n(6),o=(n(485),n(4)),r=n(2963),i=n(7),s=n(112),l=n(196),c=100,u=Object(i.a)("slider"),d=function(e){function t(t){var n;return(n=e.call(this,t)||this)._track=o.createRef(),n._label=o.createRef(),n._onResize=function(){n._track.current&&n._recalculateState()},n._recalculateState=function(){var e=n.state,t=e.x,a=e.align,o=e.pressed,r=m(n.props.value,n.props)*n._getTrackRect().width,i=n._getLabelAlign(r);o||r===t&&i===a||n.setState({x:r,align:i})},n._addListeners=function(){Object(s.b)().has.touch?(window.addEventListener("touchend",n._onTouchEnd),window.addEventListener("touchcancel",n._onTouchEnd),window.addEventListener("touchmove",n._onTouchMove,{passive:!1})):(window.addEventListener("mouseup",n._onMouseUp),window.addEventListener("mousemove",n._onMouseMove))},n._removeListeners=function(){Object(s.b)().has.touch?(window.removeEventListener("touchend",n._onTouchEnd),window.removeEventListener("touchcancel",n._onTouchEnd),window.removeEventListener("touchmove",n._onTouchMove)):(window.removeEventListener("mouseup",n._onMouseUp),window.removeEventListener("mousemove",n._onMouseMove))},n._getTrackRect=function(){return n._track.current.getBoundingClientRect()},n._getLabelAlign=function(e){if(!n._label.current)return n.state.align;var t=n._getTrackRect(),a=(n._label.current.getBoundingClientRect().width-8)/2;return e<a?"left":t.width-e<a?"right":"center"},n._changeValueByPageX=function(e,t){var a=Boolean(t&&t.isMove),o=n._getTrackRect(),r=(e-o.left)/o.width,i=p(r=Math.max(0,Math.min(r,1)),n.props);return a||(r=m(i,n.props)),r*=o.width,n.setState({x:r,pressed:a,align:n._getLabelAlign(r)}),n.props.value!==i&&n.props.onChange(i),i},n._onMoveStart=function(){n._restoreUserSelect=Object(s.c)(),n._addListeners(),n.setState({pressed:!0});var e=n._getTrackRect().width,t=p(n.state.x/e,n.props);n.props.onMoveStart(t)},n._onMouseUp=function(e){n._onMoveEnd(e.pageX)},n._onTouchEnd=function(e){var t=e.touches[0]||e.changedTouches[0];n._onMoveEnd(t.pageX)},n._onMoveEnd=function(e){var t,a;null===(t=(a=n)._restoreUserSelect)||void 0===t||t.call(a),n._removeListeners(),n.props.onMoveEnd(n._changeValueByPageX(e))},n._onMouseMove=function(e){n._onMove(e.pageX)},n._onTouchMove=function(e){n._onMove(e.touches[0].pageX),e.preventDefault()},n._onMove=function(e){n._changeValueByPageX(e,{isMove:!0})},n._onTrackClick=function(e){n.props.onTrackClick(n._changeValueByPageX(e.pageX))},n._renderLabel=function(){var e=n.props.label;if(!e)return null;var t=n.state.align;return o.createElement("div",{className:u("label",{align:t}),ref:n._label},e)},n._renderHandler=function(){var e=n.state.x;return null===e?null:o.createElement("div",{className:u("handler"),style:{transform:"translateX("+e+"px)"},onMouseDown:n._onMoveStart,onTouchStart:n._onMoveStart},n._renderLabel())},n.state={x:null,pressed:!1,align:"left"},n._onResizeDebounced=Object(r.a)(n._onResize,c),n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._recalculateState()},n.componentDidUpdate=function(e){var t=this.props;t.value===e.value&&t.step===e.step&&t.min===e.min&&t.max===e.max||this._recalculateState()},n.componentWillUnmount=function(){var e;null===(e=this._restoreUserSelect)||void 0===e||e.call(this),this._removeListeners(),this._onResizeDebounced.cancel()},n.render=function(){var e=this.props,t=this.state;return o.createElement("div",{className:u({label:Boolean(this.props.label),disabled:e.disabled,tiny:e.tiny,pressed:t.pressed})},o.createElement("div",{className:u("track",{highlight:e.showProgress}),ref:this._track,onClick:this._onTrackClick},e.showProgress?o.createElement("div",{className:u("progress"),style:{width:t.x+"px"}}):null),this._renderHandler(),o.createElement(l.a,{onResize:this._onResizeDebounced}))},t}(o.Component);function m(e,t){var n=t.step;return n&&(e=Math.round(e/n)*n),(e-t.min)/(t.max-t.min)}function p(e,t){var n=e*(t.max-t.min)+t.min,a=t.step;return a?Math.round(n/a)*a:n}t.a=d},45:function(e,t,n){"use strict";var a=n(6),o=(n(73),n(4)),r=n(7),i=n(85),s=n(61),l=1,c=Object(r.a)("sticky-wrapper"),u=function(e){function t(t){var n;return(n=e.call(this,t)||this)._containerRef=o.createRef(),n._isDisabled=function(e){return void 0===e&&(e=n.props),e.disabled||!e.scrollId},n._registerContainer=function(){var e,t=n.props,a=null!==(e=t.order)&&void 0!==e?e:l;if(n._containerRef.current){if(!t.scrollId)return;t.registerStickyElement(a,n._containerRef,n._onPositionUpdate),t.updateStickyElement(a,n._containerRef.current.offsetHeight),n._unregisterContainer=function(){t.unregisterStickyElement(a)}}},n._onIntersectionChange=function(e){n.setState({fixed:!e})},n._onPositionUpdate=function(e){var t,a;n.setState({position:e}),null===(t=(a=n.props).onOffsetChange)||void 0===t||t.call(a,e)},n._onIntersectionParentBoundaries=function(e){n.setState({reachedParentBoundaries:!e})},n.state={fixed:!1,reachedParentBoundaries:!1,position:0},n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._isDisabled()||this._registerContainer()},n.componentDidUpdate=function(e,t){var n=this.props,a=this.state,o=n.children!==e.children;(n.children&&o||this._isDisabled(e)&&!this._isDisabled())&&this._registerContainer(),n.onFixedChange&&t.fixed!==a.fixed&&n.onFixedChange(a.fixed)},n.componentWillUnmount=function(){var e;null===(e=this._unregisterContainer)||void 0===e||e.call(this)},n.render=function(){var e,t=this.props,n=this.state;return t.children?this._isDisabled()?"always"===this.props.border?o.createElement("div",{className:c("pseudo-sticky")},t.children):t.children:o.createElement(o.Fragment,null,"top"===t.position?o.createElement(s.a,{threshold:0,style:n.position?{transform:"translateY(-"+n.position+"px)"}:void 0,className:c("observer-target"),onChange:this._onIntersectionChange},null):null,o.createElement("div",{className:c({position:t.position,fixed:n.fixed,header:t.header,border:null!==(e=t.border)&&void 0!==e?e:"auto",wide:t.wide,"reached-boundaries":n.reachedParentBoundaries,empty:!t.children}),style:{top:this.state.position,zIndex:t.zIndex},ref:this._containerRef},o.createElement(s.a,{threshold:0,style:n.position?{transform:"translateY(-"+n.position+"px)"}:void 0,className:c("observer-target",{absolute:!0}),onChange:this._onIntersectionParentBoundaries},null),t.children)):null},t}(o.Component);t.a=Object(i.b)(u)},485:function(e,t,n){},487:function(e,t,n){"use strict";var a=n(6),o=n(4),r=n(101),i=n(19),s=n(8),l=n(31),c=n(62),u=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._loadFile=function(){var e=t.props,n=e.config.staticHost+"static/v18/map-customizations/"+e.name+".json";i.a.cancel(t._loaderAction),t._loaderAction=i.a.create(Object(r.a)({url:n,parser:"json"}),{success:t._setMapCustomization})},t._setMapCustomization=function(e){void 0===e&&(e={});var n=t.props;n.dataSourceIds.forEach(function(t){var a=n.map.getDataSource(t);a&&"tile"===a.type&&n.map.updateTileDataSource(t,Object(c.f)(a,e))})},t}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._loadFile()},n.componentDidUpdate=function(e){this.props.name!==e.name&&this._loadFile()},n.componentWillUnmount=function(){this._setMapCustomization(),i.a.cancel(this._loaderAction)},n.render=function(){return null},t}(o.PureComponent);t.a=Object(s.b)(Object(l.b)({shouldWait:!0})(u))},66:function(e,t){},71:function(e,t,n){},73:function(e,t,n){},907:function(e,t,n){e.exports=n.p+"_/0d15cf53070828776cffc43666d34ff9.svg"}}]);