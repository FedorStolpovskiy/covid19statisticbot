(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["preview","dialog"],{103:function(e,t,n){"use strict";var r=n(6),a=n(4),o=n(8),i=n(68),s=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._getStyle=function(){var e=t.props;return{objectFit:e.backgroundSize||"cover",backgroundColor:"contain"===e.backgroundSize?"#fff":void 0}},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props;return a.createElement(i.a,{immediately:e.renderImmediately},a.createElement("img",{width:"100%",height:"100%",src:e.src,alt:e.alt,style:this._getStyle(),loading:e.renderImmediately?void 0:"lazy"}))},t}(a.PureComponent);t.a=Object(o.b)(s)},109:function(e,t,n){"use strict";var r=n(37),a=n(10),o=n(2978),i=n(301),s=n(2995),c=n(29),l=n(25),u="search_",d="",p={fetch:function(e,t){return Object(c.a)("search",{query:f(e,t)},t).then(function(e){return d=e.requestId,e})},batchFetch:function(e,t){var n={requestQueries:e.map(function(e){return f(e,t)})};return Object(c.a)("search/batch",{body:n},t).then(function(e){var t,n=null===(t=e.find(function(e){return Boolean(e)}))||void 0===t?void 0:t.requestId;return n&&(d=n),e})},fetchSearchResult:function(e,t,n){if(void 0===n&&(n={}),"poi"===e.from){if(e.uri)return p.loadPoiByUri(e.uri,t,n).then(function(t){return Object(a.a)(Object(a.a)({},t),{},{items:t.items.map(function(t,n){return Object(a.a)(Object(a.a)({},t),{},{hotspotProperties:e.hotspotProperties,displayCoordinates:e.coordinates&&0===n?e.coordinates:t.displayCoordinates})})})});if(e.coordinates)return p.loadPoiByCoordinates(e.coordinates,t,n).then(function(t){if(l.D(e.hotspotProperties)){var n=t.items[0],r={title:"Парковка",description:n.address,hotspotProperties:e.hotspotProperties,id:n.id,type:n.type,kind:n.kind,requestId:n.requestId,analyticsId:n.analyticsId,address:n.address,coordinates:n.coordinates,displayCoordinates:n.displayCoordinates,encodedCoordinates:n.encodedCoordinates,stops:n.stops,panorama:n.panorama,photos:n.photos,uri:n.uri};t.items=[r]}return t})}if("whatshere"===e.from)return p.loadWhatshere(e,t);var r=Object(a.a)(Object(a.a)({},e),{},{count:1,searchType:"TEXT"});return r.uri&&(r.mode="uri"),p.fetch(r,t)},prepareChainSearchRequest:function(e,t){return p.fetch({count:1,kind:"locality",text:Object(o.a)(e.center,{reverse:!0}),origin:"chain-city"},t).then(function(t){var n={searchType:"TEXT",displayText:e.chain.name,text:"chain_id:("+e.chain.id+")",origin:e.origin||"chain"},r=t.bounds;if(r){var a=Object(i.a)(r);n.center=a.center,n.span=a.span}return n})},loadPoiByCoordinates:function(e,t,n){return void 0===n&&(n={}),p.fetch({text:Object(o.a)(e,{reverse:!0}),count:1,origin:n.origin||"poi",clientId:n.clientId,snippets:m(t)},t)},loadPoiByUri:function(e,t,n){return void 0===n&&(n={}),p.fetch({mode:"uri",uri:e,count:1,origin:n.origin||"poi",clientId:n.clientId,snippets:m(t)},t)},loadWhatshere:function(e,t){var n=e.origin,a=Object(r.a)(e,["origin"]);return p.fetch({pin:!0,text:Object(o.a)(a.coordinates,{reverse:!0}),zoom:a.zoom,span:[.001,.001],count:1,origin:n||"poi",addBuildingGeometry:e.addGeometry},t).then(function(e){var t=e.items[0];return t?("poi"===n&&(t.displayCoordinates=t.coordinates),e):null}).catch(function(){return null})}};function m(e){return e.search.snippets.filter(function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e})}function f(e,t){var n=e.clientId||"maps",r=e.origin?n+"-"+e.origin:n,i={text:e.text,lang:t.locale,yandex_gid:t.userRegion.id,client_id:e.clientId,origin:r,results:e.count,ctx:e.context,mode:e.mode,lr:e.lr,uri:e.uri,business_oid:Array.isArray(e.id)?e.id.join(","):e.id,z:e.zoom,sort:e.sort,business_filter:e.filters,autoscale:e.autoscale,distinguish_layers:e.distinguishLayers,correct_misspell:e.correctMisspell,geocoder_kind:e.kind,skip:e.skip,rspn:e.restrictSpan,rearr:e.rearr,groupchains_advert:e.groupchains_advert,relev_ranking_formula:e.relev_ranking_formula,maxadv:e.maxadv,eventsBranch:t.query.eventsBranch};return e.addBuildingGeometry&&(i.search_geometry="2"),e.sortOrigin&&(i.sort_origin=e.sortOrigin.join()),e.center&&(i.ll=e.center.join()),e.span&&(i.spn=e.span.join()),e.bbox&&(i.bbox=e.bbox.join("~")),e.snippets?i.snippets=e.snippets:i.snippets=t.search.snippets,t.experiments.ui.groupSameCompanies&&(i.snippets=i.snippets.concat("collapsed_orgs/1.x")),t.experiments.ui.geosearchPinPriority&&(i.snippets=i.snippets.concat("pin_priority/1.x")),t.experiments.ui.geosearchAdditionalPins&&(i.snippets=i.snippets.concat("pin_info/1.x")),i.snippets=i.snippets.join(),e.direct&&(i=Object(a.a)(Object(a.a)({},i),t.advert.direct.params)),e.pin&&(i.geocoder_pin=1),e.type&&(i.type=e.type.join()),e.routeCoordinates&&e.bounds&&e.routeCoordinates.some(function(t){return Object(s.a)(e.bounds,t)})&&(i.business_rll=e.routeCoordinates.map(function(e){return Object(o.a)(e,{fractionDigits:5})}).join("~")),e.clientUsecase&&(i.client_usecase=e.clientUsecase),e.suggestReqid&&"form"===e.origin&&(i.suggest_reqid=e.suggestReqid),e.serpId&&(i.serpid=e.serpId),(e.parentReqId||d||t.searchPreloadedResults)&&(i.parent_reqid=e.parentReqId||d||t.searchPreloadedResults.requestId),e.geoWhere&&(i.geowhere=[].concat(e.geoWhere).reverse().join()),e.businessMode&&(i.business_mode=e.businessMode),"boolean"==typeof e.businessShowClosed&&(i.business_show_closed=e.businessShowClosed?1:0),Object(a.a)(Object(a.a)(Object(a.a)({},i),e.rawParams),function(e){var t=Object(a.a)({},e.experiments.geoSearchParams||{});e.experiments.ui.centralBankCollaboration&&(t.search_experimental_business_show_exp_features="cbrf");var n=e.experiments.boxes;n&&(t["test-buckets"]=n);return Object.keys(e.query).forEach(function(n){n.startsWith(u)&&(t[n]=e.query[n])}),t}(t))}t.a=p},116:function(e,t,n){"use strict";n(149);var r=n(4),a=n(7),o=n(9),i=n(8),s=n(76),c=Object(a.a)("business-rating-badge-view");t.a=Object(i.b)(function(e){var t=Math.round(2*e.ratingValue),n=Math.floor(t/2),a=!1;2*n!==t&&(a=!0);var i=e.size||"m";return r.createElement(o.a,{name:"business_rating"},r.createElement("span",{className:c({size:i})},r.createElement("div",{className:c("stars")},new Array(5).fill(null).map(function(e,t){return r.createElement("span",{className:c("star",{half:a&&t===n,empty:t>=(a?n+1:n),size:i}),key:t})})),e.onlyStars?null:r.createElement("span",{className:c("rating")},r.createElement("span",{className:c("rating-text",{size:i})},s.b(e.ratingValue,e.config.lang,{min:1,max:1})))))})},1215:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n(4),o=n(8),i=n(162),s=n(9),c=n(46),l=n(25),u=n(16),d=n(998),p={top:{main:-16,side:0},bottom:{main:20,side:0}},m=300,f=o.b,v=function(e){function t(t){var n;return(n=e.call(this,t)||this)._showTimerId=0,n._renderPreview=function(e){var t="search"===n.props.from?"pin":"poi";return a.createElement(s.a,{name:"org_"+t+"_preview",logClick:!0,actionSubtreeState:{uri:c.g(e),permalink:e.id,type:l.j(e),gml_id:e.analyticsId,logId:e.logId,reqid:e.requestId}},a.createElement(d.a,{result:e,onClose:n.props.onMouseLeave}))},n.state={},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._showTimerId=window.setTimeout(function(){m=0,e.setState({show:!0})},300+m)},n.componentWillUnmount=function(){window.clearTimeout(this._showTimerId)},n.render=function(){var e=this.props,t=this.state,n=e.result;return n&&t.show&&!Object(u.m)(e.config)?a.createElement(i.a,{coordinates:e.poiCoordinates||n.coordinates,position:["top","bottom"],positionOffsets:e.offsets||p,showArrow:!1,isShown:!0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},this._renderPreview(n)):null},t}(a.Component);t.default=f(v)},1216:function(e,t,n){},122:function(e,t,n){"use strict";var r=n(4);function a(e,t){var n=t[0],r=t[1];return e.reduce(function(e,t){return"string"!=typeof t?e.push(t):t.split(n).forEach(function(t,n){n>0&&e.push(r),e.push(t)}),e},[])}t.a=function(e,t){return Object.entries(t).reduce(a,[e]).filter(function(e){return e}).map(function(e,t){return r.createElement("span",{key:t},e)})}},1249:function(e,t){},1326:function(e,t,n){"use strict";n.r(t);var r=n(6),a=(n(2450),n(4)),o=n(7),i=n(8),s=n(162),c=(n(2452),n(33)),l=n(12),u=Object(o.a)("masstransit-stop-preview-transports-view"),d=176,p=70,m=4,f=4,v=10,h=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.transports[0].type,n=g(e.transports);n=e.transports.length!==n.length?g(n,28):n;var r=c.e({type:"masstransit",name:t,size:"normal"},e.config);return a.createElement("div",{className:u({type:t})},r?a.createElement(l.a,{className:u("icon"),url:r}):null,n.map(function(t,r){var o=t.name;return a.createElement("div",{key:r,className:u("transport",{fully:e.transports.length===n.length&&r===n.length-1})},o)}),e.transports.length!==n.length?a.createElement("div",{className:u("remaining-transport")},"+",e.transports.length-n.length):null)},t}(a.Component);function g(e,t){return void 0===t&&(t=0),e.filter(function(e){return(t+=function(e){var t=e.name.length*v+2*m;return t>p?p:t}(e)+f)<d})}var _=Object(i.b)(h),b=n(9),E=n(78),y=Object(o.a)("masstransit-stop-preview-view"),w={main:4,side:4},C=["left-top","left-bottom","right-top","right-bottom","left","right","top","bottom"],S=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderInfo=function(e){var t=e.transports.reduce(function(e,t){return e[t.type]=[].concat(e[t.type]||[],[t]),e},{});return a.createElement("div",{className:y()},a.createElement("div",{className:y("title")},e.name),a.createElement("div",{className:y("transports-by-types")},Object.entries(t).sort(function(e,t){return e[0]<t[0]?-1:1}).map(function(e,t){var n=e[1];return a.createElement(_,{key:t,transports:Object(E.p)(n)})})))},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.stop;return 0===t.transports.length?null:a.createElement(b.a,{name:"masstransit_preview"},a.createElement(s.a,{coordinates:e.coordinates||t.coordinates,position:C,offset:w,showArrow:!1,isShown:!0},this._renderInfo(t)))},t}(a.Component);t.default=Object(i.b)(S)},1327:function(e,t,n){"use strict";n.r(t);n(1216);var r=n(4),a=n(8),o=n(162),i=n(6),s=n(7),c=n(76),l=(n(60),n(9)),u=Object(s.a)("realty-preview-view"),d=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderHeaderContent=function(){var e=t.props.building;return r.createElement("div",{className:u("header")},r.createElement("div",{className:u("title")},e.title),r.createElement("div",{className:u("commissioning")},e.commissioning))},t._renderOffer=function(e){var n=t.props,a=n.url?"a":"div";return r.createElement("div",{className:u("offer"),key:e.offername},r.createElement("div",{className:u("offer-name")},e.offername),r.createElement(l.a,{name:"price",useParentState:!0,nodeState:{offer:e.offername},logClick:!0},r.createElement(a,{className:u("offer-price",{link:Boolean(n.url)}),href:n.url,target:"_blank"},"от ",Object(c.a)(e.price,n.config.lang))))},t}return Object(i.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.building;return r.createElement(l.a,{name:"realty_preview",nodeState:{businessId:e.businessId,buildingSection:t.buildingSection}},r.createElement("div",{className:u()},this._renderHeaderContent(),r.createElement("div",{className:u("free-items")},t.freeItems),t.offers?r.createElement("div",{className:u("offers")},t.offers.map(this._renderOffer)):null))},t}(r.PureComponent),p=Object(a.b)(d),m={main:16,side:0};t.default=Object(a.b)(function(e){return r.createElement(o.a,{coordinates:e.coordinates,position:["top","bottom"],offset:m,showArrow:!1,isShown:!0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},r.createElement(p,e))})},135:function(e,t,n){},149:function(e,t,n){},154:function(e,t,n){"use strict";var r=n(6),a=n(4),o=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._fetchUrl=function(){var e=t.props.url;if(e){var n=window.document.createElement("img");n.setAttribute("src",e),window.document.body.appendChild(n),n.addEventListener("load",r),n.addEventListener("error",r)}function r(){window.document.body.removeChild(n),n.removeEventListener("load",r),n.removeEventListener("error",r)}},t}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this._fetchUrl()},n.componentDidUpdate=function(e){e.url!==this.props.url&&this._fetchUrl()},n.render=function(){return null},t}(a.PureComponent);t.a=o},162:function(e,t,n){"use strict";var r=n(13),a=n(37),o=n(6),i=n(4),s=n(34),c=n(64),l=n(23),u=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._ref=i.createRef(),t._onMapUpdate=function(){t.forceUpdate()},t}return Object(o.a)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.coordinates,o=Object(a.a)(t,["coordinates"]);return i.createElement(i.Fragment,null,i.createElement(s.default,{coordinates:n,nonInteractive:!0},i.createElement("div",{ref:this._ref}),i.createElement(l.a,Object(r.a)({type:"balloon"},o,{getTarget:function(){return e._ref.current}}),o.children)),i.createElement(c.default,{onUpdate:o.isShown?this._onMapUpdate:void 0}))},t}(i.PureComponent);t.a=u},171:function(e,t,n){"use strict";var r=n(2984),a=n(92),o=n(48),i=n(40),s=n(24);var c=n(86),l=n(55);function u(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},r=n.locale,a=r&&r.options&&r.options.firstWeekContainsDate,o=null==a?1:Object(l.a)(a),i=null==n.firstWeekContainsDate?o:Object(l.a)(n.firstWeekContainsDate),u=function(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(s.a)(e,t),r=n.getFullYear(),a=t||{},o=a.locale,i=o&&o.options&&o.options.firstWeekContainsDate,u=null==i?1:Object(l.a)(i),d=null==a.firstWeekContainsDate?u:Object(l.a)(a.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setFullYear(r+1,0,d),p.setHours(0,0,0,0);var m=Object(c.a)(p,t),f=new Date(0);f.setFullYear(r,0,d),f.setHours(0,0,0,0);var v=Object(c.a)(f,t);return n.getTime()>=m.getTime()?r+1:n.getTime()>=v.getTime()?r:r-1}(e,t),d=new Date(0);return d.setFullYear(u,0,i),d.setHours(0,0,0,0),Object(c.a)(d,t)}var d=6048e5;function p(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(s.a)(e,t),r=Object(c.a)(n,t).getTime()-u(n,t).getTime();return Math.round(r/d)+1}var m=n(257);n.d(t,"a",function(){return g}),n.d(t,"b",function(){return v}),n.d(t,"c",function(){return _});var f=["break","opening_soon","closing_soon"];function v(e,t,n){var r;void 0===n&&(n={});var a,o=e.status,i=e.currentWorkingStatus,s=n.short?null==i?void 0:i.shortText:null==i?void 0:i.text;return{text:n.showMoved&&(null===(r=e.businessProperties)||void 0===r?void 0:r.moved_to)?"Организация переехала":"open"===o?null!=s?s:"График работы не указан":(a=o,{"possible-closed":"Возможно, больше не работает","temporary-closed":"Временно не работает","permanent-closed":"Больше не работает"}[a]),state:{closed:"open"!==o||Boolean(i&&!i.isOpenNow),"changing-soon":!(!i||!i.tag)&&i.tag.some(function(e){return f.includes(e)}),"no-data":!s}}}function h(e,t){if(!e)return{};var n=[];e.unusual_hours&&(n=n.concat(e.unusual_hours)),e.valid_schedule&&(n=n.concat(e.valid_schedule));var r=o.i(o.h(t));return n.reduce(function(e,n){var a=function(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");return Object(s.a)(e,t).getDay()}(n),o=p(n,{weekStartsOn:1})===p(r,{weekStartsOn:1});if(!e[a]&&o){var c=Object(s.a)(n);e[a]=Object(i.b)(c,t)}return e},{})}function g(e,t){if(e.workingTime){var n=o.i(o.h(t)).getDay(),i=h(e.businessProperties,t);return[].concat(e.workingTime.slice(1),[e.workingTime[0]]).map(function(e,s){var c,l=(s+1)%7,u=Object(r.a)(a.a[l].slice(0,2));return e?1===e.length&&0===o.c(e[0].to,e[0].from)?(c="Круглосуточно",u+=" 00:00-23:59"):(c=e.map(function(e){var t=e.from,n=e.to;return o.n(t)+" – "+o.n(n)}),u+=" "+e.map(function(e){var t=e.from,n=e.to;return o.n(t)+"-"+o.n(n)}).join(",")):(c="Выходной",u=""),{dayName:Object(a.c)(t,a.a[l]),text:c,isWeekend:!e,isToday:n===l,changedDate:i[l],meta:u}})}}function _(e,t){var n=e.businessProperties;if(n){var r=o.i(o.h(t)),a=(n.unusual_hours||[]).some(function(e){return Object(m.a)(e,r)}),i=(n.valid_schedule||[]).some(function(e){return Object(m.a)(e,r)});if(a||i)return i?"Сегодня организация работает по праздничному графику":"Сегодня график работы мог поменяться из-за праздника"}}},178:function(e,t,n){"use strict";n(228);var r=n(4),a=n(7),o=n(9),i=Object(a.a)("business-rating-amount-view");t.a=function(e){return r.createElement(o.a,{name:"ratings_amount"},r.createElement("span",{className:i({summary:e.isSummary})},(function(params){return (params.count?params.count+" "+(params.count % 10 === 1 && params.count % 100 !== 11 ? "оценка" :(params.count % 10 > 1 && params.count % 10 < 5 && (params.count % 100 < 10 || params.count % 100 > 20) ? "оценки" : "оценок")):"Ещё нет оценок");})({count:e.ratingCount})))}},193:function(e,t,n){"use strict";var r=n(381),a=n(278),o=n(156),i=n(50),s=a.a?a.a.isConcatSpreadable:void 0;var c=function(e){return Object(i.a)(e)||Object(o.a)(e)||!!(s&&e&&e[s])};t.a=function e(t,n,a,o,i){var s=-1,l=t.length;for(a||(a=c),i||(i=[]);++s<l;){var u=t[s];n>0&&a(u)?n>1?e(u,n-1,a,o,i):Object(r.a)(i,u):o||(i[i.length]=u)}return i}},203:function(e,t,n){"use strict";var r=n(6),a=(n(332),n(4)),o=n(9),i=n(7),s=n(8),c=n(23),l=n(25),u=n(16),d=Object(i.a)("business-verified-badge"),p=500,m={link:"Подключить для своей организации",text:"Поднимает организацию в списке по профильным запросам.",title:"Приоритетное размещение"},f={link:"Подробнее",text:"Этот знак получают организации, владелец которых подтвержден и поддерживает данные на карточке в актуальном состоянии.",title:"Владелец следит за актуальностью информации"},v=function(e){function t(t){var n;return(n=e.call(this,t)||this)._icon=null,n._showTimeout=null,n._showPopup=function(e){e&&e.immediate?n.setState({isPopupShown:!0}):n._showTimeout||(n._showTimeout=window.setTimeout(function(){return n.setState({isPopupShown:!0})},p))},n._hidePopup=function(){n._clearTimeout(),n.setState({isPopupShown:!1})},n._clearTimeout=function(){n._showTimeout&&(window.clearTimeout(n._showTimeout),n._showTimeout=null)},n._onClick=function(e){e.stopPropagation()},n._renderPopup=function(){var e=n.props,t=n.state,r=l.A(e.result),i=r?m:f,s=r?e.config.advertLandingUrl?e.config.advertLandingUrl+"?utm_source=webmaps&utm_medium=tip&utm_campaign=webmaps_gptip":null:"http://yandex.ru/support/sprav/manage/verified-owner.html";return a.createElement(c.a,{isShown:t.isPopupShown,position:"right-bottom",restrictPosition:!0,onScroll:"reposition",showArrow:!1,type:"map-hint",offset:{main:-3,side:0},getTarget:function(){return n._icon},onClose:n._hidePopup},a.createElement(o.a,{name:r?"priority_advert_popup":"verified_popup",logClick:!0},a.createElement("div",{className:d("order",{prioritized:r}),onMouseEnter:function(){return n._showPopup({immediate:!0})},onMouseLeave:n._hidePopup,onClick:n._onClick},a.createElement("div",{className:d("order-img")}),a.createElement("div",{className:d("order-title")},i.title),a.createElement("div",{className:d("order-text")},i.text),s&&!Object(u.m)(e.config)?a.createElement(o.a,{name:"order_link",logClick:!0},a.createElement("a",{href:s,target:"_blank",className:d("order-link")},i.link)):null)))},n.state={isPopupShown:!1},n}Object(r.a)(t,e);var n=t.prototype;return n.componentWillUnmount=function(){this._clearTimeout()},n.render=function(){var e=this,t=this.props,n=l.A(t.result),r=l.M(t.result);return n||r?a.createElement(a.Fragment,null,a.createElement(o.a,{name:n?"priority_advert_badge":"verified_badge"},a.createElement("span",{ref:function(t){return e._icon=t},"aria-hidden":"true",className:d({prioritized:n}),onMouseEnter:t.config.uatraits.isMobile||t.hidePopup?void 0:function(){return e._showPopup()},onMouseLeave:this._hidePopup})),this._renderPopup()):null},t}(a.Component);t.a=Object(s.b)(v)},211:function(e,t,n){"use strict";var r,a=n(10),o=n(383),i=n(29),s=6e4,c={loadLayerRegions:function(e){return r||(r=Object(i.a)("masstransit/getLayerRegions",{},e).catch(function(){return[]}))},getStopInfo:function(e,t){return Object(i.a)("masstransit/getStopInfo",{query:{id:e.id,uri:e.uri,locale:t.locale,lang:t.lang,mode:"prognosis"}},t).then(function(e){if(!e)throw new Error("Stop no data");return e})},getStopTimetable:function(e,t){return Object(i.a)("masstransit/getStopTimetable",{query:{id:e.id,timestamp:e.timestamp,locale:t.locale,lang:t.lang}},t).then(function(e){if(!e)return null;var t=function(e){return{id:e.id,name:e.name,type:e.type,currentTime:e.currentTime,region:e.region,tzOffset:e.tzOffset,transports:Object(o.a)(e.transports.map(function(e){return Object(o.a)(e.threads.map(function(t){var n=[];return t.BriefSchedule&&t.BriefSchedule.Frequencies.length>0&&n.push.apply(n,t.BriefSchedule.Frequencies.map(function(n){var r;return Object(a.a)(Object(a.a)({},e),{},{threads:[Object(a.a)(Object(a.a)({},t),{},{BriefSchedule:{Frequencies:[n],Events:[],departureTime:null===(r=t.BriefSchedule)||void 0===r?void 0:r.departureTime}})]})})),t.BriefSchedule&&t.BriefSchedule.Events.length>0&&n.push.apply(n,t.BriefSchedule.Events.map(function(n){var r;return Object(a.a)(Object(a.a)({},e),{},{threads:[Object(a.a)(Object(a.a)({},t),{},{BriefSchedule:{Frequencies:[],Events:[n],departureTime:null===(r=t.BriefSchedule)||void 0===r?void 0:r.departureTime}})]})})),0===n.length&&n.push(Object(a.a)(Object(a.a)({},e),{},{threads:[Object(a.a)({},t)]})),n}))}))}}(e);return t.transports=t.transports.filter(function(e){return l(e,t.currentTime)>0}).sort(function(e,n){return l(e,t.currentTime)-l(n,t.currentTime)}),t})},getVehiclesInfo:function(e,t){return Object(i.a)("masstransit/getVehiclesInfoWithRegion",{query:Object(a.a)({locale:t.locale,lang:t.lang},e)},t)},getVehiclePredictionInfo:function(e,t){return Object(i.a)("masstransit/getVehiclePredictionInfo",{query:Object(a.a)({},e)},t)},getLine:function(e,t){return Object(i.a)("masstransit/getLine",{query:Object(a.a)({locale:t.locale,lang:t.lang},e)},t)},getDistance:function(e,t){return Object(i.a)("masstransit/distance",{query:{startPoint:e.coordinates.join(","),destinationPoints:e.stops.map(function(e){return e.coordinates.join(",")}),locale:t.locale}},t)}};function l(e,t){var n,r,a,o,i=e.threads[0];if((null==i?void 0:null===(n=i.BriefSchedule)||void 0===n?void 0:n.Events)&&(null===(r=i.BriefSchedule)||void 0===r?void 0:r.Events.length)>0){var c,l,u=(null===(c=i.BriefSchedule.Events[0].Estimated)||void 0===c?void 0:c.value)||(null===(l=i.BriefSchedule.Events[0].Scheduled)||void 0===l?void 0:l.value);if(u){var d=1e3*Number(u);return d-t<s?d-t:d}}if((null==i?void 0:null===(a=i.BriefSchedule)||void 0===a?void 0:a.Frequencies)&&(null==i?void 0:null===(o=i.BriefSchedule)||void 0===o?void 0:o.Frequencies.length)>0){var p=1e3*i.BriefSchedule.Frequencies[0].value,m=i.BriefSchedule.Frequencies[0].begin?1e3*Number(i.BriefSchedule.Frequencies[0].begin.value):void 0,f=i.BriefSchedule.Frequencies[0].end?1e3*Number(i.BriefSchedule.Frequencies[0].end.value):void 0;return f&&f<t?-1/0:!m||m<t?p:m}return-1/0}t.a=c},214:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(157),a=n(69),o=864e5;function i(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var i=Object(a.a)(e,n),s=Object(a.a)(t,n),c=i.getTime()-Object(r.a)(i),l=s.getTime()-Object(r.a)(s);return Math.round((c-l)/o)}},228:function(e,t,n){},236:function(e,t,n){"use strict";var r=n(6),a=(n(253),n(4)),o=n(7),i=n(44),s=n(9),c=n(38),l=n(8),u=(n(60),["allow-forms","allow-scripts","allow-same-origin","allow-modals","allow-popups","allow-popups-to-escape-sandbox"].join(" ")),d=Object(o.a)("iframe-dialog"),p=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onFrameLoad=function(){n.setState({isFrameLoading:!1})},n._onFrameError=function(){n.setState({isFrameLoading:!1,isFrameError:!0})},n._onClose=function(){n.props.onClose&&n.props.onClose()},n._renderTitle=function(){var e=n.props.text;return e?a.createElement("div",{className:d("title"),dangerouslySetInnerHTML:{__html:e}}):null},n.state={didMount:!1,isFrameLoading:!0,isFrameError:!1},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.setState({didMount:!0})},n.componentDidUpdate=function(e){e.isOpen&&!this.props.isOpen&&this.setState({isFrameLoading:!0,isFrameError:!1})},n.render=function(){var e=this.props,t=this.state,n=this._renderTitle();return a.createElement(i.default,{isOpen:e.isOpen,onClose:this._onClose,showCloseButton:!0},a.createElement(s.a,{name:"iframe",useParentState:!0},a.createElement("div",{className:d({view:e.fullView?"full":"padded"})},n,t.isFrameLoading?a.createElement("div",{className:d("spinner")},a.createElement(c.a,{view:"large"})):null,t.isFrameError?a.createElement("div",{className:d("error-message")},"Произошла ошибка.\nПовторите через пару минут."):a.createElement("iframe",{className:d("frame",{"no-border":e.noBorder}),src:e.href.replace("http:","https:"),style:e.iframeStyle,sandbox:u,scrolling:e.noscrolling?"no":void 0,referrerPolicy:"origin",onLoad:this._onFrameLoad,onError:this._onFrameError}))))},t}(a.PureComponent);t.a=Object(l.b)(p)},241:function(e,t,n){"use strict";var r=n(13),a=n(4),o=n(53),i=n(8),s=n(270),c=n.n(s);t.a=Object(i.b)(function(e){var t={text:"Маршрут",icon:c.a};return e.withoutIcon&&(t.text="Маршрут",delete t.icon),a.createElement(o.a,Object(r.a)({},t,{isStretched:e.isStretched,type:"route",view:e.pessimizeColor?"secondary-blue":"primary",hint:e.withoutHint?null:"Проложить маршрут",analytics:"build_route",metrikaGoal:["goal_deepuse",e.additionalMetrikaGoal].filter(Boolean),gaGoal:"site.contacts.click.route",onClick:function(){return e.onClick()}}))})},2450:function(e,t,n){},2452:function(e,t,n){},252:function(e,t,n){"use strict";var r=n(6),a=(n(303),n(4)),o=n(11),i=n(7),s=n(248),c=n(9),l=n(77),u=n(103),d={setLoadingPanorama:s.a.setLoadingPanorama},p=Object(i.a)("panorama-thumbnail-view"),m=o.b(function(e){return{config:e.config}},d),f=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onClick=function(){var e,n;t.props.setLoadingPanorama({id:t.props.panorama.id,direction:t.props.panorama.direction}),null===(e=(n=t.props).onClick)||void 0===e||e.call(n)},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props;return a.createElement(c.a,{name:"panorama",metrikaGoal:"goal_deepuse",logClick:!0},a.createElement("div",{className:p({view:e.view}),onClick:this._onClick},a.createElement(u.a,{src:e.panorama.preview,alt:e.panorama.alt,backgroundSize:"cover",renderImmediately:!0}),a.createElement("div",{className:p("label")},"preview"===e.view?"Панорама":""),a.createElement(l.a,{chunk:"panoramas"})))},t}(a.Component);t.a=m(f)},253:function(e,t,n){},257:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(69);function a(e,t,n){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var a=Object(r.a)(e,n),o=Object(r.a)(t,n);return a.getTime()===o.getTime()}},270:function(e,t,n){e.exports=n.p+"_/297b04b602bc8f93b66d20d5993ba5d1.svg"},290:function(e,t,n){e.exports=n.p+"_/d354bf9f740fa19de769a348441d3f2f.svg"},30:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={screenshotDialog:99999,ruler:8030,editing:8030,hover:8020,active:8e3,search:{active:8e3,subtitle:7500,title:7e3,base:6500,dot:6e3},dialog:2e3,usermaps:{placemark:3e3,line:2e3,polygon:1e3},discovery:580,routes:550,routePins:{waypoint:8e3,masstransit:7900},masstransitStop:8001,moving:500,masstransitLineStop:510,home:451,work:450,default:400,tooltip:352,masstransitRegion:350,bookmarks:300,minimum:1}},301:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(195),a=n(233);function o(e){var t=e[0][1],n=[e[1][0]-e[0][0],e[1][1]-t],o=Math.tan(Object(r.a)(t+90)/2),i=Math.tan(Object(r.a)(n[1])/2),s=Math.max((-o*o-o*i)/(o*i-1),0),c=.5*Math.log(s),l=2*(Math.atan(Math.exp(c))-.25*Math.PI);return{center:[(e[0][0]+e[1][0])/2,Object(a.a)(l)],span:n}}},303:function(e,t,n){},332:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(87),a=n(6),o=(n(71),n(4)),i=n(5),s=n(7),c=n(31),l=n(30),u=n(62),d=300,p=Object(s.a)("map-placemark"),m=function(){},f=function(e){function t(t){var n;return(n=e.call(this,t)||this)._container=document.createElement("div"),n._isDragged=!1,n._initCursor=function(){n._updateCursor(),n._marker.group().on("dragStart",function(){n._isDragged=!0,n._container.style.cursor="grabbing",n.props.map.container.style.cursor="grabbing"}).on("dragEnd",function(){n._isDragged=!1,n._updateCursor(),n.props.map.container.style.cursor="default"})},n._updateCursor=function(){n._container.style.cursor=n.props.onClick||n.props.onMouseEnter||n.props.draggable?"pointer":"default"},n._addMapEventHandlers=function(e){var t={dragStart:e.onDragStart,dragMove:e.onDragMove,dragEnd:e.onDragEnd};Object.keys(t).forEach(function(e){t[e]&&n._mapEventHandlers.on(e,function(){t[e]({coordinates:n._marker.coordinates})})})},n._onClick=function(e){e.stopPropagation();var t=n.props,r=t.onClick||m,a=t.onFastClick||m,o=t.onDoubleClick||m;n._clickTimer?(o(),window.clearTimeout(n._clickTimer),n._clickTimer=void 0):(a(),n._clickTimer=window.setTimeout(function(){r(),n._clickTimer=void 0},d))},n._container.className=p(),n._marker=t.map.createMarker({coordinates:t.coordinates,element:n._container,options:{draggable:t.draggable,zIndex:t.zIndex||l.a.default,disableRoundCoordinates:t.disableRoundCoordinates,blockEvents:t.blockEvents}}),n._mapEventHandlers=n._marker.group(),n}Object(a.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props;this._initCursor(),this._addMapEventHandlers(e),e.map.addMarker(this._dataSourceId,this._marker)},n.componentWillUnmount=function(){this.props.map.destroyed||(this._mapEventHandlers.offAll(),this.props.map.removeMarker(this._dataSourceId,this._marker),this._marker.destroy(),this._isDragged&&(this.props.map.container.style.cursor="default")),window.clearTimeout(this._clickTimer)},n.componentDidUpdate=function(e){var t=e.dataSourceId?e.dataSourceId:u.d.DEFAULT_MARKERS;t!==this._dataSourceId&&(this.props.map.removeMarker(t,this._marker),this.props.map.addMarker(this._dataSourceId,this._marker));var n=this.props;n.coordinates!==e.coordinates&&this._marker.setCoordinates(n.coordinates),e.draggable!==n.draggable&&this._marker.toggleDrag(n.draggable||!1),e.zIndex!==n.zIndex&&this._marker.setZIndex(n.zIndex||l.a.default),e.disableRoundCoordinates!==n.disableRoundCoordinates&&this._marker.toggleRoundCoordinates(n.disableRoundCoordinates||!1),n.onDragStart===e.onDragStart&&n.onDragMove===e.onDragMove&&n.onDragEnd===e.onDragEnd||(this._mapEventHandlers.offAll(),this._addMapEventHandlers(n)),e.draggable===n.draggable&&e.onClick===n.onClick||this._updateCursor()},n.render=function(){var e=this.props,t=o.createElement("div",{className:p("wrapper",{"non-interactive":e.nonInteractive}),onClick:this._onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseMove:e.onMouseMove},e.children);return i.createPortal(t,this._container)},Object(r.a)(t,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||u.d.DEFAULT_MARKERS}}]),t}(o.PureComponent);t.default=Object(c.b)({shouldWait:!0})(f)},354:function(e,t,n){"use strict";var r=n(37),a=(n(355),n(4)),o=n(7),i=n(9),s=n(77),c=n(103),l=Object(o.a)("photos-thumbnail-view");t.a=function(e){var t=e.size,n=void 0===t?"S":t,o=e.hideLabel,u=void 0!==o&&o,d=Object(r.a)(e,["size","hideLabel"]),p=d.urlTemplate.replace("%s",n),m=Boolean(d.count&&d.onClick);return a.createElement(i.a,{name:"photos",metrikaGoal:"deepuse",logClick:m},a.createElement("div",{className:l({clickable:m,type:d.type}),onClick:m?d.onClick:void 0},a.createElement(c.a,{src:p,backgroundSize:d.contain?"contain":"cover",alt:d.alt,renderImmediately:!0}),d.count&&(!u||d.smallLabel&&1===d.count)?a.createElement("div",{className:l("label",{position:d.labelPosition,small:d.smallLabel})},d.smallLabel?d.count:(function(params){return params.count+" фото";})({count:d.count})):null,d.showAdvertLabel?a.createElement("div",{className:l("notice")},"Реклама"):null,m?a.createElement(s.a,{chunk:"photos"}):null))}},355:function(e,t,n){},372:function(e,t,n){"use strict";var r=n(27);t.a=Object(r.a)(function(){return n.e("booking").then(n.bind(null,715))},{onPushState:!0,onUpdateState:!0,open:!0})},383:function(e,t,n){"use strict";var r=n(193);t.a=function(e){return(null==e?0:e.length)?Object(r.a)(e,1):[]}},408:function(e,t,n){"use strict";var r=n(6),a=(n(409),n(4)),o=n(7),i=Object(o.a)("direct-advert-view"),s=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._renderDisclaimers=function(e){return e.map(function(e,t){return a.createElement("span",{key:t,className:i("disclaimer")},e)})},t._renderSubtitle=function(){var e=t.props,n=e.direct.disclaimers||[];return a.createElement("span",{className:i("bottom",{"as-block":e.isInCard&&n.length>0})},a.createElement("span",{className:i("advert")},"Реклама"),t._renderDisclaimers(n))},t}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.direct;return a.createElement("div",{className:i({link:Boolean(e.isInCard&&t.url)})},a.createElement("span",{className:i("title")},t.title),a.createElement("span",{className:i("text")},t.text),this._renderSubtitle())},t}(a.Component);t.a=s},409:function(e,t,n){},411:function(e,t,n){"use strict";n(412);var r=n(4),a=n(7),o=n(33),i=n(8),s=n(12),c=Object(a.a)("masstransit-underground-line-name-view");t.a=Object(i.b)(function(e){var t,n=e.transport,a=e.config,i=n.city?o.e({type:"masstransit",name:"underground-"+n.city,size:"small"},a):null;return r.createElement("div",{className:c()},i?r.createElement("div",{className:c("icon")},r.createElement(s.a,{url:i})):null,r.createElement("div",{className:c("line-number"),style:{backgroundColor:n.Style&&n.Style.color||"transparent"}},null!==(t=n.lineNumber)&&void 0!==t?t:null),r.createElement("div",{className:c("line-name")},n.name))})},412:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(6),a=(n(58),n(4)),o=n(7),i=n(35),s=n(88),c=n(8),l=n(57),u=n(36),d=n(56),p=n(9),m=Object(o.a)("dialog"),f=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._container=a.createRef(),t._ref=a.createRef(),t._focusContainer=function(){if(t._container.current&&(!window.document.activeElement||!t._container.current.contains(window.document.activeElement))){var e=t._ref.current.scrollTop;t._container.current.focus(),t._ref.current.scrollTop=e}},t._onClose=function(){t.props.onClose()},t._onMouseDown=function(e){var n=e.currentTarget,r=!!(n.scrollHeight>n.offsetHeight)&&n.offsetWidth===n.clientWidth?15:0;e.target===e.currentTarget&&e.clientX+r<e.currentTarget.clientWidth&&t._onClose()},t._onScroll=function(){var e=t._ref.current,n=e.clientHeight+e.scrollTop>=e.scrollHeight;t.props.onScrollToEnd&&n&&t.props.onScrollToEnd()},t._renderClose=function(){if(!t.props.showCloseButton)return null;var e=Boolean(!1);return a.createElement(p.a,{name:"close",useParentState:!0,logClick:!0},a.createElement(u.a,{onClick:t._onClose,offset:e?"small":"large",circle:!0,usePortal:!1}))},t._renderContainer=function(){var e=t.props,n=Boolean(!1);return a.createElement("div",{className:m("container"),ref:t._container,tabIndex:1},a.createElement(s.a,{handlers:{key:l.a.ESC,callback:t._onClose,allowInEditable:!0},stopPropagation:!0}),a.createElement("div",{className:m("content",{"with-title":n})},n?a.createElement(i.a,{selector:".body"},a.createElement("div",{className:m("title")},e.mobileTitle)):null,t._renderClose(),e.children))},t._renderDialog=function(){var e=t.props;return a.createElement(p.a,{name:"dialog",useParentState:!0,logClick:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:m({transparent:e.transparent,fullscreen:e.fullscreen,"fit-mobile-content":e.fitMobileContent}),style:e.zIndex?{zIndex:e.zIndex}:void 0,ref:t._ref,onMouseDown:t._onMouseDown,onTouchMove:function(e){return e.preventDefault()},onScroll:t.props.onScrollToEnd?t._onScroll:void 0},t._renderContainer()),a.createElement("div",{className:m("paranja"),style:e.zIndex?{zIndex:e.zIndex-1}:void 0})))},t}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.isOpen&&this._focusContainer()},n.componentDidUpdate=function(e){!e.isOpen&&this.props.isOpen&&this._focusContainer()},n.render=function(){var e=this.props,t=e.isOpen?this._renderDialog():null;return e.inline?a.createElement(d.a,{onHideEnd:e.onHideEnd},t):a.createElement(i.a,{selector:".body"},a.createElement(d.a,{onHideEnd:e.onHideEnd},t))},t}(a.Component);t.default=Object(c.b)(f)},489:function(e,t,n){"use strict";var r=n(6),a=(n(490),n(4)),o=n(8),i=n(41),s=n(7),c=Object(s.a)("segmented-progress-bar"),l=100,u=function(e){return e.segments[Math.floor(e.currentSegment)].duration},d=function(e){function t(t){var n;return(n=e.call(this,t)||this)._progressRaf=-1,n._startTime=0,n._onRunStateChange=function(){n.props.run?n._scheduleUpdate():n._cancelUpdate()},n._scheduleUpdate=function(){n.props.config.query["no-animation"]||(window.cancelAnimationFrame(n._progressRaf),n._progressRaf=window.requestAnimationFrame(n._updateScreenProgress))},n._cancelUpdate=function(){window.cancelAnimationFrame(n._progressRaf)},n._updateScreenProgress=function(){var e=n.props;if(n.state.progress<l){var t=n.props.getToday().getTime()-n._startTime,r=u(e);n.setState({progress:Math.min(t/r*l,l)}),e.run&&n._scheduleUpdate()}else n.props.onTick()},n.state={progress:0},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.run&&(this._startTime=this.props.getToday().getTime(),this._scheduleUpdate())},n.componentDidUpdate=function(e){var t=this.props.currentSegment,n=e.currentSegment!==t,r=u(e)!==u(this.props),a=e.run!==this.props.run;a&&(this._startTime=this.props.getToday().getTime()-this.state.progress/l*u(this.props)),n||r?(this._startTime=this.props.getToday().getTime(),this.setState({progress:l*(t%1)},this._onRunStateChange)):a&&this._onRunStateChange()},n.componentWillUnmount=function(){this._cancelUpdate()},n.render=function(){var e=this.props,t=this.state,n=Math.floor(e.currentSegment);return a.createElement("div",{className:c()},e.segments.map(function(e,r){return a.createElement("div",{key:r,className:c("bar",{filled:r<n})},r===n?a.createElement("div",{className:c("progress"),style:{width:t.progress+"%"}}):null)}))},t}(a.Component);t.a=Object(i.b)(Object(o.b)(d))},490:function(e,t,n){},493:function(e,t,n){"use strict";n(494);var r=n(4),a=n(7),o=n(116),i=n(178),s=Object(a.a)("business-rating-with-text-view");t.a=function(e){return r.createElement("div",{className:s()},e.ratingValue?r.createElement(o.a,{ratingValue:e.ratingValue,size:"m"}):null,r.createElement("div",{className:s("count")},r.createElement(i.a,{ratingCount:e.ratingCount})))}},494:function(e,t,n){},505:function(e,t,n){"use strict";n.r(t);var r=n(13),a=n(6),o=n(657),i=n.n(o),s=n(4),c=n.n(s),l=n(7),u=n(26),d=n(20),p=n(8),m=n(25),f=n(39),v=n(354),h=n(493),g=n(203),_=n(659),b=n(568),E=n(569),y=n(506),w=n(666),C=n(509),S=n(411),k=Object(u.a)({resolved:{},chunkName:function(){return"search-snippet-gallery"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("search-snippet-gallery").then(n.bind(null,578))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 578}},{fallback:s.createElement("div",{style:{height:"136px"}})}),O=Object(u.a)({resolved:{},chunkName:function(){return"metro-jams"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e("metro-jams").then(n.bind(null,206))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[n]=!0,e})},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 206}}),j={snippet_show_title:!0,snippet_show_category:"all_categories",snippet_show_address:!0,snippet_show_rating:!0,snippet_show_photo:"single_photo",snippet_show_work_hours:!0},N=Object(l.a)("search-business-snippet-view"),T=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._getModularSnippet=function(){var e=t.props.result.modularSnippet;return e&&e.snippet_show_title&&!t.props.disableModularity?e:j},t._renderWideMedia=function(){var e=t.props,n=e.result,r=t._getModularSnippet().snippet_show_photo;return"always"!==e.showWideMedia&&("gallery"!==r||"never"===e.showWideMedia)||e.isPoiPreview?null:n.photos?s.createElement("div",{className:N("gallery")},s.createElement(k,{result:n,isFirstSnippet:e.isFirst,allowButtonWithoutCarousel:e.isPoiPreview})):null},t._renderPhotos=function(){var e,n,a,o=t.props,i=o.result,c=t._getModularSnippet().snippet_show_photo,l=(null===(e=i.businessImages)||void 0===e||(null===(n=e.logo)||void 0===n||n.urlTemplate),null===(a=i.advert)||void 0===a||a.logo,m.r(i));return l?"always"===o.showWideMedia?null:"single_photo"===c||"logo"===c||"gallery"===c&&"never"===o.showWideMedia?s.createElement("div",{className:N("photo",{size:"normal"})},s.createElement(v.a,Object(r.a)({},l,{labelPosition:"bottom-right",smallLabel:!0,type:"serp"}))):null:null},t._renderHead=function(){var e=t.props,n=(e.isPoiPreview?e.result.shortTitle:void 0)||e.result.title;return s.createElement("div",{className:N("head")},s.createElement("div",{className:N("title")},n,s.createElement(g.a,{result:e.result,hidePopup:e.isPoiPreview})),s.createElement("div",{className:N("optional")},e.renderOptionalButton?e.renderOptionalButton():null))},t._renderRating=function(){var e=t.props.result.ratingData;return t._getModularSnippet().snippet_show_rating&&e.ratingValue?s.createElement("div",{className:N("rating")},s.createElement(h.a,{ratingValue:e.ratingValue,ratingCount:e.ratingCount})):null},t._renderMetroLine=function(){var e=t.props.result.masstransitStop,n=e&&"underground"===e.type&&e.transports[0];return t._getModularSnippet().snippet_show_metro_line&&n?s.createElement("div",{className:N("metro-line")},s.createElement(S.a,{transport:n})):null},t._renderMetroJams=function(){var e=t.props.result.masstransitStop;return t._getModularSnippet().snippet_show_metro_jams&&(null==e?void 0:e.metroJamsInfo)?s.createElement(O,{stopId:e.id,metroJamsInfo:e.metroJamsInfo,view:"mini"}):null},t._renderPersonalRating=function(){var e=t.props.result;return t._getModularSnippet().snippet_show_rating&&e.personalRating&&t.props.config.experiments.ui.personalRating?s.createElement("div",{className:N("personal-rating")},s.createElement(C.a,{personalRating:e.personalRating})):null},t._renderSubline=function(){var e=t._getModularSnippet();return e.snippet_show_subline&&0!==e.snippet_show_subline.length?s.createElement("div",{className:N("subline")},s.createElement(_.a,{result:t.props.result,theme:"black"})):null},t._renderBadges=function(){var e=t._renderAdvert()||t._renderRelatedDiscovery();return e?s.createElement("div",{className:N("badge")},e):null},t._renderAdvert=function(){var e,n,r=t.props.result;return(null===(e=r.advert)||void 0===e?void 0:e.hideSerpOffer)||!(null===(n=r.advert)||void 0===n?void 0:n.promo)||r.direct?null:s.createElement(w.a,{promo:r.advert.promo})},t._renderDirect=function(){var e=t.props.result.direct;return e?s.createElement("div",{className:N("direct")},s.createElement(b.a,{direct:e})):null},t._renderAddress=function(){var e=t.props.result,n=t._getModularSnippet();return!n.snippet_show_address&&!n.snippet_show_eta||t.props.disableAddress?null:e.address?s.createElement("div",{className:N("address")},e.address+(e.additionalAddress?", "+e.additionalAddress:"")):null},t._renderCategories=function(){var e,n=t.props,r=n.result,a=t._getModularSnippet();if(!a.snippet_show_category||!r.categories)return null;switch(a.snippet_show_category){case"single_category":e=1;break;default:e=2}return s.createElement("div",{className:N("categories",{"single-line":n.isPoiPreview})},r.categories.slice(0,e).map(function(e,t){return s.createElement(f.a,{className:N("category"),key:t,href:r.region?d.d(e,r.region,n.config):void 0},e.name)}))},t._renderWorkingStatus=function(){var e=t.props,n=e.result,r=n.currentWorkingStatus;return!t._getModularSnippet().snippet_show_work_hours||!n.status||e.isPoiPreview&&!(null==r?void 0:r.text)?null:s.createElement("div",{className:N("working-status")},s.createElement(y.a,{result:n,showMoved:!0}))},t._renderRelatedDiscovery=function(){var e,n,r,a=t.props.result,o=null===(e=a.discoveryList)||void 0===e?void 0:e[0];return!o||a.showtime||(null===(n=a.advert)||void 0===n?void 0:null===(r=n.promo)||void 0===r?void 0:r.title)?null:s.createElement(E.a,{alias:o.alias,title:o.title,partnerIconTemplate:o.partnerIconUrlTemplate,caption:"В подборке",type:"serp"})},t._renderFloor=function(){var e=t.props,n=e.result;return e.disableAddress&&n.additionalAddress?s.createElement("div",{className:N("floor")},n.additionalAddress):null},t._renderFooter=function(){var e=t._renderWorkingStatus(),n=t._renderMetroJams()||t._renderFloor();return e||n?s.createElement("div",{className:N("footer",{clear:Boolean(n)})},e,n):null},t}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.result;return s.createElement("div",{className:N({closed:"open"!==t.status,"is-poi-preview":e.isPoiPreview})},this._renderWideMedia(),s.createElement("div",{className:N("content")},this._renderPhotos(),this._renderHead(),this._renderCategories(),this._renderAddress(),this._renderRating(),this._renderMetroLine(),this._renderPersonalRating(),this._renderSubline(),this._renderDirect(),this._renderBadges(),this._renderFooter(),e.renderActions?e.renderActions():null))},t}(s.Component);t.default=Object(p.b)(T)},506:function(e,t,n){"use strict";n(507);var r=n(4),a=n(8),o=n(7),i=n(171),s=Object(o.a)("business-working-status-view");t.a=Object(a.b)(function(e){var t=e.result,n=e.config,a=e.showMoved,o=i.b(t,n,{showMoved:a});return r.createElement("div",{className:s(o.state)},o.text)})},507:function(e,t,n){},509:function(e,t,n){"use strict";n(510);var r=n(4),a=n(8),o=n(7),i=n(9),s=n(12),c=n(43),l=n(122),u=n(512),d=n.n(u),p=n(513),m=n.n(p),f=Object(o.a)("business-header-personal-rating");t.a=Object(a.b)(function(e){var t=(function(params){return "Подходит вам на "+params.percentage;})({percentage:"__percentage"}),n=e.personalRating.last_rate,a=n?r.createElement(r.Fragment,null,"Ваша оценка",": ",r.createElement("span",{className:f("rating")},n)):Object(l.a)(t,{__percentage:r.createElement("span",{className:f("rating")},e.personalRating.score,"%")});return r.createElement(i.a,{name:"personal_rating",nodeState:{lastRate:n,score:e.personalRating.score},logClick:!0},r.createElement("div",{className:f()},r.createElement(s.a,{url:m.a,className:f("icon",{rated:Boolean(n)})}),r.createElement("span",{className:f("label")},a),e.showHint&&!n?r.createElement(c.a,{text:r.createElement(i.a,{name:"hover_hint"},"Персональный рейтинг основан на ваших оценках организаций. Чем больше оценок вы оставляете, тем он точнее."),isNeededOnMobile:!0,position:["right","bottom"],className:f("hint"),hideOnClick:!1},r.createElement("div",{className:f("hint-icon")},r.createElement(s.a,{url:d.a}))):null))})},510:function(e,t,n){},512:function(e,t,n){e.exports=n.p+"_/0f42c7f9ab59cf2314bd7f2987756007.svg"},513:function(e,t,n){e.exports=n.p+"_/62adaefa9833bfd0284b3f484a5f7cd5.svg"},514:function(e,t,n){"use strict";var r=n(65);function a(){}var o=Object(r.a)("config",{addSwipeListener:a,removeSwipeListener:a}),i=o.connect;o.Provider;t.a=i},515:function(e,t,n){"use strict";var r=n(4),a=n(53);t.a=function(e){return r.createElement(a.a,{type:"underground",text:"Схема метро",hint:"Открыть схему в Яндекс.Метро",analytics:"metro_link",url:e.link.href,target:"_blank"})}},53:function(e,t,n){"use strict";var r=n(10),a=n(6),o=(n(135),n(4)),i=n(7),s=n(8),c=n(15),l=n(12),u=n(9),d=n(43),p=Object(i.a)("action-button-view"),m=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onClick=function(e){var n=t.props;n.onClick&&n.onClick(e)},t._renderAnalyticsWrap=function(e){var n=t.props;return n.analytics?o.createElement(u.a,{name:n.analytics,metrikaGoal:n.metrikaGoal,gaGoal:n.gaGoal,logClick:!0},e):e},t._renderHintWrap=function(e){var n=t.props;return n.hint?o.createElement(d.a,{text:n.hint,position:"bottom"},e):e},t}return Object(a.a)(t,e),t.prototype.render=function(){var e=this.props;return this._renderHintWrap(this._renderAnalyticsWrap(o.createElement("div",{className:p(Object(r.a)(Object(r.a)({},e.mods),{},{stretched:e.isStretched,type:e.type})),ref:e.nodeRef},o.createElement(c.a,{view:e.view||"secondary-blue",size:e.size||"medium",isStretched:e.isStretched,icon:e.icon?o.createElement(l.a,{url:e.icon,className:p("icon")}):null,rel:e.rel,url:e.url,target:e.target,onClick:this._onClick,onMouseEnter:e.onMouseEnter},e.text))))},t}(o.Component);t.a=Object(s.b)(m)},536:function(e,t,n){"use strict";n.r(t);var r=n(10),a=6e5;var o,i=function(e,t){var n={},r={},o={};return function(){for(var i,s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];var u=(null===(i=t.getKey)||void 0===i?void 0:i.call.apply(i,[t].concat(c)))||"single";if(t.shouldSkipCache&&t.shouldSkipCache.apply(t,c))return e.apply(void 0,c);t.shouldResetCache&&t.shouldResetCache.apply(t,c)&&(n[u]=null,r[u]=null,o[u]=0);var d=n[u];if(!d)return d=e.apply(void 0,c),n[u]=d,d.catch(function(){return n[u]=null}).then(function(){return o[u]=Date.now()}),d;var p=Date.now(),m=p-(o[u]||p);if(m>t.maxAge){var f,v=r[u];return v||(v=e.apply(void 0,c),r[u]=v,v.then(function(){return n[u]=v},function(){}).then(function(){o[u]=Date.now(),r[u]=null})),m<t.maxAge+(null!==(f=t.staleWhileRevalidate)&&void 0!==f?f:a)?d:v}return d}},s=n(109),c=n(211),l=n(19),u=n(46),d=n(118),p=200,m=200,f=0,v=0,h={showUriPreview:function(e,t,n){return function(a,i,s){var c=s.config,u=i().mapObjectPreview;u&&!("isLoading"in u)&&"uri"in u&&u.uri===e?a(h.cancelHidePreview()):a(function(e,t,n,a){void 0===a&&(a={});return function(i){l.a.cancel(o),clearTimeout(v),i(b({uri:e,coordinates:t,isLoading:!0})),v=window.setTimeout(function(){o=l.a.create(g(e,n),{success:function(n){n&&i(b(Object(r.a)(Object(r.a)({},n),{},{from:a.from,offsets:a.offsets,uri:e,coordinates:t})))}})},p)}}(e,t,c,n))}},showOrgPreview:function(e,t,n){return function(r){r(h.showUriPreview(u.a(e),t,n))}},showStopPreview:function(e,t){return function(n){n(h.showUriPreview(u.c(e),t))}},showPreloadedPreview:function(e,t){return void 0===t&&(t={}),function(n){n(b({type:"business",from:t.from,offsets:t.offsets,uri:u.a(e.id),coordinates:e.displayCoordinates,data:e}))}},showRealtyPreview:function(e,t,n){return function(r){r(b({type:"realty",coordinates:e,building:t,url:n.url,businessId:n.businessId}))}},hidePreview:function(e){return function(t,n){var r=n().mapObjectPreview,a=r&&"uri"in r&&u.j(null==r?void 0:r.uri)||Boolean(r&&"type"in r&&["business","realty"].includes(r.type));(e||r&&"isLoading"in r)&&(l.a.cancel(o),clearTimeout(v)),t(a&&!e?function(e){f=window.setTimeout(function(){return e(_())},m)}:_())}},cancelHidePreview:function(){return function(){window.clearTimeout(f)}}};var g=i(function(e,t){return u.j(e)?function(e,t){return s.a.loadPoiByUri(e,t,{origin:"poi-hint"}).then(function(e){var t=e.items[0];if(t)return{type:"business",data:t}})}(e,t):u.m(e)?function(e,t){return c.a.getStopInfo({uri:e},t).then(function(e){if(e){var t=e.searchResult;return"underground"===e.type&&"business"===(null==t?void 0:t.type)?{type:"business",data:Object(r.a)(Object(r.a)({},t),{},{masstransitStop:e})}:{type:"stop",data:e}}})}(e,t):Promise.reject()},{maxAge:3e5,getKey:function(e){return e}});function _(){return function(e,t){t().mapObjectPreview&&e(b(void 0))}}function b(e){return function(t){e&&(t(d.a.closeWhatsherePreview()),window.clearTimeout(f)),t({type:"EXTEND",payload:{mapObjectPreview:e}})}}t.default=h},568:function(e,t,n){"use strict";var r=n(6),a=(n(662),n(4)),o=n(7),i=n(408),s=Object(o.a)("search-direct-snippet-banner-view"),c=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){return a.createElement("div",{className:s()},a.createElement("div",{className:s("icon")}),a.createElement(i.a,{direct:this.props.direct}))},t}(a.Component);t.a=c},569:function(e,t,n){"use strict";n(664);var r=n(4),a=n(7),o=n(20),i=n(8),s=Object(a.a)("search-collection-badge");t.a=Object(i.b)(function(e){var t=e.config,n=e.alias,a=e.title,i=e.caption,c=e.partnerIconTemplate,l=void 0===c?"":c;return r.createElement("div",{className:s({type:e.type})},r.createElement("img",{className:s("logo"),src:l.replace("%s","XXS")}),r.createElement("a",{className:s("link"),href:o.g(n,t)},r.createElement("span",{className:s("caption")},i),a?r.createElement("span",{className:s("title")},a):null))})},570:function(e,t,n){"use strict";var r=n(6),a=n(4),o=n(105),i=n.n(o),s=n(8),c=n(9),l=n(53),u=n(236),d=n(119),p=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onClick=function(e){var t=n.props;"tel"===t.type?n.setState({isTelButtonClicked:!0}):t.iframe&&!t.preferNewTab&&(e.preventDefault(),n.setState({isFrameOpened:!0}))},n._onIframeClose=function(){n.setState({isFrameOpened:!1})},n._renderFrame=function(){var e=n.props,t=n.state;if(!e.iframe||!e.value)return null;var r={border:"none",width:e.iframe.width,height:e.iframe.height},o=e.value;if(o.includes("/business/widget/request/company/")){var s=["utm_ya_campaign","utm_banner_type","utm_ya_rubric","yabizcmpgn","yclid"].reduce(function(t,n){return e.config.query[n]&&(t[n]=e.config.query[n]),t},{}),c=o.includes("?")?"&":"?",l=i.a.stringify(s);o=""+o+(l&&""+c+l)}return a.createElement(u.a,{isOpen:t.isFrameOpened,href:o,iframeStyle:r,onClose:n._onIframeClose,fullView:!0})},n.state={isFrameOpened:!1,isTelButtonClicked:!1},n}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=this.state.isTelButtonClicked,n="tel"===e.type,r=n&&t?"+"+d.a(e.value,"7 923 456 78 90"):e.title,o=n?t?"tel:+"+e.value:void 0:e.value;return a.createElement(c.a,{name:"cta_button",nodeState:{actionType:e.type,title:r,url:o},metrikaGoal:e.metrikaGoal,gaGoal:"site.main_action.click",logClick:!0},this._renderFrame(),a.createElement(l.a,{view:e.view,type:"action_button",rel:"nofollow",text:r,url:o,target:n?void 0:"_blank",onClick:this._onClick,isStretched:e.isStretched,size:e.size}))},t}(a.PureComponent);t.a=Object(s.b)(p)},571:function(e,t,n){"use strict";var r=n(4),a=n(11),o=n(372),i=n(9),s=n(53),c={open:o.a.open},l=a.b(null,c);t.a=l(function(e){return r.createElement(i.a,{name:"booking_button",logClick:!0},r.createElement(s.a,{view:"advertisement",type:"action_button",rel:"nofollow",text:"Записаться онлайн",onClick:function(){var t;e.open(e.result,"booking"),null===(t=e.onClick)||void 0===t||t.call(e)},isStretched:!0,size:"medium"}))})},58:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);n(79),n(81);var r=n(4),a=n(7),o=n(36),i=Object(a.a)("sidebar-panel-header-view"),s=r.memo(function(e){var t,n=null===(t=e.renderLeftContent)||void 0===t?void 0:t.call(e);return r.createElement("div",{className:[i({bordered:e.showBorder,centered:Boolean(n),view:e.view}),e.className].filter(Boolean).join(" ")},n?r.createElement("div",{className:i("controls")},n):null,r.createElement("div",{className:i("title",{big:e.big})},e.title||e.children),r.createElement("div",{className:i("controls")},e.onClose?r.createElement(o.a,{onClick:function(t){t.stopPropagation(),e.onClose()},relative:!0,circle:!0}):null))});s.displayName="SidebarPanelHeaderView",t.default=s},657:function(e,t,n){},659:function(e,t,n){"use strict";var r=n(6),a=(n(660),n(4)),o=n(7),i=n(8),s=Object(o.a)("search-business-snippet-subtitle-view"),c=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e,t=this.props.result,n=null===(e=t.modularSnippet)||void 0===e?void 0:e.snippet_show_subline,r=t.subtitleItems;if(!n||!r)return null;var o=n.reduce(function(e,t){return e||r.find(function(e){return e.type===t})},void 0);if(!o)return null;var i=function(e){var t,n=(s=e.property,function(e){var t=s.find(function(t){return t.key===e});return t&&t.value}),r=e.text,a=n("name"),o=n("price"),i=n("currency");var s;switch(e.type){case"fuel":var c=n("value");if(!a)break;r=a,t=c&&i?l(c,i):void 0;break;case"next_movie":var u=n("time_text");if(!u)break;r=u,t=n("title")||n("money_text");break;case"menu":if(!o||!i)break;r=l(o,i),t=a;break;case"average_bill2":case"beer_price":case"car_body_cleaning_cost":case"classic_female_manicure_coated":case"price_1_min":case"price_1":case"price_bed":case"price_cup_cappuccino":case"price_per_hour_sauna2":case"price_per_month2":case"price_rolls":case"price_room":case"tickets":case"women_haircut":case"goods":if(!i)break;var d=n("price_from"),p=n("price_to");if(d&&p)r=l(d+"–"+p,i);else if(p)r=(function(params){return "до "+params.price;})({price:l(p,i)});else if(d)r=(function(params){return "от "+params.price;})({price:l(d,i)});else{if(!o)break;r=l(o,i)}t=n("prefix")||n("time_unit")||n("name")}return{title:r,description:t}}(o),c=i.title,u=i.description;if(!c)return null;var d="closed_for_visitors"===o.type;return a.createElement("div",{className:s({theme:this.props.theme})},a.createElement("div",{className:s(d?"warning":"title")},c),u?a.createElement("span",{className:s("description"),dangerouslySetInnerHTML:{__html:u}}):null)},t}(a.PureComponent);function l(e,t){return e+" "+t}t.a=Object(i.b)(c)},660:function(e,t,n){},662:function(e,t,n){},664:function(e,t,n){},666:function(e,t,n){"use strict";n(667);var r=n(4),a=n(7),o=Object(a.a)("search-advert-badge");t.a=function(e){return r.createElement("div",{className:o()},r.createElement("div",{className:o("icon")}),r.createElement("div",{className:o("main")},r.createElement("span",{className:o("title")},e.promo.title),r.createElement("span",{className:o("advert")},"Реклама")))}},667:function(e,t,n){},669:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(20),a=n(16),o=n(155);function i(e,t,n){var i=function(e){return Object.entries(e.query).reduce(function(e,t){var n=t[0],r=t[1];return("yclid"===n||n.startsWith("utm_"))&&(e[n]=r),e},{})}(n),s=Object(a.n)(n)?r.o(t,n,i):r.b(t,{},n,i);o.a.hitByCounter(e,{url:s,params:o.a.buildMetrikaOrgEventParams(t.id,"show_org")})}},670:function(e,t,n){"use strict";var r=n(6),a=(n(671),n(4)),o=n(8),i=n(514),s=n(489),c=n(7),l=n(14),u=n(9),d=n(103),p=n(12),m=n(252),f=n(77),v=n(54),h=n(139),g=n(32),_=n(246),b=n(673),E=n.n(b),y=n(674),w=n.n(y),C=Object(c.a)("card-header-media-view"),S=10,k=2,O=320,j="auto",N=4,T=3e3,P=Object(l.a)(o.b,i.a),I=function(e){function t(t){var n;return(n=e.call(this,t)||this)._scrollPauseTimeout=0,n._getAdvertDisplayingPhotos=function(){var e,t=n.props.result,r=t.advert,a={advert:!0,urlTemplate:(null==r?void 0:r.photo)||(null===(e=t.photos)||void 0===e?void 0:e.urlTemplate)||""};return a.urlTemplate?[a]:void 0},n._getDisplayingPhotos=function(){var e,t=n.props.result,r=[];return(null===(e=t.advert)||void 0===e?void 0:e.photo)&&r.push({urlTemplate:t.advert.photo,link:[]}),t.photos&&r.push.apply(r,t.photos.items),r.slice(0,S)},n._slideToNextPhoto=function(e){n.setState(function(t){return{sliderPosition:(t.sliderPosition+1)%e.length}},function(){var e,t;return null===(e=(t=n)._setCarouselPosition)||void 0===e?void 0:e.call(t,n.state.sliderPosition)})},n._changeSlide=function(e,t){t||n.setState({sliderPosition:e})},n._shouldUseAutoScrollingCarousel=function(e){return Boolean(e.length>=4)},n._pauseAnimation=function(){n.state.autoPlay&&n.setState({autoPlay:!1})},n._resumeAnimation=function(){n.state.autoPlay||n.setState({autoPlay:!0})},n._onSwipe=function(e){e.isSwiping?n._pauseAnimation():n._resumeAnimation()},n._onScroll=function(e){n._pauseAnimation(),window.clearTimeout(n._scrollPauseTimeout),e&&e.scrollTop<=0&&(n._scrollPauseTimeout=window.setTimeout(n._resumeAnimation,300))},n._renderAutoScrollingCarousel=function(e){return a.createElement(u.a,{name:"photos_carousel"},a.createElement(v.a,{snap:!0,itemsGap:0,children:e.map(function(e,t){return a.createElement("div",{className:C("auto-scrolling-carousel-item"),key:t},n._renderPhoto(e,"L",t,function(){return n.props.onPhotoClick()}))}),showArrows:"never",onScroll:n._changeSlide,onSwipeStart:function(){return n.setState({autoPlay:!1})},onSwipeEnd:function(){return n.setState({autoPlay:!0})},setPositionRef:function(e){return n._setCarouselPosition=e}}),a.createElement("div",{className:C("fade")}),a.createElement("div",{className:C("progress")},a.createElement(s.a,{currentSegment:n.state.sliderPosition,segments:e.map(function(){return{duration:T}}),run:n.state.autoPlay,onTick:function(){return n._slideToNextPhoto(e)}})),a.createElement(h.a,{eventHandler:n._onScroll,throttleWait:100}))},n._renderPhoto=function(e,t,r,o){var i=n.state,s=e.urlTemplate.replace("%s",t);return a.createElement(u.a,{name:"photos",metrikaGoal:"deepuse",logClick:!0},a.createElement("div",{className:C("photo"),onClick:o},a.createElement(d.a,{src:s,alt:e.alt,renderImmediately:!r||r<=i.sliderPosition+i.preloadImagesCount})))},n._renderCarouselPhoto=function(e,t,r){var o=n.props,i="wide"===o.view,s=i&&r&&r.length<=k,c=i?s?(_.a.wide(o.config)-(r.length-1)*N)/r.length:O:j,l=n._renderPhoto(e,s?"XL":"L",t,function(){return o.onPhotoClick(i?t:void 0)});return e.advert?a.createElement(a.Fragment,null,a.createElement("div",{className:C("advert-wrap")},a.createElement("div",{className:C("advert-wrap-inner")},l)),a.createElement("div",{className:C("fade")})):a.createElement(a.Fragment,null,a.createElement("div",{className:C("item"),style:{width:c},key:t},a.createElement("div",{className:C("item-layout")},l)),a.createElement("div",{className:C("fade")}))},n._renderLogo=function(){var e,t,r,o=n.props,i=o.result,s=(null===(e=i.advert)||void 0===e?void 0:e.logo)||(null===(t=i.businessImages)||void 0===t?void 0:t.logo.urlTemplate);return s&&"compact"!==o.view?a.createElement("div",{className:C("logo")},a.createElement(d.a,{src:s.replace("%s","S"),backgroundSize:(null===(r=i.advert)||void 0===r?void 0:r.logo)?"cover":"contain",renderImmediately:!0})):null},n._renderPhotos=function(e,t){var r,o,i=n.props,s=i.result,c=((null===(r=s.photos)||void 0===r?void 0:r.count)||0)+((null===(o=s.advert)||void 0===o?void 0:o.photo)?1:0);return a.createElement("div",{className:C("list"),itemScope:!0,itemType:"http://schema.org/ImageGallery"},"wide"===i.view?a.createElement(v.a,{clickStep:2,itemsGap:N,children:e.map(n._renderCarouselPhoto)}):n._shouldUseAutoScrollingCarousel(e)?n._renderAutoScrollingCarousel(e):n._renderCarouselPhoto(e[0],0),"compact"!==i.view?a.createElement("div",{className:C("label")},a.createElement("div",{className:C("label-icon",{photos:!0})},a.createElement(p.a,{url:E.a})),c):null,t?a.createElement("div",{className:C("notice")},"Реклама"):null,a.createElement(f.a,{chunk:"photos"}))},n._renderPanorama=function(){var e=n.props.result.panorama;return e?a.createElement(a.Fragment,null,a.createElement("div",{className:C("item")},a.createElement(m.a,{panorama:e,view:"org"}),a.createElement("div",{className:C("label")},a.createElement("div",{className:C("label-icon",{panorama:!0})},a.createElement(p.a,{url:w.a})),"Панорама")),a.createElement("div",{className:C("fade")})):null},n._renderAddPhoto=function(){return a.createElement(u.a,{name:"add_photo",logClick:!0},a.createElement("div",{className:C("add-photo"),onClick:n.props.onAddPhotoClick},a.createElement(g.a,{name:"add-photo",size:24,inline:!0}),a.createElement("div",{className:C("add-photo-label")},"Добавить фото")))},n.state={sliderPosition:0,autoPlay:!0,preloadImagesCount:0},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.addSwipeListener(this._onSwipe),this.setState({preloadImagesCount:2})},n.componentWillUnmount=function(){this.props.removeSwipeListener(this._onSwipe)},n.render=function(){var e=this.props,t=e.result.advert,n=e.config.experiments.ui.gpTopPhoto&&t&&(t.photo||t.logo)?this._getAdvertDisplayingPhotos():void 0,r=n||this._getDisplayingPhotos(),o=Boolean(r.length>0),i=Boolean(e.result.panorama),s=Boolean(n);if(!o&&!i&&!e.onAddPhotoClick||!o&&i&&e.hidePanorama)return null;var c=!o&&!i;return a.createElement("div",{className:C({"auto-scrolling":this._shouldUseAutoScrollingCarousel(r),view:e.view,panorama:i&&!o,"only-add-photo":c,advert:s})},c?this._renderAddPhoto():a.createElement(a.Fragment,null,o?this._renderPhotos(r,s):this._renderPanorama(),this._renderLogo()))},t}(a.PureComponent);t.a=P(I)},671:function(e,t,n){},673:function(e,t,n){e.exports=n.p+"_/ec896d8933f5ea816ff9ec6c0dcc8ec2.svg"},674:function(e,t,n){e.exports=n.p+"_/c94a0036fea0865a100bbea6fd73e932.svg"},675:function(e,t,n){e.exports=n.p+"_/9b2285f9d153b9866a7706b11c03dc5d.svg"},68:function(e,t,n){"use strict";var r=n(6),a=n(4),o=n(61),i=n(8),s=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={shouldRender:t.immediately||Boolean(t.config.uatraits.isRobot)||t.config.query["no-lazy-render"]},n}Object(r.a)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){!e.immediately&&this.props.immediately&&this.setState({shouldRender:!0})},n.render=function(){var e=this,t=this.props;if(this.state.shouldRender)return this.props.children;var n=t.placeholder||null;return a.createElement(o.a,{style:{width:"100%",height:"100%"},rootMargin:t.rootMargin||"100px",onChange:function(t){return e.setState({shouldRender:t})}},n)},t}(a.PureComponent);t.a=Object(i.b)(s)},69:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(24);function a(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=Object(r.a)(e,t);return n.setHours(0,0,0,0),n}},71:function(e,t,n){},77:function(e,t,n){"use strict";var r=n(6),a=n(4),o=n(8),i=n(208),s=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;if(!this.props.config.experiments.ui.noPreloadChunk){var t=function(){return i.a(e.props.chunk)};this.props.immediately?t():setTimeout(t,3e3)}},n.render=function(){return null},t}(a.Component);t.a=Object(o.b)(s)},79:function(e,t,n){},81:function(e,t,n){},86:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(55),a=n(24);function o(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var n=t||{},o=n.locale,i=o&&o.options&&o.options.weekStartsOn,s=null==i?0:Object(r.a)(i),c=null==n.weekStartsOn?s:Object(r.a)(n.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=Object(a.a)(e,n),u=l.getDay(),d=(u<c?7:0)+u-c;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}},92:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return i});var r=n(86),a=n(214),o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function i(e){var t=Object(r.a)(e),n=Object(a.a)(e,t);return o[n]}function s(e,t){return{sunday:"Воскресенье",monday:"Понедельник",tuesday:"Вторник",wednesday:"Среда",thursday:"Четверг",friday:"Пятница",saturday:"Суббота"}[t]}function c(e,t){return{sunday:"Вс",monday:"Пн",tuesday:"Вт",wednesday:"Ср",thursday:"Чт",friday:"Пт",saturday:"Сб"}[t]}function l(e,t){return{sunday:"В воскресенье",monday:"В понедельник",tuesday:"Во вторник",wednesday:"В среду",thursday:"В четверг",friday:"В пятницу",saturday:"В субботу"}[t]}},998:function(e,t,n){"use strict";var r=n(13),a=n(10),o=n(6),i=(n(999),n(4)),s=n(11),c=n(7),l=n(14),u=n(8),d=n(505),p=n(119),m=n(25),f=n(118),v=n(111),h=n(241),g=n(570),_=n(53),b=n(738),E=n(669),y=n(670),w=n(515),C=n(154),S=n(9),k=n(571),O=n(290),j=n.n(O),N=n(675),T=n.n(N),P=Object(c.a)("business-map-preview-view"),I={openPreloadedCard:f.a.openPreloadedCard,buildRouteTo:v.a.buildRouteTo},R=Object(l.a)(s.b(null,I),u.b),M=function(e){function t(t){var n;return(n=e.call(this,t)||this)._timerId=0,n._onRouteClick=function(e){var t,r;n.props.buildRouteTo({value:e.title,coords:e.displayCoordinates,searchResult:e}),null===(t=(r=n.props).onClose)||void 0===t||t.call(r)},n._openCard=function(e){var t,r;void 0===e&&(e={});var o=n.props.result;o&&(n.props.openPreloadedCard(o,Object(a.a)(Object(a.a)({},e),{},{from:"poi"})),null===(t=(r=n.props).onClose)||void 0===t||t.call(r))},n._openCardContacts=function(){n._openCard({tab:"overview",scrollTo:"contacts",isPhoneInitiallyExpanded:!0})},n._getCtaButton=function(){var e,t,r=null===(e=n.props.result.advert)||void 0===e?void 0:null===(t=e.actionButtons)||void 0===t?void 0:t[0];if(r&&"tel"!==r.type)return r},n._shouldShowTopMedia=function(){var e;return"gallery"===(null===(e=n.props.result.modularSnippet)||void 0===e?void 0:e.snippet_show_photo)},n._preventBubbling=function(e){e.stopPropagation()},n._onMetrikaReady=function(e){n.setState({metrikaCounter:e})},n._onPhotosClick=function(){n._openCard({tab:"gallery"})},n._renderButton=function(e,t){return i.createElement("div",{className:P("button",{type:t})},e)},n._renderCTAButton=function(){var e,t,a,o=n.props;if((o.config.experiments.ui.enableBooking||o.config.bunker.enableBooking)&&o.result.booking&&!(null===(e=o.result.advert)||void 0===e?void 0:e.highlighted))return i.createElement(k.a,{result:o.result,onClick:o.onClose});var s=n._getCtaButton();return s?n._renderButton(i.createElement(g.a,Object(r.a)({},s,{preferNewTab:!0,view:"advertisement",metrikaGoal:null===(t=n.props.result.metrika)||void 0===t?void 0:null===(a=t.goals)||void 0===a?void 0:a.cta,isStretched:!0})),"cta"):null},n._renderBusinessButton=function(e){var t,r=n.props,a=e.topObjects;return m.k(e,r.config)?t="booking":a&&(t="food"===a.rubric?"menu":"prices"),n._shouldShowTopMedia()&&t?n._renderButton(i.createElement(_.a,{type:t,text:"menu"===t?"Меню":"Цены",analytics:t+"_button",onClick:function(){return n._openCard({tab:t})}})):null},n._renderLinksButton=function(e){var t=e.urls||[];if(0===t.length)return null;var r=n._shouldShowTopMedia();return n._renderButton(i.createElement(_.a,{text:r?void 0:"Сайт",icon:r?T.a:void 0,metrikaGoal:"goal_deepuse",type:"web",analytics:"site_link",url:t[0],target:"_blank"}))},n._renderPhonesButton=function(e){var t=p.e(e,n.props.config);if(0===t.length)return null;var r=n._shouldShowTopMedia();return n._renderButton(i.createElement(_.a,{text:r?void 0:(function(params){return (params.count % 10 === 1 && params.count % 100 !== 11 ? "Телефон" :"Телефоны");})({count:t.length}),icon:r?j.a:void 0,type:"show-phone",analytics:"show_phone",onClick:n._openCardContacts}))},n._renderUndergroundButton=function(e){var t,r,a=null===(t=e.masstransitStop)||void 0===t?void 0:null===(r=t.links)||void 0===r?void 0:r.find(function(e){return"underground"===e.type});return a?n._renderButton(i.createElement(w.a,{link:a})):null},n._renderActions=function(e){var t,r=n._renderCTAButton();return i.createElement("div",{className:P("actions"),onClick:function(e){return e.stopPropagation()}},n._renderButton(i.createElement(h.a,{mini:!1,onClick:function(){return n._onRouteClick(e)},additionalMetrikaGoal:null===(t=e.metrika)||void 0===t?void 0:t.goals.route,withoutHint:!0,withoutIcon:Boolean(r)})),e.masstransitStop?n._renderUndergroundButton(e):r||i.createElement(i.Fragment,null,n._renderBusinessButton(e),n._renderLinksButton(e),n._renderPhonesButton(e)))},n._renderTopMedia=function(){var e=n.props.result;return n._shouldShowTopMedia()?i.createElement("div",{onClick:n._preventBubbling},i.createElement(y.a,{view:"compact",result:e,onPhotoClick:n._onPhotosClick,hidePanorama:!0})):null},n.state={},n}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this._timerId=window.setTimeout(function(){e.setState({canSendMetrics:!0})},2e3)},n.componentDidUpdate=function(){var e=this.state,t=e.metrikaCounter;if(t&&e.canSendMetrics){var n=this.props;Object(E.a)(t,n.result,n.config),this.setState({canSendMetrics:!1})}},n.componentWillUnmount=function(){window.clearTimeout(this._timerId)},n.render=function(){var e,t,n=this,a=this.props,o=this.state.canSendMetrics;return i.createElement("div",{className:P(),onClick:function(){return n._openCard()}},this._renderTopMedia(),i.createElement("div",{className:P("wrapper")},i.createElement(d.default,{result:a.result,renderActions:function(){return n._renderActions(a.result)},isPoiPreview:!0})),a.result.metrika?i.createElement(b.a,Object(r.a)({},a.result.metrika,{orgId:a.result.id,onReady:this._onMetrikaReady})):null,i.createElement(C.a,{url:o?null===(e=a.result.direct)||void 0===e?void 0:null===(t=e.contactInfo)||void 0===t?void 0:t.counterUrl:void 0}),o?i.createElement(S.a,{name:"long_show",useParentState:!0}):void 0)},t}(i.Component);t.a=R(M)},999:function(e,t,n){}}]);