(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["search-result"],{109:function(e,t,r){"use strict";var n=r(37),o=r(10),s=r(2978),i=r(301),a=r(2995),c=r(29),u=r(25),l="search_",d="",p={fetch:function(e,t){return Object(c.a)("search",{query:m(e,t)},t).then(function(e){return d=e.requestId,e})},batchFetch:function(e,t){var r={requestQueries:e.map(function(e){return m(e,t)})};return Object(c.a)("search/batch",{body:r},t).then(function(e){var t,r=null===(t=e.find(function(e){return Boolean(e)}))||void 0===t?void 0:t.requestId;return r&&(d=r),e})},fetchSearchResult:function(e,t,r){if(void 0===r&&(r={}),"poi"===e.from){if(e.uri)return p.loadPoiByUri(e.uri,t,r).then(function(t){return Object(o.a)(Object(o.a)({},t),{},{items:t.items.map(function(t,r){return Object(o.a)(Object(o.a)({},t),{},{hotspotProperties:e.hotspotProperties,displayCoordinates:e.coordinates&&0===r?e.coordinates:t.displayCoordinates})})})});if(e.coordinates)return p.loadPoiByCoordinates(e.coordinates,t,r).then(function(t){if(u.D(e.hotspotProperties)){var r=t.items[0],n={title:"Парковка",description:r.address,hotspotProperties:e.hotspotProperties,id:r.id,type:r.type,kind:r.kind,requestId:r.requestId,analyticsId:r.analyticsId,address:r.address,coordinates:r.coordinates,displayCoordinates:r.displayCoordinates,encodedCoordinates:r.encodedCoordinates,stops:r.stops,panorama:r.panorama,photos:r.photos,uri:r.uri};t.items=[n]}return t})}if("whatshere"===e.from)return p.loadWhatshere(e,t);var n=Object(o.a)(Object(o.a)({},e),{},{count:1,searchType:"TEXT"});return n.uri&&(n.mode="uri"),p.fetch(n,t)},prepareChainSearchRequest:function(e,t){return p.fetch({count:1,kind:"locality",text:Object(s.a)(e.center,{reverse:!0}),origin:"chain-city"},t).then(function(t){var r={searchType:"TEXT",displayText:e.chain.name,text:"chain_id:("+e.chain.id+")",origin:e.origin||"chain"},n=t.bounds;if(n){var o=Object(i.a)(n);r.center=o.center,r.span=o.span}return r})},loadPoiByCoordinates:function(e,t,r){return void 0===r&&(r={}),p.fetch({text:Object(s.a)(e,{reverse:!0}),count:1,origin:r.origin||"poi",clientId:r.clientId,snippets:h(t)},t)},loadPoiByUri:function(e,t,r){return void 0===r&&(r={}),p.fetch({mode:"uri",uri:e,count:1,origin:r.origin||"poi",clientId:r.clientId,snippets:h(t)},t)},loadWhatshere:function(e,t){var r=e.origin,o=Object(n.a)(e,["origin"]);return p.fetch({pin:!0,text:Object(s.a)(o.coordinates,{reverse:!0}),zoom:o.zoom,span:[.001,.001],count:1,origin:r||"poi",addBuildingGeometry:e.addGeometry},t).then(function(e){var t=e.items[0];return t?("poi"===r&&(t.displayCoordinates=t.coordinates),e):null}).catch(function(){return null})}};function h(e){return e.search.snippets.filter(function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e})}function m(e,t){var r=e.clientId||"maps",n=e.origin?r+"-"+e.origin:r,i={text:e.text,lang:t.locale,yandex_gid:t.userRegion.id,client_id:e.clientId,origin:n,results:e.count,ctx:e.context,mode:e.mode,lr:e.lr,uri:e.uri,business_oid:Array.isArray(e.id)?e.id.join(","):e.id,z:e.zoom,sort:e.sort,business_filter:e.filters,autoscale:e.autoscale,distinguish_layers:e.distinguishLayers,correct_misspell:e.correctMisspell,geocoder_kind:e.kind,skip:e.skip,rspn:e.restrictSpan,rearr:e.rearr,groupchains_advert:e.groupchains_advert,relev_ranking_formula:e.relev_ranking_formula,maxadv:e.maxadv,eventsBranch:t.query.eventsBranch};return e.addBuildingGeometry&&(i.search_geometry="2"),e.sortOrigin&&(i.sort_origin=e.sortOrigin.join()),e.center&&(i.ll=e.center.join()),e.span&&(i.spn=e.span.join()),e.bbox&&(i.bbox=e.bbox.join("~")),e.snippets?i.snippets=e.snippets:i.snippets=t.search.snippets,t.experiments.ui.groupSameCompanies&&(i.snippets=i.snippets.concat("collapsed_orgs/1.x")),t.experiments.ui.geosearchPinPriority&&(i.snippets=i.snippets.concat("pin_priority/1.x")),t.experiments.ui.geosearchAdditionalPins&&(i.snippets=i.snippets.concat("pin_info/1.x")),i.snippets=i.snippets.join(),e.direct&&(i=Object(o.a)(Object(o.a)({},i),t.advert.direct.params)),e.pin&&(i.geocoder_pin=1),e.type&&(i.type=e.type.join()),e.routeCoordinates&&e.bounds&&e.routeCoordinates.some(function(t){return Object(a.a)(e.bounds,t)})&&(i.business_rll=e.routeCoordinates.map(function(e){return Object(s.a)(e,{fractionDigits:5})}).join("~")),e.clientUsecase&&(i.client_usecase=e.clientUsecase),e.suggestReqid&&"form"===e.origin&&(i.suggest_reqid=e.suggestReqid),e.serpId&&(i.serpid=e.serpId),(e.parentReqId||d||t.searchPreloadedResults)&&(i.parent_reqid=e.parentReqId||d||t.searchPreloadedResults.requestId),e.geoWhere&&(i.geowhere=[].concat(e.geoWhere).reverse().join()),e.businessMode&&(i.business_mode=e.businessMode),"boolean"==typeof e.businessShowClosed&&(i.business_show_closed=e.businessShowClosed?1:0),Object(o.a)(Object(o.a)(Object(o.a)({},i),e.rawParams),function(e){var t=Object(o.a)({},e.experiments.geoSearchParams||{});e.experiments.ui.centralBankCollaboration&&(t.search_experimental_business_show_exp_features="cbrf");var r=e.experiments.boxes;r&&(t["test-buckets"]=r);return Object.keys(e.query).forEach(function(r){r.startsWith(l)&&(t[r]=e.query[r])}),t}(t))}t.a=p},1179:function(e,t,r){"use strict";r.r(t);var n=r(13),o=r(6),s=r(10),i=r(4),a=r.n(i),c=r(11),u=r(14),l=r(26),d=r(8),p=r(22),h=r(432),m=r(248),v=r(175),f=r(111),g=r(99),y=r(219),b=r(118),C=r(25),_=r(46),k=r(16),w=r(237),O=r(9),j=r(2039),R=r.n(j),E=r(163),P=r(42),A=r(130),S=r(720),T=r(499),q=r(280),I=r.n(q),x=r(426),M=r(84),B=r(98),F=r(869),N=Object(l.a)({resolved:{},chunkName:function(){return"business"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e("business").then(r.bind(null,572))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[r]=!0,e})},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 572}}),L=Object(l.a)({resolved:{},chunkName:function(){return"toponym"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e("toponym").then(r.bind(null,1246))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[r]=!0,e})},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 1246}}),D=Object(l.a)({resolved:{},chunkName:function(){return"direct"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e("direct").then(r.bind(null,1248))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[r]=!0,e})},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 1248}}),z=Object(l.a)({resolved:{},chunkName:function(){return"header"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e("header").then(r.t.bind(null,455,7))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[r]=!0,e})},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 455}}),V=Object(l.a)({resolved:{},chunkName:function(){return"search-map"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e("search-map").then(r.bind(null,760))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[r]=!0,e})},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 760}},{ssr:!1}),Q=Object(l.a)({resolved:{},chunkName:function(){return"search-map"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e("search-map").then(r.bind(null,764))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[r]=!0,e})},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 764}},{ssr:!1}),W=Object(l.a)({resolved:{},chunkName:function(){return"search-map"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e("search-map").then(r.bind(null,160))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[r]=!0,e})},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 160}},{ssr:!1}),G=Object(l.a)({resolved:{},chunkName:function(){return"search-map"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e("search-map").then(r.bind(null,271))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[r]=!0,e})},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 271}},{ssr:!1}),X=Object(l.a)({resolved:{},chunkName:function(){return"search-map"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e("search-map").then(r.bind(null,557))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[r]=!0,e})},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 557}},{ssr:!1}),U=Object(l.a)({resolved:{},chunkName:function(){return"search-map"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e("search-map").then(r.bind(null,773))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[r]=!0,e})},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 773}},{ssr:!1}),H=Object(l.a)({resolved:{},chunkName:function(){return"preview"},isReady:function(e){var t=this.resolve(e);return!1!==this.resolved[t]&&!!r.m[t]},importAsync:function(){return r.e("preview").then(r.t.bind(null,1249,7))},requireAsync:function(e){var t=this,r=this.resolve(e);return this.resolved[r]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return t.resolved[r]=!0,e})},requireSync:function e(t){var n=this.resolve(t);return r(n)},resolve:function e(){return 1249}},{ssr:!1}),Z={close:P.a.close,search:g.a.search,openCategory:g.a.openCategory,openOrgpage:g.a.openOrgpage,openBusinessFeedback:M.a.openBusinessFeedback,showPhoto:v.a.show,showBusinessPhotos:v.a.showBusinessPhotos,showCustomPhotos:v.a.showCustomPhotos,showAddBusinessPhotosForm:v.a.showAddBusinessPhotosForm,showAddToponymPhotosForm:v.a.showAddToponymPhotosForm,setLoadingPanorama:m.a.setLoadingPanorama,buildRoute:f.a.buildRoute,buildRouteTo:f.a.buildRouteTo,processMapObjectClick:f.a.processMapObjectClick,openCard:b.a.openCard,openPreloadedCard:b.a.openPreloadedCard,showInexactSearchResults:b.a.showInexactSearchResults,searchChain:g.a.searchChain,setMobileViewState:p.a.setMobileViewState,runPromoAction:h.a.runPromoAction,loadDiscovery:y.a.load,addVisitedId:g.a.addVisitedId,checkAuthorization:p.a.checkAuthorization,zoomToEntrances:g.a.zoomToEntrances,switchBusinessTab:g.a.switchBusinessTab,switchToponymTab:g.a.switchToponymTab,updateSelectedPostId:g.a.updateSelectedPostId,openAddObjectFeedback:M.a.openAddObjectFeedback,openEditObjectFeedback:M.a.openEditObjectFeedback,reduceStackByLastMode:p.a.reduceStackByLastMode,updateText:p.a.updateSearchText},K=Object(u.a)(c.b(function(e){var t,r,n=k.g(e,"search-result"),o=n[n.length-1],i=k.h(e,"orgpage"),a=k.g(e,"search"),c="search",u=a[a.length-1],l={request:{},from:"search"},d=u&&C.J(u)?u.results.filters:void 0;o&&(c="search-result",l={from:o.request.from,request:o.request,results:o.response,isLoading:!o.response&&!o.error,hasError:o.error,tab:o.tab,selectedPostId:o.selectedPostId,scrollTo:o.scrollTo,isPhoneInitiallyExpanded:o.isPhoneInitiallyExpanded});var p=k.e(e),h="search-result"===(null==p?void 0:p.mode)?null===(t=p.response)||void 0===t?void 0:t.items[0]:void 0;return Object(s.a)({mode:c,prevResult:h,searchRequest:null!==(r=null==u?void 0:u.request)&&void 0!==r?r:"search"===(null==o?void 0:o.request.from)?o.request:void 0,hideAdverts:Boolean(e.panoramas.isLayerEnabled||e.photos.isLayerEnabled||e.mrc.isLayerEnabled),mapLocation:e.map.location,isMapEditing:e.map.isEditing,isMapReady:e.map.ready,mapMode:e.map.mode,isSnapToRoundZoom:e.map.isSnapToRoundZoom,isActive:Boolean(l.results),orgpageResultId:i&&i.result?i.result.id:void 0,searchFilters:d,wide:k.r(e)},l)},Z),d.b),J=function(e){function t(t){var r;return(r=e.call(this,t)||this)._showPhotos=function(e){var t=r.props;t.showCustomPhotos(Object(s.a)(Object(s.a)({},e),{},{meta:Object(s.a)(Object(s.a)({},e.meta),{},{skipAdvert:C.A(t.results.items[0])})}))},r._onPostClick=function(e,t){r.props.updateSelectedPostId(e),r.setState({isSelectedPostCommentatorFocused:t})},r._onTypoClick=function(){var e=r.props;e.search(Object(s.a)(Object(s.a)({},e.searchRequest),{},{searchType:"TEXT",correctMisspell:0,context:null}))},r._onRouteClick=function(){var e=r.props,t=e.results.items[0];e.buildRouteTo({value:t.title,coords:e.request.coordinates||t.displayCoordinates,searchResult:t})},r._onDistanceClick=function(e,t){var n=r.props,o=n.results.items[0];n.buildRoute({points:[{value:t,coords:e},{value:o.title,coords:n.request.coordinates||o.displayCoordinates}],travelMode:"pedestrian"})},r._onShowAllBusinessesClick=function(){r.props.switchToponymTab("inside")},r._onCategoryClick=function(e,t){var n=r.props.results.items[0];r.props.openCategory(e,"toponym"===n.type?{stackAction:"push"}:void 0,t)},r._onEditClick=function(e){var t,n,o=r.props,s=o.results.items[0];switch(s.type){case"toponym":o.openEditObjectFeedback({result:s,context:{formContextId:"entrance"===s.kind||"house"===s.kind?"toponym.building":"toponym.default",searchText:null===(t=o.searchRequest)||void 0===t?void 0:t.text}});break;case"business":o.openBusinessFeedback({result:s,type:e,context:{formContextId:"organization.footer",searchText:null===(n=o.searchRequest)||void 0===n?void 0:n.text}})}},r._onClose=function(){var e=r.props;e.reduceStackByLastMode(),e.updateText("")},r._onPhotosClick=function(e,t){var n=r.props,o=n.results.items[0];"business"!==o.type?o.uri&&n.showPhoto({point:o.coordinates,uri:o.uri,description:o.address,origin:"preview_card",skipAdvert:"search"===n.mode,selectedIndex:e},t):n.showBusinessPhotos(o,Object(s.a)(Object(s.a)({},t),{},{origin:"preview_card",selectedIndex:e,skipAdvert:C.A(o),bookingData:w.g(o,{requestQuery:n.results.requestQuery})}))},r._onAddBusinessClick=function(){var e,t=r.props,n=t.results.items[0];t.openBusinessFeedback({type:"organization/add",result:n,context:{formContextId:"toponym"!==(null==n?void 0:n.type)||"entrance"!==n.kind&&"house"!==n.kind?"toponym.default":"toponym.building",searchText:null===(e=t.searchRequest)||void 0===e?void 0:e.text}})},r._onChainClick=function(){var e=r.props,t=e.results.items[0];e.searchChain({chain:t.chain,center:t.displayCoordinates})},r._onMovedClick=function(e){r.props.openCard({from:"search",id:e,origin:"moved"},{stackAction:"replace"})},r._onAddressClick=function(){var e,t,n=r.props,o=null===(e=n.results)||void 0===e?void 0:e.items[0];o&&!k.m(n.config)&&n.openCard({coordinates:"geoWhere"in o&&(null===(t=o.geoWhere)||void 0===t?void 0:t.coordinates)||o.coordinates,from:"whatshere",zoom:16},{stackAction:"push"})},r._openBusinessById=function(e){r.props.openCard({from:"search",id:e,origin:"places_inside"},{stackAction:"push"})},r._onDetailsClick=function(){var e=r.props,t=e.results.items[0];"business"===t.type&&e.openOrgpage({id:t.id},{requestId:e.results.requestId,requestCorrectedQuery:e.results.requestCorrectedQuery,preloadedData:t})},r._highlightResult=function(e){var t=r.props,n=t.results&&t.results.items[0];n&&C.e(n,e)||r.setState({highlightedResult:e})},r._unhighlightResult=function(e){var t=r.state.highlightedResult;t&&C.e(t,e)&&r.setState({highlightedResult:void 0})},r._onPlacemarkClick=function(e,t){var n=r.props,o=n.results.items[0];n.processMapObjectClick({point:{value:e.title,coords:e.displayCoordinates,searchResult:e},action:function(){if(o.id!==e.id)if(n.prevResult&&C.e(e,n.prevResult))n.close();else if("business"===e.type&&e.relatedAdvertType){var r,s,i=t||"relatedAdverts"in o&&(null===(r=o.relatedAdverts)||void 0===r?void 0:null===(s=r.nearbyOnMap)||void 0===s?void 0:s.some(function(t){return t.id===e.id}));n.openCard({from:"search",id:e.id,origin:"related-adverts-"+e.relatedAdvertType,serpId:n.results.requestSerpId},{stackAction:i?"push":"replace",mobileViewState:"mini"})}else n.openPreloadedCard(e)}})},r._addRelatedAdverts=function(e){var t=r.props;if(!t.results)return e;var n=t.results.items[0],o=t.prevResult,s=[].concat(e),i=C.B(n)&&C.H(n);return o&&!i&&(s=s.concat(C.s(o),o)),"toponym"!==n.type&&(s=s.concat(C.s(n))),s.filter(function(e){return e.id!==n.id})},r._collectResultsForMapView=function(){var e=[];return r.props.hideAdverts||(e=r._addRelatedAdverts(e)),e.filter(function(e){return!C.B(e)||C.B(e)&&!C.F(e)})},r._renderMobileShortcuts=function(){var e,t=r.props;null===(e=t.results)||void 0===e||e.items[0];return null},r._renderMapHighlightView=function(){var e=r.props;return e.results&&e.isActive&&!e.isMapEditing?i.createElement(X,{mapLocation:e.mapLocation,searchResults:e.results}):null},r._renderIngradFeatures=function(){var e,t=null===(e=r.props.results)||void 0===e?void 0:e.items[0],n=t&&C.B(t)?t:void 0,o=null==n?void 0:n.mapFeatures;return n&&o&&0!==o.length?i.createElement(i.Fragment,null,o.map(function(e,t){return i.createElement(V,{key:t,feature:e,result:n})}),i.createElement(H,null)):null},r._renderMapView=function(){var e=r.props;if(!e.results||e.isLoading||!e.isActive||e.isMapEditing||!e.isMapReady)return null;var t=e.results.items[0];if(!t||e.orgpageResultId&&e.orgpageResultId===t.id)return null;var n=r._collectResultsForMapView(),o=C.B(t)&&C.F(t);return i.createElement(W,{key:_.g(t),name:e.from,nodeState:C.i(e.results)},i.createElement(G,{results:n,selectedResult:o?void 0:t,mapLocation:e.mapLocation,onPlacemarkClick:r._onPlacemarkClick,highlightedResult:r.state.highlightedResult,highlightResult:r._highlightResult,unhighlightResult:r._unhighlightResult}),C.B(t)?i.createElement(Q,{result:t}):null,r._renderIngradFeatures())},r._renderMapSearchResults=function(){var e=r.props,t=r.props.results;if(!("search"===e.from&&(null==t?void 0:t.exactResult))||!t||e.isMapEditing)return null;var n=t.items[0],o=n&&C.B(n)&&C.F(n)?void 0:n;return i.createElement(U,{searchResponse:Object(s.a)(Object(s.a)({},t),{},{items:[]}),visitedBusinesses:[],highlightedResult:r.state.highlightedResult||void 0,highlightResult:r._highlightResult,unhighlightResult:r._unhighlightResult,selectedResult:o,hiddenResults:o?[o]:void 0,onResultClick:r._onPlacemarkClick,onRouteClick:e.buildRouteTo,mapLocation:e.mapLocation,isLoading:Boolean(e.isLoading)})},r._renderCard=function(e){var t,o=r.props,s=o.results,a=s.requestQuery,c=s.requestCorrectedQuery,u=o.tab,l={requestQuery:a,requestCorrectedQuery:c,onTypoClick:a!==c?r._onTypoClick:void 0,onRouteClick:r._onRouteClick,onDistanceClick:r._onDistanceClick,onEditClick:r._onEditClick,onBrandingClick:o.runPromoAction,onPhotosClick:r._onPhotosClick,onCategoryClick:r._onCategoryClick,onEntrancesClick:o.zoomToEntrances,checkAuthorization:o.checkAuthorization};switch(e.type){case"toponym":var d;return o.results.exactResult&&(d=o.results.items.filter(function(t){return!C.e(t,e)&&"direct"!==t.type})),i.createElement(L,Object(n.a)({},l,{tab:Object(S.g)(u)||"overview",result:e,additionalResults:d&&d.length>0?d:void 0,onAddBusinessClick:r._onAddBusinessClick,onAddObjectClick:o.openAddObjectFeedback,onBusinessesClick:o.openPreloadedCard,onShowAllBusinessesClick:r._onShowAllBusinessesClick,onShowAllResultsClick:o.showInexactSearchResults,onShowAddPhotosForm:o.showAddToponymPhotosForm,onAdditionalResultClick:o.openPreloadedCard,onTabChange:r.props.switchToponymTab}));case"business":return i.createElement(N,Object(n.a)({},l,{result:e,tab:null!==(t=Object(S.a)(u))&&void 0!==t?t:"overview",initialScrollTo:o.scrollTo,isPhoneInitiallyExpanded:o.isPhoneInitiallyExpanded,selectedPostId:o.selectedPostId,isSelectedPostCommentatorFocused:r.state.isSelectedPostCommentatorFocused,filters:o.searchFilters,serpId:o.results.requestSerpId,onDetailsClick:r._onDetailsClick,onChainClick:r._onChainClick,onSimilarResultClick:o.openPreloadedCard,onMovedClick:r._onMovedClick,onDiscoveryClick:o.loadDiscovery,onTabChange:o.switchBusinessTab,onPostClick:r._onPostClick,showPhoto:r._showPhotos,showAddPhotosForm:o.showAddBusinessPhotosForm,onPlacesInsideClick:r._openBusinessById,addToVisited:o.addVisitedId,onAddressClick:r._onAddressClick,onClose:r._onClose,onPlacemarkClick:function(e){return r._onPlacemarkClick(e,!0)}}));case"direct":return i.createElement(D,Object(n.a)({},l,{mini:!1,result:e}));default:return null}},r._renderPanelContent=function(){var e=r.props;if(e.hasError)return i.createElement(E.a,null,"Что-то пошло не так.\nПопробуйте обновить страницу\nили зайти позднее.");if(!e.results)return null;if(0===e.results.items.length)return i.createElement(E.a,null,"Ничего не нашлось. Уточните запрос или измените масштаб карты.");var t=e.results.items[0],n="kind"in t?t.kind:void 0;return i.createElement(F.a,{ga:"business"===t.type?t.ga:void 0},i.createElement(O.a,{name:"preview_card",nodeState:{mapMode:e.mapMode},actionSubtreeState:{uri:_.g(t),permalink:t.id,type:C.j(t),gml_id:t.analyticsId,logId:t.logId,reqid:t.requestId,query:e.results.requestCorrectedQuery,kind:n,mapMode:e.mapMode},key:_.g(t)+t.displayCoordinates.join(),subtreeMetrikaGoal:"search"===e.mode?"deepuse":void 0},r._renderCard(t),i.createElement(A.a,{type:"search_card_page"})))},r._renderCollapsedContent=function(){r.props;return null},r._renderPanel=function(){var e,t=r.props;if(!t.results&&!t.hasError&&!t.isLoading)return null;var n="search"===t.from?"serp_panel":t.from+"_panel",o=null===(e=t.results)||void 0===e?void 0:e.items[0],s=Boolean("business"===(null==o?void 0:o.type));return i.createElement(B.a,{name:t.mode,analyticsName:n,isLoading:t.isLoading,renderMiniCard:r._renderCollapsedContent,hidePanelExpandButton:s,onClose:s?void 0:r._onClose,view:t.wide?"wide":void 0,hideCloseButton:k.m(t.config)},r._renderPanelContent())},r.state={},r}return Object(o.a)(t,e),t.prototype.render=function(){return i.createElement(i.Fragment,null,this._renderPanel(),this._renderMapView(),this._renderMapSearchResults(),this._renderMapHighlightView(),this._renderMobileShortcuts())},t}(i.Component);J.displayName="SearchResultComponent",t.default=K(J)},1188:function(e,t){},130:function(e,t,r){"use strict";var n=r(6),o=r(4),s=r(176),i=r(8),a=r(197),c=r(16),u=r(273),l=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={},r}Object(n.a)(t,e);var r=t.prototype;return r.componentDidMount=function(){if(!t.isTimingLogged){var e=this.props,r=e.config.pageMode;"search-result"===e.config.pageMode&&(r="search"),"metro_page"===e.type&&(r="metro"),function(e){switch(e){case"routes_page":return"routes";case"org_page":return"orgpage";case"discovery_page":return"discovery";case"home_page":return"home";case"panorama_page":return"panoramas";case"photos_page":return"photos";case"search_card_page":case"search_list_page":return"search";case"traffic_page":return"traffic";case"masstransit_stop_page":case"masstransit_route_page":return"masstransit";case"catalog_page":return"catalog";case"metro_page":return"metro"}}(e.type)===r&&(t.isTimingLogged=!0,c.p(Object(u.a)(e.config))||this.setState({ready:s.a.getTimeToNow()}))}},r.render=function(){var e=this.props.type;return"undefined"==typeof window?null:o.createElement(a.a,{type:e,ready:this.state.ready,extraState:{show:window.timingsMarks&&e in window.timingsMarks?window.timingsMarks[e]:this.state.ready}})},t}(o.PureComponent);l.isTimingLogged=!1,t.a=Object(i.b)(l)},1550:function(e,t,r){"use strict";r.r(t);var n,o=r(10),s=r(19),i=r(16),a=r(42),c=r(109),u=r(115),l=r(46),d=r(25),p={openCard:function(e,t){return void 0===t&&(t={}),function(r,h,m){var v=m.config,f=h(),g=i.o(f)?a.a.replace:a.a.push;if("push"===t.stackAction?g=a.a.push:"replace"===t.stackAction?g=a.a.replace:"update"===t.stackAction&&(g=function(e){return function(t,r){var n=i.h(r(),"search-result");n&&t(a.a.update(Object(o.a)(Object(o.a)({},n),e)))}}),("search"===e.from||"poi"===e.from)&&e.uri&&l.i(e.uri))return r(u.a.fetchLineInfo({uri:e.uri,forceApply:!0}));if(t.response)r(g({mode:"search-result",request:e,tab:"overview",response:t.response}));else{if("poi"===e.from)r(g({mode:"search-result",mobileViewState:"mini",request:e,tab:"overview",mapLocationRequest:e.coordinates?{center:e.coordinates}:void 0}));else if("whatshere"===e.from)r(g({mode:"search-result",request:e,tab:"overview",mobileViewState:t.mobileViewState,mapLocationRequest:{center:e.coordinates,zoom:e.zoom}}));else if("search"===e.from){if(l.m(e.uri))return void r(u.a.fetchStopInfo({uri:e.uri}));r(g({mode:"search-result",request:e,tab:"overview",mobileViewState:t.mobileViewState}))}s.a.cancel(n),n=s.a.create(c.a.fetchSearchResult(e,v),{success:function(n){var s=i.h(h(),"search-result");if(s&&s.request===e){var c=null==n?void 0:n.items[0];if(!n||!c)return r(a.a.update(Object(o.a)(Object(o.a)({},s),{},{error:!0})));if(l.m(c.uri))return r(u.a.fetchStopInfo({uri:c.uri,stackAction:"replace",hotspotProperties:"poi"===e.from?e.hotspotProperties:void 0}));if("whatshere"===e.from&&"poi"===e.origin&&"toponym"===c.type&&"house"!==c.kind)return r(a.a.close()),void r(p.updateWhatsherePreview(e,n));var m=d.N(n);r(a.a.update(Object(o.a)(Object(o.a)({},s),{},{response:n,mapLocationRequest:m?Object(o.a)(Object(o.a)({},m),{},{forceFirstApply:t.forceZoomToResult,includeBounds:t.includeBounds}):void 0})))}},fail:function(t){var n=i.h(h(),"search-result");throw n&&n.request===e&&r(a.a.update(Object(o.a)(Object(o.a)({},n),{},{error:!0}))),t}})}}},openPreloadedCard:function(e,t){return void 0===t&&(t={}),function(r,n){var s;if(l.m(e.uri)&&!t.noMasstransitStopInfo)return r(u.a.fetchStopInfo({uri:e.uri,scrollTo:t.scrollTo}));if("business"===e.type&&e.forDisplayingOnMapOnly)return r(p.openCard({from:"search",id:e.id,origin:t.origin,uri:e.uri}));var c=n(),h=l.g(e),m="poi"===t.from&&h?{from:"poi",uri:h}:{from:"search",uri:h,id:e.id,origin:t.origin},v=d.Q(e),f=d.N(v),g={request:m,response:v,mapLocationRequest:f?Object(o.a)(Object(o.a)({},f),{},{includeBounds:t.includeBounds}):void 0,mobileViewState:t.mobileViewState,mode:"search-result",tab:t.tab||"overview",scrollTo:t.scrollTo,isPhoneInitiallyExpanded:t.isPhoneInitiallyExpanded},y=null!==(s=t.stackAction)&&void 0!==s?s:i.o(c)?"replace":"push";"push"===y?r(a.a.push(g)):"replace"===y&&r(a.a.replace(g))}},showInexactSearchResults:function(){return function(e,t){var r=i.h(t(),"search-result"),n=null==r?void 0:r.request;if(r&&r.response&&n&&"search"===n.from){var s={request:Object(o.a)(Object(o.a)({},n),{},{searchType:"TEXT"}),results:r.response};e(a.a.replace(Object(o.a)({mode:"search"},s)))}}},closeWhatsherePreview:function(){return{type:"EXTEND",payload:{whatsherePreview:null}}},updateWhatsherePreview:function(e,t){return function(r,o,i){var a=i.config,u={coordinates:e.coordinates,zoom:e.zoom,searchResults:t||null};r({type:"EXTEND",payload:{whatsherePreview:u}}),t||(s.a.cancel(n),n=s.a.create(c.a.loadWhatshere(e,a),{success:function(e){var t=o().whatsherePreview;if(t===u)return r(e?{type:"EXTEND",payload:{whatsherePreview:{coordinates:t.coordinates,zoom:t.zoom,searchResults:e}}}:{type:"EXTEND",payload:{whatsherePreview:null}})}}))}},updateBusinessesInside:function(e,t){return function(r){var n;r({type:"DEEP_EXTEND",payload:{search:{businessesInside:(n={},n[e.id]=t,n)}}})}}};t.default=p},163:function(e,t,r){"use strict";r(187);var n=r(4),o=r(7),s=r(9),i=Object(o.a)("something-wrong-view");t.a=function(e){return n.createElement(s.a,{name:"error"},n.createElement("div",{className:i()},n.createElement("div",{className:i("image")}),n.createElement("div",{className:i("text")},e.children)))}},187:function(e,t,r){},2039:function(e,t){},214:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r(157),o=r(69),s=864e5;function i(e,t,r){if(arguments.length<2)throw new TypeError("2 arguments required, but only "+arguments.length+" present");var i=Object(o.a)(e,r),a=Object(o.a)(t,r),c=i.getTime()-Object(n.a)(i),u=a.getTime()-Object(n.a)(a);return Math.round((c-u)/s)}},219:function(e,t,r){"use strict";var n=r(27);t.a=Object(n.a)(function(){return r.e("discovery").then(r.bind(null,526))},{load:!0,highlightOrganization:!0,unhighlightOrganization:!0})},237:function(e,t,r){"use strict";r.d(t,"f",function(){return s}),r.d(t,"b",function(){return l}),r.d(t,"e",function(){return i}),r.d(t,"d",function(){return a}),r.d(t,"c",function(){return u}),r.d(t,"a",function(){return d}),r.d(t,"g",function(){return p});var n=r(10),o=r(214);function s(e,t,r){return (function(params){return "Забронировать от "+params.price+" / "+params.count+" "+(params.count % 10 === 1 && params.count % 100 !== 11 ? "ночь" :(params.count % 10 > 1 && params.count % 10 < 5 && (params.count % 100 < 10 || params.count % 100 > 20) ? "ночи" : "ночей"));})({count:Object(o.a)(r,t),price:e})}function i(e){return"no-room"===e.type?"Не удалось найти предложения на выбранные даты":"При запросе цен произошла ошибка. Проверьте соединение с интернетом и обновите страницу"}function a(e){return Object(n.a)(Object(n.a)({},e.data&&"type"in e.data?{error:e.data.type}:e.data||{}),{},{dateFrom:e.dateFrom||void 0,dateTo:e.dateTo||void 0,personsAmount:e.personsAmount})}function c(e){return{id:e.toString(),text:(function(params){return params.count+" "+(params.count % 10 === 1 && params.count % 100 !== 11 ? "взрослый" :"взрослых");})({count:e})}}function u(){return[1,2,3,4,5].map(c)}function l(e){return e.getFullYear()+"-"+function(e,t){var r=(e.getMonth()+1).toString();return t?r.padStart(2,"0"):r}(e,!0)+"-"+function(e,t){var r=e.getDate().toString();return t?r.padStart(2,"0"):r}(e,!0)}function d(e){return Boolean(e.references&&e.references.some(function(e){return e.scope.startsWith("ytravel_")}))}function p(e,t){return void 0===t&&(t={}),d(e)?{requestId:e.requestId,requestQuery:t.requestQuery}:void 0}},239:function(e,t,r){"use strict";var n=r(27);t.a=Object(n.a)(function(){return r.e("stories-preview").then(r.bind(null,527))},{changeStory:!0,updateStoryVisitedData:!0})},301:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r(195),o=r(233);function s(e){var t=e[0][1],r=[e[1][0]-e[0][0],e[1][1]-t],s=Math.tan(Object(n.a)(t+90)/2),i=Math.tan(Object(n.a)(r[1])/2),a=Math.max((-s*s-s*i)/(s*i-1),0),c=.5*Math.log(a),u=2*(Math.atan(Math.exp(c))-.25*Math.PI);return{center:[(e[0][0]+e[1][0])/2,Object(o.a)(u)],span:r}}},361:function(e,t,r){"use strict";var n=r(27);t.a=Object(n.a)(function(){return r.e("ingrad-actions").then(r.bind(null,724))},{openCatalog:!0,openCollection:!0,openRoute:!0,updateFilter:!0,highlightRoute:!0})},399:function(e,t,r){"use strict";var n=r(29),o={getContent:function(e,t){return Object(n.a)("discovery",{query:{id:e,discoveryBranch:t.query.discoveryBranch}},t)},getStory:function(e,t){return Object(n.a)("discovery/getStory",{query:{id:e,locale:t.locale}},t)}};t.a=o},432:function(e,t,r){"use strict";var n=r(175),o=r(99),s=r(219),i=r(358),a=r(361),c=r(399),u=r(239),l={runPromoAction:function(e,t){return function(r,l,d){var p=d.config;switch(e.type){case"search":r(o.a.search({origin:t,text:e.searchText,displayText:e.displayText||e.searchText,searchType:"TEXT",rawParams:e.params}));break;case"videoUrl":r(n.a.show({videoUrl:e.url,name:e.name,description:e.description,share:e.share,textSize:"l",origin:t}));break;case"externalLink":window.open(e.href,e.target);break;case"discovery":r(s.a.load(e.id));break;case"covid":e.isolation?r(i.a.openIsolation()):r(i.a.open());break;case"ingrad":r(a.a.openCatalog());break;case"story":c.a.getStory(e.id,p).then(function(e){r(u.a.changeStory(e,"editorial"))})}}}};t.a=l},499:function(e,t,r){"use strict";var n=r(6),o=(r(500),r(4)),s=r(11),i=r(7),a=r(84),c=Object(i.a)("masstransit-empty-schedule-view"),u={openEditObjectFeedback:a.a.openEditObjectFeedback},l=s.b(function(e){return{config:e.config}},u),d=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._onAddFeedbackClick=function(){var e=t.props;e.feedbackItem&&e.openEditObjectFeedback({type:"transit/stop/route/incorrect",result:e.feedbackItem,context:{formContextId:"masstransit.default"}})},t}return Object(n.a)(t,e),t.prototype.render=function(){var e=this.props;return o.createElement("div",{className:c()},e.collapsed?null:o.createElement("div",{className:c("title-list")},"Расписание"),o.createElement("div",{className:c("empty")},o.createElement("div",{className:c("empty-text")},e.collapsed?"Нет информации о расписании":"Пока нет информации"),e.feedbackItem?o.createElement("div",{className:c("empty-control"),onClick:this._onAddFeedbackClick},"Добавить"):null))},t}(o.Component);t.a=l(d)},500:function(e,t,r){},69:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r(24);function o(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var r=Object(n.a)(e,t);return r.setHours(0,0,0,0),r}},869:function(e,t,r){"use strict";var n=r(6),o=r(4),s=r(8),i=r(789),a=r(126),c="maps-ga",u=null,l=function(e){function t(){var t;return(t=e.apply(this,arguments)||this)._initIframe=function(){var e=t.props;u||((u=window.document.createElement("iframe")).src=e.config.staticHost+"/static/v18/iframe-google-analytics.html",u.sandbox.add("allow-scripts","allow-same-origin"),u.frameBorder="0",u.style.userSelect="none",window.document.body.appendChild(u))},t._init=function(){t.props.ga&&t._sendMessage("init",{id:t.props.ga.id})},t._sendMessage=function(e,t){var r,n;null===(r=u)||void 0===r||null===(n=r.contentWindow)||void 0===n||n.postMessage({type:c+"/"+e,payload:t},"*")},t._reachGoal=function(e){var r,n=null===(r=t.props.ga)||void 0===r?void 0:r.goals;n&&n[e]&&t._sendMessage("reachGoal",{goalId:n[e]})},t._onMessage=function(e){var r=e.data.type,n=(void 0===r?"":r).split("/"),o=n[0],s=n[1];if(o===c)switch(s){case"ready":t._init()}},t}Object(n.a)(t,e);var r=t.prototype;return r.componentDidMount=function(){this._initIframe()},r.render=function(){var e=this.props;return e.ga?o.createElement(i.a,{value:{reachGaGoal:this._reachGoal}},e.children,o.createElement(a.a,{type:"message",listener:this._onMessage})):e.children},t}(o.Component);l.displayName="GoogleAnalyticsComponent",t.a=Object(s.b)(l)}}]);