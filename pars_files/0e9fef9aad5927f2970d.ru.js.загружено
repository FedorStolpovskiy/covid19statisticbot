(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["bookmarks"],{109:function(e,r,t){"use strict";var n=t(37),o=t(10),a=t(2978),i=t(301),s=t(2995),c=t(29),u=t(25),l="search_",d="",p={fetch:function(e,r){return Object(c.a)("search",{query:m(e,r)},r).then(function(e){return d=e.requestId,e})},batchFetch:function(e,r){var t={requestQueries:e.map(function(e){return m(e,r)})};return Object(c.a)("search/batch",{body:t},r).then(function(e){var r,t=null===(r=e.find(function(e){return Boolean(e)}))||void 0===r?void 0:r.requestId;return t&&(d=t),e})},fetchSearchResult:function(e,r,t){if(void 0===t&&(t={}),"poi"===e.from){if(e.uri)return p.loadPoiByUri(e.uri,r,t).then(function(r){return Object(o.a)(Object(o.a)({},r),{},{items:r.items.map(function(r,t){return Object(o.a)(Object(o.a)({},r),{},{hotspotProperties:e.hotspotProperties,displayCoordinates:e.coordinates&&0===t?e.coordinates:r.displayCoordinates})})})});if(e.coordinates)return p.loadPoiByCoordinates(e.coordinates,r,t).then(function(r){if(u.D(e.hotspotProperties)){var t=r.items[0],n={title:"Парковка",description:t.address,hotspotProperties:e.hotspotProperties,id:t.id,type:t.type,kind:t.kind,requestId:t.requestId,analyticsId:t.analyticsId,address:t.address,coordinates:t.coordinates,displayCoordinates:t.displayCoordinates,encodedCoordinates:t.encodedCoordinates,stops:t.stops,panorama:t.panorama,photos:t.photos,uri:t.uri};r.items=[n]}return r})}if("whatshere"===e.from)return p.loadWhatshere(e,r);var n=Object(o.a)(Object(o.a)({},e),{},{count:1,searchType:"TEXT"});return n.uri&&(n.mode="uri"),p.fetch(n,r)},prepareChainSearchRequest:function(e,r){return p.fetch({count:1,kind:"locality",text:Object(a.a)(e.center,{reverse:!0}),origin:"chain-city"},r).then(function(r){var t={searchType:"TEXT",displayText:e.chain.name,text:"chain_id:("+e.chain.id+")",origin:e.origin||"chain"},n=r.bounds;if(n){var o=Object(i.a)(n);t.center=o.center,t.span=o.span}return t})},loadPoiByCoordinates:function(e,r,t){return void 0===t&&(t={}),p.fetch({text:Object(a.a)(e,{reverse:!0}),count:1,origin:t.origin||"poi",clientId:t.clientId,snippets:f(r)},r)},loadPoiByUri:function(e,r,t){return void 0===t&&(t={}),p.fetch({mode:"uri",uri:e,count:1,origin:t.origin||"poi",clientId:t.clientId,snippets:f(r)},r)},loadWhatshere:function(e,r){var t=e.origin,o=Object(n.a)(e,["origin"]);return p.fetch({pin:!0,text:Object(a.a)(o.coordinates,{reverse:!0}),zoom:o.zoom,span:[.001,.001],count:1,origin:t||"poi",addBuildingGeometry:e.addGeometry},r).then(function(e){var r=e.items[0];return r?("poi"===t&&(r.displayCoordinates=r.coordinates),e):null}).catch(function(){return null})}};function f(e){return e.search.snippets.filter(function(e){return"related_adverts/1.x"!==e&&"related_adverts_1org/1.x"!==e})}function m(e,r){var t=e.clientId||"maps",n=e.origin?t+"-"+e.origin:t,i={text:e.text,lang:r.locale,yandex_gid:r.userRegion.id,client_id:e.clientId,origin:n,results:e.count,ctx:e.context,mode:e.mode,lr:e.lr,uri:e.uri,business_oid:Array.isArray(e.id)?e.id.join(","):e.id,z:e.zoom,sort:e.sort,business_filter:e.filters,autoscale:e.autoscale,distinguish_layers:e.distinguishLayers,correct_misspell:e.correctMisspell,geocoder_kind:e.kind,skip:e.skip,rspn:e.restrictSpan,rearr:e.rearr,groupchains_advert:e.groupchains_advert,relev_ranking_formula:e.relev_ranking_formula,maxadv:e.maxadv,eventsBranch:r.query.eventsBranch};return e.addBuildingGeometry&&(i.search_geometry="2"),e.sortOrigin&&(i.sort_origin=e.sortOrigin.join()),e.center&&(i.ll=e.center.join()),e.span&&(i.spn=e.span.join()),e.bbox&&(i.bbox=e.bbox.join("~")),e.snippets?i.snippets=e.snippets:i.snippets=r.search.snippets,r.experiments.ui.groupSameCompanies&&(i.snippets=i.snippets.concat("collapsed_orgs/1.x")),r.experiments.ui.geosearchPinPriority&&(i.snippets=i.snippets.concat("pin_priority/1.x")),r.experiments.ui.geosearchAdditionalPins&&(i.snippets=i.snippets.concat("pin_info/1.x")),i.snippets=i.snippets.join(),e.direct&&(i=Object(o.a)(Object(o.a)({},i),r.advert.direct.params)),e.pin&&(i.geocoder_pin=1),e.type&&(i.type=e.type.join()),e.routeCoordinates&&e.bounds&&e.routeCoordinates.some(function(r){return Object(s.a)(e.bounds,r)})&&(i.business_rll=e.routeCoordinates.map(function(e){return Object(a.a)(e,{fractionDigits:5})}).join("~")),e.clientUsecase&&(i.client_usecase=e.clientUsecase),e.suggestReqid&&"form"===e.origin&&(i.suggest_reqid=e.suggestReqid),e.serpId&&(i.serpid=e.serpId),(e.parentReqId||d||r.searchPreloadedResults)&&(i.parent_reqid=e.parentReqId||d||r.searchPreloadedResults.requestId),e.geoWhere&&(i.geowhere=[].concat(e.geoWhere).reverse().join()),e.businessMode&&(i.business_mode=e.businessMode),"boolean"==typeof e.businessShowClosed&&(i.business_show_closed=e.businessShowClosed?1:0),Object(o.a)(Object(o.a)(Object(o.a)({},i),e.rawParams),function(e){var r=Object(o.a)({},e.experiments.geoSearchParams||{});e.experiments.ui.centralBankCollaboration&&(r.search_experimental_business_show_exp_features="cbrf");var t=e.experiments.boxes;t&&(r["test-buckets"]=t);return Object.keys(e.query).forEach(function(t){t.startsWith(l)&&(r[t]=e.query[t])}),r}(r))}r.a=p},1191:function(e,r,t){"use strict";t.r(r);var n=t(6),o=t(4),a=t.n(o),i=t(11),s=t(42),c=t(83),u=t(9),l=t(2961),d=t(16),p=t(26),f=t(224),m=t(129),h=t(45),k=t(125),v=t(22),b=t(98),g=Object(p.a)({resolved:{},chunkName:function(){return"bookmarks-panel"},isReady:function(e){var r=this.resolve(e);return!1!==this.resolved[r]&&!!t.m[r]},importAsync:function(){return t.e("bookmarks-panel").then(t.bind(null,1283))},requireAsync:function(e){var r=this,t=this.resolve(e);return this.resolved[t]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return r.resolved[t]=!0,e})},requireSync:function e(r){var n=this.resolve(r);return t(n)},resolve:function e(){return 1283}}),_=Object(p.a)({resolved:{},chunkName:function(){return"bookmarks-panel"},isReady:function(e){var r=this.resolve(e);return!1!==this.resolved[r]&&!!t.m[r]},importAsync:function(){return t.e("bookmarks-panel").then(t.bind(null,1254))},requireAsync:function(e){var r=this,t=this.resolve(e);return this.resolved[t]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return r.resolved[t]=!0,e})},requireSync:function e(r){var n=this.resolve(r);return t(n)},resolve:function e(){return 1254}}),y=Object(p.a)({resolved:{},chunkName:function(){return"bookmarks-panel"},isReady:function(e){var r=this.resolve(e);return!1!==this.resolved[r]&&!!t.m[r]},importAsync:function(){return t.e("bookmarks-panel").then(t.bind(null,1293))},requireAsync:function(e){var r=this,t=this.resolve(e);return this.resolved[t]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return r.resolved[t]=!0,e})},requireSync:function e(r){var n=this.resolve(r);return t(n)},resolve:function e(){return 1293}}),E=Object(p.a)({resolved:{},chunkName:function(){return"bookmarks-panel"},isReady:function(e){var r=this.resolve(e);return!1!==this.resolved[r]&&!!t.m[r]},importAsync:function(){return t.e("bookmarks-panel").then(t.bind(null,1255))},requireAsync:function(e){var r=this,t=this.resolve(e);return this.resolved[t]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return r.resolved[t]=!0,e})},requireSync:function e(r){var n=this.resolve(r);return t(n)},resolve:function e(){return 1255}}),O=Object(p.a)({resolved:{},chunkName:function(){return"bookmarks-panel"},isReady:function(e){var r=this.resolve(e);return!1!==this.resolved[r]&&!!t.m[r]},importAsync:function(){return t.e("bookmarks-panel").then(t.bind(null,1082))},requireAsync:function(e){var r=this,t=this.resolve(e);return this.resolved[t]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return r.resolved[t]=!0,e})},requireSync:function e(r){var n=this.resolve(r);return t(n)},resolve:function e(){return 1082}}),I=Object(p.a)({resolved:{},chunkName:function(){return"bookmarks-panel"},isReady:function(e){var r=this.resolve(e);return!1!==this.resolved[r]&&!!t.m[r]},importAsync:function(){return t.e("bookmarks-panel").then(t.bind(null,60))},requireAsync:function(e){var r=this,t=this.resolve(e);return this.resolved[t]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return r.resolved[t]=!0,e})},requireSync:function e(r){var n=this.resolve(r);return t(n)},resolve:function e(){return 60}}),P=Object(p.a)({resolved:{},chunkName:function(){return"bookmarks-stops-panel"},isReady:function(e){var r=this.resolve(e);return!1!==this.resolved[r]&&!!t.m[r]},importAsync:function(){return t.e("bookmarks-stops-panel").then(t.bind(null,1328))},requireAsync:function(e){var r=this,t=this.resolve(e);return this.resolved[t]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return r.resolved[t]=!0,e})},requireSync:function e(r){var n=this.resolve(r);return t(n)},resolve:function e(){return 1328}}),C=Object(p.a)({resolved:{},chunkName:function(){return"bookmarks-lines-panel"},isReady:function(e){var r=this.resolve(e);return!1!==this.resolved[r]&&!!t.m[r]},importAsync:function(){return t.e("bookmarks-lines-panel").then(t.bind(null,1256))},requireAsync:function(e){var r=this,t=this.resolve(e);return this.resolved[t]=!1,Promise.resolve(this.importAsync(e)).then(function(e){return r.resolved[t]=!0,e})},requireSync:function e(r){var n=this.resolve(r);return t(n)},resolve:function e(){return 1256}}),w="bookmarks",S={changeTab:m.a.changeTab,close:s.a.close,startAction:m.a.startAction,removeFolder:m.a.removeFolder,updateFolderTags:m.a.updateFolderTags,setMobileViewState:v.a.setMobileViewState},j=i.b(function(e){var r=d.h(e,"bookmarks");return{config:e.config,isPanelOpen:Boolean(r),isLoaded:Boolean(e.bookmarks.places&&e.bookmarks.rootFolder),rootFolder:e.bookmarks.rootFolder,isActionInProgress:Boolean(e.bookmarks.currentAction&&e.bookmarks.currentAction.inProgress),hasInitError:e.bookmarks.hasInitError,hasPlacesInitError:e.bookmarks.hasPlacesInitError,tab:r?r.tab:"places",activeFolderId:r?r.activeFolderId:null,places:e.bookmarks.places,stops:e.masstransitBookmarks.stops,lines:e.masstransitBookmarks.lines,hasMasstransitInitError:e.masstransitBookmarks.hasInitError,isStopActionInProgress:Object.values(e.masstransitBookmarks.actions).some(function(e){return["add_stop","remove_stop"].includes(e.type)&&e.inProgress}),isLineActionInProgress:Object.values(e.masstransitBookmarks.actions).some(function(e){return["add_line","remove_line"].includes(e.type)&&e.inProgress}),view:null==r?void 0:r.view}},S),M=[{key:"places",title:"Места"},{key:"stops",title:"Остановки"},{key:"lines",title:"Маршруты"}],R=function(e){function r(){var r;return(r=e.apply(this,arguments)||this)._getActiveFolder=function(){var e=r.props;return e.activeFolderId&&e.rootFolder&&c.f(e.activeFolderId,e.rootFolder)||null},r._onFolderEditClick=function(e){r.props.startAction({type:"edit_folder",data:{id:e.id,values:e,isShownDescription:Boolean(e.description)}})},r._onFolderDeleteClick=function(e){var t=r.props;t.activeFolderId&&t.close(),t.removeFolder({folderId:e.id})},r._onFolderToggleShowOnMap=function(e){var t=r.props,n=e.tags||[];n.includes(k.a.FOLDER_TAGS.SHOW_ON_MAP)?n=n.filter(function(e){return e!==k.a.FOLDER_TAGS.SHOW_ON_MAP}):n.push(k.a.FOLDER_TAGS.SHOW_ON_MAP),t.updateFolderTags({folderId:e.id,tags:n})},r._renderCollapsedPanelContent=function(){var e=r.props,t=r._getActiveFolder(),n=t?c.l(t,e.config):"Закладки";return o.createElement(I,{view:"large",title:n,renderLeftContent:t?function(){return r._renderFolderOptionsButton(t,!0)}:void 0})},r._renderTabs=function(){var e=r.props;return o.createElement(h.a,{position:"top",order:1},o.createElement(f.a,{tab:e.tab,tabs:M,onTabChange:function(r){return e.changeTab(r.key)}}))},r._renderFolderOptionsButton=function(e,t){var n,a=r.props,i=e.children.length,s=e.id===k.a.FAVORITES_FOLDER_ID;return o.createElement(O,{onEditClick:function(){r._onFolderEditClick(e),t&&a.setMobileViewState("expanded")},onDeleteClick:function(){return r._onFolderDeleteClick(e)},onToggleShowOnMap:function(){return r._onFolderToggleShowOnMap(e)},isShownOnMap:Boolean(null===(n=e.tags)||void 0===n?void 0:n.includes(k.a.FOLDER_TAGS.SHOW_ON_MAP)),isFavorite:s,deleteConfirmContent:i?(function(params){return "Вместе со списком "+(params.count % 10 === 1 && params.count % 100 !== 11 ? "удалится" :"удалятся")+" "+params.count+" "+(params.count % 10 === 1 && params.count % 100 !== 11 ? "закладка" :(params.count % 10 > 1 && params.count % 10 < 5 && (params.count % 100 < 10 || params.count % 100 > 20) ? "закладки" : "закладок"))+".\nЭто действие необратимо.";})({count:i}):"Список будет удалён.\nЭто действие необратимо."})},r._renderPanelHeader=function(){r.props;var e=r._getActiveFolder();return e?o.createElement(E,{folder:e,onClose:void 0,renderOptionsButton:function(){return r._renderFolderOptionsButton(e)}}):o.createElement(h.a,{position:"top",order:0,disabled:!0},o.createElement(I,{title:"Закладки",onClose:void 0,view:"small",big:!0}))},r._renderPanel=function(){var e=r.props,t=!1,n=null;switch(e.tab){case"places":t=e.isLoaded&&e.isActionInProgress||!e.isLoaded&&!e.hasInitError,n=e.isLoaded?o.createElement(g,{onFolderDeleteClick:r._onFolderDeleteClick,onFolderEditClick:r._onFolderEditClick,onToggleShowOnMap:r._onFolderToggleShowOnMap}):e.hasInitError?o.createElement(_,null):null;break;case"stops":t=e.stops&&e.isStopActionInProgress||!e.stops&&!e.hasMasstransitInitError,n=e.stops?o.createElement(P,null):e.hasMasstransitInitError?o.createElement(_,null):null;break;case"lines":t=e.lines&&e.isLineActionInProgress||!e.lines&&!e.hasMasstransitInitError,n=e.lines?o.createElement(C,null):e.hasMasstransitInitError?o.createElement(_,null):null}var a=o.createElement(o.Fragment,null,r._renderPanelHeader(),"places"===e.tab&&e.activeFolderId?null:r._renderTabs(),n),i=Boolean(e.view),s=e.view?c.j(e.view):e.activeFolderId||"bookmarks_panel";return o.createElement(b.a,{key:s,name:w,analyticsName:"bookmarks_panel",isLoading:t,renderMiniCard:i?void 0:r._renderCollapsedPanelContent,miniCardOnly:!0,onClose:i?e.close:void 0,closeOnSwipeDown:i,hideToggleButton:i},i?o.createElement(y,null):a)},r._renderCounter=function(){var e=r.props.rootFolder;if(!e)return null;var t=c.g(e).length;return o.createElement(u.a,{name:"bookmarks_counter",nodeState:{count:t}})},r}return Object(n.a)(r,e),r.prototype.render=function(){return o.createElement(o.Fragment,null,this.props.isPanelOpen?this._renderPanel():null,o.createElement(l.a,null),this._renderCounter())},r}(o.Component);R.displayName="BookmarksComponent",r.default=j(R)},128:function(e,r,t){"use strict";var n,o=t(6),a=t(4),i=[],s=!1;function c(e){0===(i=i.filter(function(r){return r!==e})).length&&n&&n.disconnect()}var u=function(e){function r(){return e.apply(this,arguments)||this}Object(o.a)(r,e);var t=r.prototype;return t.componentDidMount=function(){var e,r;s||(e=this.props.listener,(r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)&&(n||(n=new r(function(e){var r=e.find(function(e){return"class"===e.attributeName});if(r){var t=r.target.getAttribute("class");t&&(s=t.includes("_font_loaded"))&&setTimeout(function(){i.forEach(function(e){e(),c(e)})},1)}})).observe(window.document.getElementsByTagName("body")[0],{attributes:!0,attributeFilter:["class"]}),i.push(e)))},t.componentWillUnmount=function(){c(this.props.listener)},t.render=function(){return null},r}(a.PureComponent);r.a=u},1552:function(e,r,t){"use strict";t.r(r);var n,o,a,i,s=t(37),c=t(10),u=t(125),l=t(799),d=t(83),p=t(46),f=t(16),m=t(42),h=t(118),k=t(784),v=t(0),b=t(159),g=function(e,r,t){var n=t.config,o=r().bookmarks,a=o.places,i=a?Object.values(a).reduce(function(e,r){return r&&!o.searchResults.hasOwnProperty(r.coords.join(","))?e.concat(r):e},[]):[];l.a.loadPlacesSearchResults(i,n).then(function(t){var n=r().bookmarks;e({type:"EXTEND",payload:{bookmarks:Object(c.a)(Object(c.a)({},n),{},{searchResults:Object(c.a)(Object(c.a)({},n.searchResults),t)})}})})};function _(e,r,t){var n=t.config;return n.authorization?i||(i=u.a.getLib(n).then(function(e){return e.getPlacesManager()}).then(function(t){Object(k.a)(t,n);var o=function(){var o=r();e({type:"EXTEND",payload:{bookmarks:Object(c.a)(Object(c.a)({},o.bookmarks),{},{places:w(t.getAll())})}}),f.h(o,"bookmarks")&&g(e,r,{config:n})};return o(),t.on("places-update",o),a=t,t}).catch(function(){e({type:"DEEP_EXTEND",payload:{bookmarks:{hasPlacesInitError:!0}}})})):(e({type:"DEEP_EXTEND",payload:{bookmarks:{hasPlacesInitError:!0}}}),Promise.reject("User is not authorized."))}function y(e,r){var t,n=null===(t=r.authorization)||void 0===t?void 0:t.uid;if(n){var o=v.a.get("bookmarks_root_folder");o&&o.uid===n?v.a.set("bookmarks_root_folder",Object(b.a)(o,e)):v.a.set("bookmarks_root_folder",Object(c.a)({uid:n},e))}}function E(e,r,t){var n=r(),o=t||n.bookmarks.rootFolder&&d.g(n.bookmarks.rootFolder).filter(function(e){return!n.bookmarks.searchResults.hasOwnProperty(e.uri)});o&&0!==o.length&&l.a.loadSearchResults(o,n.config).then(function(t){var o=r().bookmarks,a=Object(c.a)(Object(c.a)({},o.searchResults),t);e({type:"DEEP_EXTEND",payload:{bookmarks:{searchResults:a}}});var i=o.rootFolder;if(i){var s=Object.entries(a).reduce(function(e,r){var t,n,o=r[0],a=r[1];if(!a)return e;var s=d.c(o,i),l=s&&d.e(s.id,i);return(null==l?void 0:null===(t=l.tags)||void 0===t?void 0:t.includes(u.a.FOLDER_TAGS.SHOW_ON_MAP))?Object(c.a)(Object(c.a)({},e),{},((n={})[o]=a.displayCoordinates,n)):e},{});e({type:"DEEP_EXTEND",payload:{bookmarks:{cachedCoordinates:s}}}),y({cachedCoordinates:s},n.config)}})}function O(e,r,t){var a=t.config;return a.authorization?o||(o=u.a.getLib(a).then(function(e){return e.getBookmarksManager()}).then(function(t){Object(k.a)(t,a);var o=function(){var n=t.getRootFolder(),o=r(),i=50,s=n.children.map(function(e){var r;if((null===(r=e.tags)||void 0===r?void 0:r.includes(u.a.FOLDER_TAGS.SHOW_ON_MAP))&&i>0||e.id===u.a.FAVORITES_FOLDER_ID){var t=e.children.slice(0,i);return i-=t.length,Object(c.a)(Object(c.a)({},e),{},{children:t})}return{id:e.id,title:e.title,children:[]}});if(y({rootFolder:Object(c.a)(Object(c.a)({},n),{},{children:s})},a),e({type:"EXTEND",payload:{bookmarks:Object(c.a)(Object(c.a)({},o.bookmarks),{},{rootFolder:n})}}),f.h(o,"bookmarks"))E(e,r);else{var l=o.bookmarks.cachedCoordinates;E(e,r,d.i(n,u.a.FOLDER_TAGS.SHOW_ON_MAP).filter(function(e){return!l.hasOwnProperty(e.uri)}))}};return o(),t.on("bookmarks-update",o),n=t,t}).catch(function(){e({type:"DEEP_EXTEND",payload:{bookmarks:{hasInitError:!0}}})})):(e({type:"DEEP_EXTEND",payload:{bookmarks:{hasInitError:!0}}}),Promise.reject("User is not authorized."))}function I(e){return function(r,t,o){var i=o.config;if(O(r,t,{config:i}),n){var s=function(e,r,t){return function(n){var o,a=n.inProgress,i=n.error;t({type:"DEEP_EXTEND",payload:{bookmarks:{actions:(o={},o[e]={type:r,inProgress:a,error:i},o)}}})}}(e.id,e.type,r);s({inProgress:!0}),e.action(n,a).then(function(t){var n;s({inProgress:!1}),null===(n=e.successCallback)||void 0===n||n.call(e,r,t)},function(){return s({inProgress:!1,error:!0})})}}}function P(e,r){return function(t){if(!n||!a)throw new Error("Bookmarks manager is not ready.");t({type:"DEEP_EXTEND",payload:{bookmarks:{currentAction:{inProgress:{inProgress:!0}.inProgress}}}}),e(n,a).then(function(e){var n;t({type:"DEEP_EXTEND",payload:{bookmarks:{currentAction:null}}}),null==r||null===(n=r.successCallback)||void 0===n||n.call(r,t,e)},function(){t({type:"DEEP_EXTEND",payload:{bookmarks:{currentAction:null,hasActionError:!0}}})})}}var C={initPlacesManager:function(){return _},initBookmarksManager:function(){return O},openPanel:function(e){var r=void 0===e?{}:e,t=r.force,n=void 0!==t&&t,o=r.tab,a=void 0===o?"places":o;return function(e,r,t){var o=t.config,i=r(),s=0===i.stack.length,u={bookmarks:Object(c.a)(Object(c.a)({},i.bookmarks),{},{isLayerEnabled:!0})};if(!s&&!n)return e({type:"EXTEND",payload:u}),_(e,r,{config:o}),void O(e,r,{config:o});f.h(i,"bookmarks")||(e(m.a.push({mode:"bookmarks",activeFolderId:null,tab:a,mobileViewState:"expanded"},u)),_(e,r,{config:o}).then(function(){return g(e,r,{config:o})}),O(e,r,{config:o}).then(function(){E(e,r)}))}},setActiveItem:function(e,r){return void 0===r&&(r={}),function(t,n,o){var a=o.config,i=n().bookmarks.searchResults["uri"in e?e.uri:e.coords.join(",")];i?t(h.a.openPreloadedCard(i,{mobileViewState:r.mobileViewState})):(d.n(e)?l.a.loadPlaceSearchResult(e,a):l.a.loadSearchResult(e,a)).then(function(e){e&&t(h.a.openPreloadedCard(e,{mobileViewState:r.mobileViewState}))})}},setSearchResult:function(e,r){return function(t,n){var o=n(),a={bookmarks:Object(c.a)(Object(c.a)({},o.bookmarks),{},{searchResults:o.bookmarks.searchResults||{}})};a.bookmarks.searchResults[e.join(",")]=r,t({type:"EXTEND",payload:a})}},setActiveFolder:function(e){return function(r,t){var n=t(),o=f.h(n,"bookmarks")||{activeFolderId:null,tab:"places"},a={bookmarks:Object(c.a)(Object(c.a)({},n.bookmarks),{},{isLayerEnabled:!0})};r(m.a.push(Object(c.a)(Object(c.a)({mode:"bookmarks"},o),{},{activeFolderId:e}),a))}},setHighlightedBookmark:function(e){return{type:"DEEP_EXTEND",payload:{bookmarks:{highlightedId:e}}}},startAction:function(e){return function(r,t){var n=t(),o=n.bookmarks,a=d.m(e);if(a){var i=f.h(n,"bookmarks")||{activeFolderId:null,tab:"places"};r(m.a.push(Object(c.a)(Object(c.a)({mode:"bookmarks",mobileViewState:"expanded"},i),{},{view:a})))}else r({type:"EXTEND",payload:{bookmarks:Object(c.a)(Object(c.a)({},o),{},{currentAction:{data:e}})}})}},updateViewBookmarkItem:function(e,r){return function(t,n){var o=n(),a=f.h(o,"bookmarks");if(null==a?void 0:a.view){var i=Object(c.a)(Object(c.a)({},a.view),e);t(r?m.a.push(Object(c.a)(Object(c.a)({},a),{},{view:i})):m.a.update(Object(c.a)(Object(c.a)({},a),{},{view:i})))}}},cancelAction:function(){return{type:"DEEP_EXTEND",payload:{bookmarks:{currentAction:null}}}},addBookmark:function(e){var r=e.actionId,t=e.data,n=e.folderId,o=e.index;return I({type:"add_bookmark",id:r,action:function(e){return e.addBookmark(t,{parentId:n,index:o})}})},addBookmarkToNewFolder:function(e){var r=e.actionId,t=e.bookmark,n=e.folder;return I({type:"add_bookmark_to_new_folder",id:r,action:function(e){return e.addBookmarkToNewFolder(t,n)},successCallback:function(e){return e(m.a.close())}})},removeBookmark:function(e){var r=e.actionId,t=e.bookmarkId;return I({type:"remove_bookmark",id:r,action:function(e){return e.removeChild(t)}})},addPlaceImmediate:function(e){var r=e.placeId,t=e.data;return function(){if(!a)throw new Error("Places manager is not ready.");a.addPlace(t,r)}},moveBookmark:function(e){var r=e.bookmarkId,t=e.folderId;return P(function(e){return e.moveChild(r,t)})},renameBookmark:function(e){var r=e.bookmarkId,t=e.title;return P(function(e){return e.updateBookmark(r,{title:t})},{successCallback:function(e){return e(m.a.close())}})},commentBookmark:function(e){var r=e.actionId,t=e.bookmarkId,n=e.comment;return I({type:"comment_bookmark",id:r,action:function(e){return e.updateBookmark(t,{comment:n})}})},moveBookmarkToNewFolder:function(e,r){return P(function(t){return t.moveChildToNewFolder(e,r)},{successCallback:function(e){return e(m.a.close())}})},removeFolder:function(e){var r=e.folderId;return P(function(e){return e.removeChild(r)})},editFolder:function(e){var r=e.folderId,t=Object(s.a)(e,["folderId"]);return P(function(e){return e.updateFolder(r,t)},{successCallback:function(e){return e(m.a.close())}})},updateFolderTags:function(e){var r=e.folderId,t=e.tags;return P(function(e){return e.updateFolder(r,{tags:t})})},createFolder:function(e){return P(function(r){return r.addFolder(e)},{successCallback:function(e,r){e(m.a.close()),e(C.setActiveFolder(r.folderId))}})},removePlace:function(e){var r=e.placeId;return P(function(e,t){return t.removePlace(r)})},addPlace:function(e){var r=e.placeId,t=e.data;return P(function(e,n){return n.addPlace(t,r)})},editPlace:function(e){var r=e.placeId,t=e.data;return P(function(e,n){return n.updatePlace(r,t)})},closeActionError:function(){return{type:"DEEP_EXTEND",payload:{bookmarks:{hasActionError:!1}}}},restoreFromUrl:function(){return function(e,r,t){var n=t.config,o=n.query.bookmarks;if("true"!==o&&o.id!==u.a.ROOT_FOLDER_ID){var a=_(e,r,{config:n});a.then(function(){return g(e,r,{config:n})});var i=O(e,r,{config:n});i.then(function(){E(e,r)});var s=function(r,t){l.a.searchByBookmarkUri(r,t).then(function(r){e(h.a.openPreloadedCard(r))})};o.pid?a.then(function(r){if(r){var t=w(r.getAll())[o.pid];t&&p.b(t.coords)===o.uri?e(C.setActiveItem(t)):o.uri&&s(o.uri,n)}}).catch(function(){return s(o.uri,n)}):o.uri?i.then(function(r){if(r)if(o.id){var t=d.b(o.id,r.getRootFolder());if(!t)throw new Error("Bookmark not found");var a=d.e(t.id,r.getRootFolder());a&&a.id!==u.a.FAVORITES_FOLDER_ID&&e(C.setActiveFolder(a.id)),e(C.setActiveItem(t))}else s(o.uri,n)}).catch(function(){return s(o.uri,n)}):e(C.setActiveFolder(o.id))}else{if(!n.authorization)return;e(C.openPanel())}}},changeTab:function(e){return function(r,t){var n=t(),o=f.h(n,"bookmarks");o&&r(m.a.update(Object(c.a)(Object(c.a)({},o),{},{tab:e})))}}};function w(e){var r={};return e[u.a.HOME_ID]&&(r[u.a.HOME_ID]=e[u.a.HOME_ID]),e[u.a.WORK_ID]&&(r[u.a.WORK_ID]=e[u.a.WORK_ID]),r}r.default=C},2125:function(e,r,t){},2127:function(e,r,t){e.exports=t.p+"_/60dc6ace1b36f31315dd3fd94eaedb72.svg"},2128:function(e,r,t){e.exports=t.p+"_/2b4ff067a51dc84d8c5c4400505e02d4.svg"},2129:function(e,r,t){e.exports=t.p+"_/04e73b1964416099ab5eb78f9fab1599.svg"},2130:function(e,r,t){e.exports=t.p+"_/b990d722d1c870f60a5fb9d16f78b39d.svg"},2131:function(e,r,t){e.exports=t.p+"_/6d17cd569f44cafa58b4a5c6e738d64f.svg"},2132:function(e,r,t){e.exports=t.p+"_/d0fdffd2b3ecb347448fe495ece480ff.svg"},2133:function(e,r,t){e.exports=t.p+"_/430c9ca260eb663c0923fe5abdf5042a.svg"},2134:function(e,r,t){e.exports=t.p+"_/25cfd5b4c4f6c31d84d72d708b2b45f5.svg"},2135:function(e,r,t){e.exports=t.p+"_/11ebb6a5de99d04dc5519df9dd0cb318.svg"},2136:function(e,r,t){},224:function(e,r,t){"use strict";var n=t(6),o=(t(225),t(4)),a=t(54),i=t(9),s=t(7),c=t(128),u=Object(s.a)("tabs-select-view"),l=function(e){function r(r){var t;(t=e.call(this,r)||this)._alignPad=function(){var e,r,n=t.props,o=n.tab;if(o){var a=null!==(e=null===(r=t._tabRefs[o])||void 0===r?void 0:r.current)&&void 0!==e?e:null;if(a){var i=a.scrollWidth,s=a.offsetLeft;t.setState({padWidth:i,padTranslateX:s})}if(!n.disableAnimation){var c,u,l=n.tabs.findIndex(function(e){return e.key===o});null===(c=(u=t)._setScrollPosition)||void 0===c||c.call(u,l)}}},t._renderTabTitle=function(e){return o.createElement(i.a,{key:e.key,name:"tab",nodeState:{tab:e.key},logClick:!0},o.createElement("div",{className:u("title",{name:e.key,selected:t.props.tab===e.key}),onClick:function(){return t.props.onTabChange(e)}},o.createElement("div",{className:u("label"),ref:t._tabRefs[e.key]},e.title),e.count?o.createElement("div",{className:u("counter")},e.count):null))},t._renderPad=function(){return o.createElement("div",{className:u("pad",{inited:void 0!==t.state.padTranslateX}),style:{width:t.state.padWidth,transform:t.state.padTranslateX?"translateX("+t.state.padTranslateX+"px)":void 0}})};var n=r.tabs.map(function(e){return e.key});return t.state={},t._tabRefs=n.reduce(function(e,r){return e[r]=o.createRef(),e},{}),t}Object(n.a)(r,e);var t=r.prototype;return t.componentDidMount=function(){setTimeout(this._alignPad,0)},t.componentDidUpdate=function(e){e.tab!==this.props.tab&&this._alignPad()},t.render=function(){var e,r=this,t=this.props;if(0===t.tabs.length)return null;var n=t.tabs.findIndex(function(e){return e.key===t.tab});return o.createElement(i.a,{name:"tabs"},o.createElement("div",{className:u({wide:t.wide})},o.createElement("div",{className:u("titles")},o.createElement(a.a,{clickStep:2,itemsGap:0,buttonSize:"m",padding:4,renderInScrollContainer:this._renderPad,scrollContainerStyle:{position:"relative"},setPositionRef:function(e){return r._setScrollPosition=e},initialPosition:t.disableAnimation&&-1!==n?n:void 0,disableOldBrowsersWorkaround:!0},t.tabs.map(this._renderTabTitle)),null===(e=t.children)||void 0===e?void 0:e.call(t,{refs:this._tabRefs}),o.createElement(c.a,{listener:this._alignPad}))))},r}(o.Component);r.a=l},225:function(e,r,t){},230:function(e,r,t){"use strict";var n=t(27);r.a=Object(n.a)(function(){return t.e("masstransit-bookmarks").then(t.bind(null,528))},{initMasstransitManager:!0,addStop:!0,addLine:!0,removeStop:!0,removeLine:!0,setHighlightedStopId:!0})},235:function(e,r,t){"use strict";var n=t(27);r.a=Object(n.a)(function(){return t.e("preview").then(t.bind(null,536))},{showUriPreview:!0,showOrgPreview:!0,showStopPreview:!0,showPreloadedPreview:!0,hidePreview:!0,cancelHidePreview:!0,showRealtyPreview:!0})},2961:function(e,r,t){"use strict";var n=t(6),o=t(4),a=t(11),i=t(14),s=t(129),c=t(111),u=t(235),l=t(125),d=t(83),p=t(160),f=t(966),m=t(75),h=t(8),k=t(16),v=t(115),b=t(230),g=(t(2136),t(7)),_=t(34),y=t(30),E=t(78),O=t(562),I=Object(g.a)("masstransit-bookmark-placemark-view"),P=function(e){function r(){return e.apply(this,arguments)||this}return Object(n.a)(r,e),r.prototype.render=function(){var e=this.props,r=e.stop.transportTypes,t=e.stop.transportTypes?E.x({Types:r,type:r[0]}):void 0;return o.createElement(p.default,{name:"masstransit_bookmark_placemark",logClick:!0},o.createElement(_.default,{coordinates:e.stop.coordinates,onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,zIndex:e.hover?y.a.hover:y.a.bookmarks},o.createElement("div",{className:I({small:"small"===e.size,hover:e.hover}),"data-id":e.stop.stopId},o.createElement(O.a,{className:I("icon"),size:"small",vehicleType:t}))))},r}(o.PureComponent),C=Object(h.b)(P),w=t(538),S=t(77),j=t(435),M={setActiveItem:s.a.setActiveItem,setHighlightedBookmark:s.a.setHighlightedBookmark,initPlacesManager:s.a.initPlacesManager,initBookmarksManager:s.a.initBookmarksManager,initMasstransitManager:b.a.initMasstransitManager,processMapObjectClick:c.a.processMapObjectClick,fetchStopInfo:v.a.fetchStopInfo,setHighlightedStopId:b.a.setHighlightedStopId,showUriPreview:u.a.showUriPreview,showStopPreview:u.a.showStopPreview,hidePreview:u.a.hidePreview},R=Object(i.a)(a.b(function(e){var r=k.g(e,"bookmarks"),t=r[r.length-1],n=k.g(e,"routes"),o=n[n.length-1]||m.s(e);return{rootFolder:e.bookmarks.rootFolder,places:e.bookmarks.places,highlightedBookmarkId:e.bookmarks.highlightedId,highlightedStopId:e.masstransitBookmarks.highlightedStopId,activeFolderId:t?t.activeFolderId:null,activeSearchResult:w.b(e),searchResults:e.bookmarks.searchResults,cachedCoordinates:e.bookmarks.cachedCoordinates,mode:k.d(e),isMapEditing:e.map.isEditing,routePoints:m.F(o,e.bookmarks),mapLocation:e.map.location,stops:B(e)}},M),h.b),D=12,T=10,A=0,F=function(e){function r(){var r;return(r=e.apply(this,arguments)||this)._onPlaceClick=function(e){var t=r.props,n=e.id;t.setHighlightedBookmark(null),t.processMapObjectClick({point:{value:d.k(n,t.config),coords:e.coords},action:function(){t.setActiveItem(e,{mobileViewState:"mini"})}})},r._onBookmarkClick=function(e){var t=r.props,n=t.searchResults[e.uri],o=t.cachedCoordinates[e.uri];t.setHighlightedBookmark(null),t.processMapObjectClick({point:{value:(null==n?void 0:n.title)||"",coords:(null==n?void 0:n.displayCoordinates)||o,uri:(null==n?void 0:n.uri)||""},action:function(){t.setActiveItem(e,{mobileViewState:"mini"})}})},r._onBookmarkMouseEnter=function(e){var t=r.props;if(!t.config.uatraits.isTouch){var n="uri"in e?e.uri:void 0,o=n?t.searchResults[n]:void 0,a=n&&t.cachedCoordinates[n]||(null==o?void 0:o.displayCoordinates);n&&a&&(A=setTimeout(function(){t.showUriPreview(n,a)})),t.setHighlightedBookmark(e.id)}},r._onBookmarkMouseLeave=function(){clearTimeout(A);var e=r.props;e.setHighlightedBookmark(null),e.hidePreview()},r._onMasstransitBookmarkMouseEnter=function(e){var t=r.props;t.config.uatraits.isTouch||(t.showStopPreview(e.stopId,e.coordinates),t.setHighlightedStopId(e.stopId))},r._onMasstransitBookmarkMouseLeave=function(){var e=r.props;e.setHighlightedStopId(null),e.hidePreview()},r._onMasstransitBookmarkClick=function(e){var t=r.props;t.setHighlightedStopId(null),t.processMapObjectClick({point:{value:e.title||"",coords:e.coordinates},action:function(){t.fetchStopInfo({id:e.stopId,clearLine:!0})}})},r._renderPlaceMarker=function(e){var t=r.props;if(!t.places||t.routePoints.some(function(r){return r.serviceType===e}))return null;var n=t.places[e];return n?t.activeSearchResult&&"placeId"in t.activeSearchResult&&t.activeSearchResult.placeId===n.id?null:o.createElement(f.default,{key:e,bookmark:n,hover:t.highlightedBookmarkId===n.id,size:t.mapLocation.zoom<D?"small":"normal",onClick:function(){return r._onPlaceClick(n)},onMouseEnter:function(){return r._onBookmarkMouseEnter(n)},onMouseLeave:function(){return t.setHighlightedBookmark(null)}}):null},r._renderBookmarksMarkers=function(){var e=r.props,t=e.rootFolder;if(!t)return null;var n=e.activeFolderId&&t.children.find(function(r){return r.id===e.activeFolderId}),a=n&&"children"in n?n.children:d.i(t,l.a.FOLDER_TAGS.SHOW_ON_MAP);return e.activeSearchResult&&(a=a.filter(function(r){return e.searchResults[r.uri]!==e.activeSearchResult})),a.map(function(n){var a,i;return e.cachedCoordinates[n.uri]||e.searchResults[n.uri]?o.createElement(f.default,{key:n.id,bookmark:n,coordinates:(null===(a=e.searchResults[n.uri])||void 0===a?void 0:a.displayCoordinates)||e.cachedCoordinates[n.uri],icon:j.e(null===(i=d.e(n.id,t))||void 0===i?void 0:i.icon,e.config),searchResult:e.searchResults[n.uri],hover:e.highlightedBookmarkId===n.id,size:e.mapLocation.zoom<D?"small":"normal",onClick:function(){return r._onBookmarkClick(n)},onMouseEnter:function(){return r._onBookmarkMouseEnter(n)},onMouseLeave:r._onBookmarkMouseLeave}):null})},r._renderMasstransitBookmarksMarkers=function(){var e=r.props;return!e.stops||e.mapLocation.zoom<T?null:e.stops.map(function(t){return o.createElement(C,{key:t.recordId,stop:t,size:e.mapLocation.zoom<D?"small":"normal",hover:t.stopId===e.highlightedStopId,onClick:function(){return r._onMasstransitBookmarkClick(t)},onMouseEnter:function(){return r._onMasstransitBookmarkMouseEnter(t)},onMouseLeave:r._onMasstransitBookmarkMouseLeave})})},r}Object(n.a)(r,e);var t=r.prototype;return t.componentDidMount=function(){var e=this.props;e.config.authorization&&(e.initPlacesManager(),e.initBookmarksManager(),e.initMasstransitManager())},t.render=function(){var e=this.props;return e.isMapEditing?null:o.createElement(p.default,{name:"bookmarks"},this._renderMasstransitBookmarksMarkers(),this._renderPlaceMarker("home"),this._renderPlaceMarker("work"),this._renderBookmarksMarkers(),e.places&&Object.keys(e.places).length>0?o.createElement(S.a,{chunk:"search-result"}):null)},r}(o.Component);function B(e){var r=[],t=k.h(e,"masstransit");return t&&t.stops.data&&t.stops.data.id&&(r=[t.stops.data.id]),t&&t.line.data&&t.line.data.activeThread&&(r=t.line.data.activeThread.features.reduce(function(e,r){return"coordinates"in r&&e.push(r.id),e},r)),e.masstransitBookmarks.stops?e.masstransitBookmarks.stops.filter(function(e){return!r.includes(e.stopId)}):null}r.a=R(F)},30:function(e,r,t){"use strict";t.d(r,"a",function(){return n});var n={screenshotDialog:99999,ruler:8030,editing:8030,hover:8020,active:8e3,search:{active:8e3,subtitle:7500,title:7e3,base:6500,dot:6e3},dialog:2e3,usermaps:{placemark:3e3,line:2e3,polygon:1e3},discovery:580,routes:550,routePins:{waypoint:8e3,masstransit:7900},masstransitStop:8001,moving:500,masstransitLineStop:510,home:451,work:450,default:400,tooltip:352,masstransitRegion:350,bookmarks:300,minimum:1}},301:function(e,r,t){"use strict";t.d(r,"a",function(){return a});var n=t(195),o=t(233);function a(e){var r=e[0][1],t=[e[1][0]-e[0][0],e[1][1]-r],a=Math.tan(Object(n.a)(r+90)/2),i=Math.tan(Object(n.a)(t[1])/2),s=Math.max((-a*a-a*i)/(a*i-1),0),c=.5*Math.log(s),u=2*(Math.atan(Math.exp(c))-.25*Math.PI);return{center:[(e[0][0]+e[1][0])/2,Object(o.a)(u)],span:t}}},34:function(e,r,t){"use strict";t.r(r);var n=t(87),o=t(6),a=(t(71),t(4)),i=t(5),s=t(7),c=t(31),u=t(30),l=t(62),d=300,p=Object(s.a)("map-placemark"),f=function(){},m=function(e){function r(r){var t;return(t=e.call(this,r)||this)._container=document.createElement("div"),t._isDragged=!1,t._initCursor=function(){t._updateCursor(),t._marker.group().on("dragStart",function(){t._isDragged=!0,t._container.style.cursor="grabbing",t.props.map.container.style.cursor="grabbing"}).on("dragEnd",function(){t._isDragged=!1,t._updateCursor(),t.props.map.container.style.cursor="default"})},t._updateCursor=function(){t._container.style.cursor=t.props.onClick||t.props.onMouseEnter||t.props.draggable?"pointer":"default"},t._addMapEventHandlers=function(e){var r={dragStart:e.onDragStart,dragMove:e.onDragMove,dragEnd:e.onDragEnd};Object.keys(r).forEach(function(e){r[e]&&t._mapEventHandlers.on(e,function(){r[e]({coordinates:t._marker.coordinates})})})},t._onClick=function(e){e.stopPropagation();var r=t.props,n=r.onClick||f,o=r.onFastClick||f,a=r.onDoubleClick||f;t._clickTimer?(a(),window.clearTimeout(t._clickTimer),t._clickTimer=void 0):(o(),t._clickTimer=window.setTimeout(function(){n(),t._clickTimer=void 0},d))},t._container.className=p(),t._marker=r.map.createMarker({coordinates:r.coordinates,element:t._container,options:{draggable:r.draggable,zIndex:r.zIndex||u.a.default,disableRoundCoordinates:r.disableRoundCoordinates,blockEvents:r.blockEvents}}),t._mapEventHandlers=t._marker.group(),t}Object(o.a)(r,e);var t=r.prototype;return t.componentDidMount=function(){var e=this.props;this._initCursor(),this._addMapEventHandlers(e),e.map.addMarker(this._dataSourceId,this._marker)},t.componentWillUnmount=function(){this.props.map.destroyed||(this._mapEventHandlers.offAll(),this.props.map.removeMarker(this._dataSourceId,this._marker),this._marker.destroy(),this._isDragged&&(this.props.map.container.style.cursor="default")),window.clearTimeout(this._clickTimer)},t.componentDidUpdate=function(e){var r=e.dataSourceId?e.dataSourceId:l.d.DEFAULT_MARKERS;r!==this._dataSourceId&&(this.props.map.removeMarker(r,this._marker),this.props.map.addMarker(this._dataSourceId,this._marker));var t=this.props;t.coordinates!==e.coordinates&&this._marker.setCoordinates(t.coordinates),e.draggable!==t.draggable&&this._marker.toggleDrag(t.draggable||!1),e.zIndex!==t.zIndex&&this._marker.setZIndex(t.zIndex||u.a.default),e.disableRoundCoordinates!==t.disableRoundCoordinates&&this._marker.toggleRoundCoordinates(t.disableRoundCoordinates||!1),t.onDragStart===e.onDragStart&&t.onDragMove===e.onDragMove&&t.onDragEnd===e.onDragEnd||(this._mapEventHandlers.offAll(),this._addMapEventHandlers(t)),e.draggable===t.draggable&&e.onClick===t.onClick||this._updateCursor()},t.render=function(){var e=this.props,r=a.createElement("div",{className:p("wrapper",{"non-interactive":e.nonInteractive}),onClick:this._onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseMove:e.onMouseMove},e.children);return i.createPortal(r,this._container)},Object(n.a)(r,[{key:"_dataSourceId",get:function(){return this.props.dataSourceId||l.d.DEFAULT_MARKERS}}]),r}(a.PureComponent);r.default=Object(c.b)({shouldWait:!0})(m)},435:function(e,r,t){"use strict";t.d(r,"b",function(){return s}),t.d(r,"d",function(){return a}),t.d(r,"a",function(){return u}),t.d(r,"c",function(){return c}),t.d(r,"e",function(){return l}),t.d(r,"f",function(){return d});var n=t(33),o=t(422),a="bookmark-filled",i=[a],s=[a,"landmark","street","fire-station","heart","medical","malls","hypermarket","marketplace","giftshop","restaurants","cafe","fast-food","pizzeria","wine","tableware","pub","auto","gasstation","driving-school","airports","beach","photo","travel-agency","mountain","park","viewpoint","circus","concert-hall","stage","baby-shop","university","construction-tool","hairdressers","fitness","petshop","pet-playground","auto-parts","playground"],c="#ffcc00",u=[c,"#ff7733","#3cb200","#7373e6","#b43dcc","#198cff","#ff4433","#4d4d4d","#d38de0","#998e82","#69bfaa","#2056ec"];function l(e,r){var t=(null==e?void 0:e.split(":"))||[],s=t[0],u=void 0===s?a:s,l=t[1];return{url:(i.includes(u)?o.a({name:u,size:24},r):n.e({type:"rubrics",name:u,size:"normal"},r))||o.a({name:a,size:24},r),name:u,color:(null==l?void 0:l.toLowerCase())||c}}function d(e){return e.name+":"+e.color}},45:function(e,r,t){"use strict";var n=t(6),o=(t(73),t(4)),a=t(7),i=t(85),s=t(61),c=1,u=Object(a.a)("sticky-wrapper"),l=function(e){function r(r){var t;return(t=e.call(this,r)||this)._containerRef=o.createRef(),t._isDisabled=function(e){return void 0===e&&(e=t.props),e.disabled||!e.scrollId},t._registerContainer=function(){var e,r=t.props,n=null!==(e=r.order)&&void 0!==e?e:c;if(t._containerRef.current){if(!r.scrollId)return;r.registerStickyElement(n,t._containerRef,t._onPositionUpdate),r.updateStickyElement(n,t._containerRef.current.offsetHeight),t._unregisterContainer=function(){r.unregisterStickyElement(n)}}},t._onIntersectionChange=function(e){t.setState({fixed:!e})},t._onPositionUpdate=function(e){var r,n;t.setState({position:e}),null===(r=(n=t.props).onOffsetChange)||void 0===r||r.call(n,e)},t._onIntersectionParentBoundaries=function(e){t.setState({reachedParentBoundaries:!e})},t.state={fixed:!1,reachedParentBoundaries:!1,position:0},t}Object(n.a)(r,e);var t=r.prototype;return t.componentDidMount=function(){this._isDisabled()||this._registerContainer()},t.componentDidUpdate=function(e,r){var t=this.props,n=this.state,o=t.children!==e.children;(t.children&&o||this._isDisabled(e)&&!this._isDisabled())&&this._registerContainer(),t.onFixedChange&&r.fixed!==n.fixed&&t.onFixedChange(n.fixed)},t.componentWillUnmount=function(){var e;null===(e=this._unregisterContainer)||void 0===e||e.call(this)},t.render=function(){var e,r=this.props,t=this.state;return r.children?this._isDisabled()?"always"===this.props.border?o.createElement("div",{className:u("pseudo-sticky")},r.children):r.children:o.createElement(o.Fragment,null,"top"===r.position?o.createElement(s.a,{threshold:0,style:t.position?{transform:"translateY(-"+t.position+"px)"}:void 0,className:u("observer-target"),onChange:this._onIntersectionChange},null):null,o.createElement("div",{className:u({position:r.position,fixed:t.fixed,header:r.header,border:null!==(e=r.border)&&void 0!==e?e:"auto",wide:r.wide,"reached-boundaries":t.reachedParentBoundaries,empty:!r.children}),style:{top:this.state.position,zIndex:r.zIndex},ref:this._containerRef},o.createElement(s.a,{threshold:0,style:t.position?{transform:"translateY(-"+t.position+"px)"}:void 0,className:u("observer-target",{absolute:!0}),onChange:this._onIntersectionParentBoundaries},null),r.children)):null},r}(o.Component);r.a=Object(i.b)(l)},562:function(e,r,t){"use strict";var n=t(4),o=t(8),a=t(12),i=t(33),s={bus:"bus-stop",minibus:"bus-stop",tramway:"tram-stop",trolleybus:"bus-stop",suburban:"railway-station",funicular:"funicular",cable:"cableway",underground:"subway-fallback",water:"pier",aeroexpress:"aeroexpress"};r.a=Object(o.b)(function(e){var r=e.undergroundCity&&i.e({type:"masstransit",name:e.vehicleType+"-"+e.undergroundCity,size:e.size},e.config)||i.e({type:"rubrics",name:e.vehicleType&&s[e.vehicleType]||"fallback",size:e.size},e.config);return r?n.createElement(a.a,{url:r,className:e.className}):null})},71:function(e,r,t){},73:function(e,r,t){},77:function(e,r,t){"use strict";var n=t(6),o=t(4),a=t(8),i=t(208),s=function(e){function r(){return e.apply(this,arguments)||this}Object(n.a)(r,e);var t=r.prototype;return t.componentDidMount=function(){var e=this;if(!this.props.config.experiments.ui.noPreloadChunk){var r=function(){return i.a(e.props.chunk)};this.props.immediately?r():setTimeout(r,3e3)}},t.render=function(){return null},r}(o.Component);r.a=Object(a.b)(s)},799:function(e,r,t){"use strict";var n=t(10),o=t(2978),a=t(83),i=t(46),s=t(109),c={},u={},l={loadSearchResults:function(e,r){for(var t={},n=e.slice(),o=function e(){if(0===n.length)return Promise.resolve();var o=n.shift();if(t[o.uri])return e();var a=p(o,r);return a.then(function(e){return t[o.uri]=e}),a.then(e)},a=[],i=0;i<5;i++)a.push(o());return Promise.all(a).then(function(){return t})},loadPlacesSearchResults:function(e,r){var t=e.filter(function(e){return["home","work"].includes(e.id)}),n=t.map(function(e){return d(e,r)});return Promise.all(n).then(function(e){return e.reduce(function(e,r,n){return e[t[n].coords.join(",")]=r,e},{})})},searchByBookmarkUri:function(e,r){var t=i.k(e);return(t?f(i.e(e),r):function(e,r){return s.a.fetch({mode:"uri",uri:e,origin:"bookmark"},r)}(e,r)).then(function(r){var n=r.items[0];if(!n)throw new Error("Empty search result. Bookmark uri: "+e);return t||(n.uri=e),n})},loadSearchResult:p,loadPlaceSearchResult:d};function d(e,r){var t=e.coords.join(",");return c[t]?c[t]:(c[t]=f(e.coords,r).then(function(o){var i=o.items[0];if(!i)throw new Error("Empty search result. Place coords: "+t);return delete c[t],Object(n.a)(Object(n.a)({},i),{},{placeId:e.id,title:a.k(e.id,r),description:i.address})}).catch(function(){return delete c[t],{placeId:e.id,id:"-1",seoname:"",requestId:"",type:"toponym",coordinates:e.coords,displayCoordinates:e.coords,encodedCoordinates:Object(o.a)(e.coords),title:a.k(e.id,r),description:e.addressLine,address:e.addressLine,kind:"other",analyticsId:"",geoId:-1,uri:""}}),c[t])}function p(e,r){return u[e.uri]?u[e.uri]:(u[e.uri]=l.searchByBookmarkUri(e.uri,r).then(function(r){return delete u[e.uri],r}).catch(function(){return delete u[e.uri],null}),u[e.uri])}function f(e,r){return e?s.a.fetch({mode:"reverse",type:["geo"],center:e,count:1,origin:"bookmark"},r):Promise.reject(new Error("Invalid pin-uri"))}r.a=l},83:function(e,r,t){"use strict";var n=t(10),o=t(2977),a=t(46),i=t(125),s=t(151);t.d(r,"f",function(){return h}),t.d(r,"b",function(){return k}),t.d(r,"c",function(){return v}),t.d(r,"d",function(){return b}),t.d(r,"e",function(){return g}),t.d(r,"g",function(){return _}),t.d(r,"i",function(){return y}),t.d(r,"h",function(){return E}),t.d(r,"k",function(){return d}),t.d(r,"p",function(){return O}),t.d(r,"o",function(){return I}),t.d(r,"a",function(){return P}),t.d(r,"n",function(){return C}),t.d(r,"l",function(){return w}),t.d(r,"j",function(){return S}),t.d(r,"m",function(){return j});var c,u={"ymapsbm1://pin":"pin","ymapsbm1://geo":"toponym","ymapsbm1://org":"business"},l=500;function d(e,r){return{home:"Дом",work:"Работа"}[e]}var p=function(e){return c||(c=i.a.getLib(e).then(function(e){return e.getSearchHistoryManager()})),c};function f(e,r){return"children"in r?r.children.map(function(r){return f(e,r)}).find(Boolean)||null:e(r)?r:null}function m(e,r){return"children"in r?e(r)?r:r.children.find(function(r){return"children"in r&&Boolean(m(e,r))})||null:null}function h(e,r){return m(function(r){return r.id===e},r)}function k(e,r){return f(function(r){return r.id===e},r)}function v(e,r){return f(function(r){return r.uri===e},r)}function b(e,r){return v(a.g(e),r)||function(e,r){return f(function(r){var t=a.e(r.uri);return a.k(r.uri)&&null!==t&&Object(o.a)(t,e.coordinates)},r)}({coordinates:e.displayCoordinates},r)}function g(e,r){return m(function(r){return r.children.some(function(r){return e===r.id})},r)}function _(e){return"children"in e?e.children.reduce(function(e,r){return e.concat(_(r))},[]):[e]}function y(e,r){return e.children.reduce(function(e,t){var n;return(null===(n=t.tags)||void 0===n?void 0:n.includes(r))?e.concat(_(t)):e},[])}function E(e){var r=e.uri,t=Object.keys(u).find(function(e){return r.includes(e)});return t?u[t]:"unknown"}function O(e,r){var t=e.text.trim();r.authorization&&t&&p(r).then(function(r){r.addRecord({text:t,uri:e&&e.uri})}).catch(function(){})}function I(e){return e.authorization?Promise.race([p(e).then(function(e){return e.getRecords()}),s.a(l)]).catch(function(){return[]}):Promise.resolve([])}function P(e){return e.authorization?p(e).then(function(e){return e.deleteRecords()}):Promise.reject()}function C(e){return"coords"in e}function w(e,r){return e.id===i.a.FAVORITES_FOLDER_ID?"Избранное":e.title}function S(e){return("create_folder"===e.type||"edit_folder"===e.type)&&e.isShownIconSelection?"select_folder_icon":e.type}function j(e){switch(e.type){case"create_folder":return Object(n.a)({type:e.type,values:{title:"",description:""}},e.data);case"edit_folder":return Object(n.a)({type:e.type},e.data);case"rename_bookmark":return{type:e.type,bookmark:e.bookmark}}return null}},966:function(e,r,t){"use strict";t.r(r);var n=t(13),o=t(6),a=(t(2125),t(4)),i=t(7),s=t(12),c=t(83),u=t(435),l=t(46),d=t(9),p=t(34),f=t(30),m=t(2127),h=t.n(m),k=t(2128),v=t.n(k),b=t(2129),g=t.n(b),_=t(2130),y=t.n(_),E=t(2131),O=t.n(E),I=t(2132),P=t.n(I),C=t(2133),w=t.n(C),S=t(2134),j=t.n(S),M=t(2135),R=t.n(M),D={home:{normal:h.a,small:v.a,active:g.a},work:{normal:y.a,small:O.a,active:P.a},bookmark:{normal:w.a,small:j.a,active:R.a}},T=Object(i.a)("bookmark-placemark"),A=function(e){function r(){var r;return(r=e.apply(this,arguments)||this)._getCoordinates=function(){var e=r.props;return F(e)?e.bookmark.coords:"pin"===c.h(e.bookmark)?l.e(e.bookmark.uri):e.coordinates},r._getZIndex=function(){var e=r.props;return e.draggable?f.a.editing:e.hover?f.a.hover:e.active?f.a.active:F(e)?f.a[e.bookmark.id]:f.a.bookmarks},r._getAnalyticsProps=function(){var e=r.props;return F(e)?{name:"place_marker",nodeState:{type:e.bookmark.id,coords:e.bookmark.coords}}:{name:"bookmark_marker",nodeState:{type:c.h(e.bookmark),uri:e.bookmark.uri}}},r._getIconUrl=function(){var e=r.props,t="bookmark";if(F(e))t="home"===e.bookmark.id?"home":"work";else if(e.icon.name!==u.d||e.icon.color!==u.c)return e.icon.url;var n=e.active?"active":e.size;return D[t][n]},r._renderPlaceBookmark=function(){var e=r.props;return F(e)?a.createElement("div",{className:T("place-bookmark"),"aria-label":e.bookmark.id},a.createElement("div",{className:T("place-bookmark-icon-wrapper")},a.createElement(s.a,{url:r._getIconUrl(),className:T("place-bookmark-icon")}))):null},r._renderFavoriteBookmark=function(){var e,t=r.props;return F(t)?null:a.createElement("div",{className:T("favorite-bookmark")},a.createElement("div",{className:T("favorite-bookmark-title")},a.createElement("div",{className:T("favorite-bookmark-title-content")},"business"===c.h(t.bookmark)&&(null===(e=t.searchResult)||void 0===e?void 0:e.title)||t.bookmark.title)),a.createElement("div",{className:T("favorite-bookmark-icon-wrapper"),style:{color:t.icon.color}},a.createElement(s.a,{url:r._getIconUrl(),className:T("favorite-bookmark-icon")})))},r._renderActiveBookmark=function(){return a.createElement("div",{className:T("active-bookmark")},a.createElement(s.a,{url:r._getIconUrl()}))},r}return Object(o.a)(r,e),r.prototype.render=function(){var e=this.props;return a.createElement(d.a,Object(n.a)({},this._getAnalyticsProps(),{logClick:!0}),a.createElement(p.default,{coordinates:this._getCoordinates(),draggable:e.draggable,zIndex:this._getZIndex(),onClick:e.onClick,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onDragStart:e.onDragStart,onDragMove:e.onDragMove,onDragEnd:e.onDragEnd},a.createElement("div",{className:T({small:"small"===e.size,active:e.active,hover:e.hover,draggable:e.draggable})},e.active?this._renderActiveBookmark():F(e)?this._renderPlaceBookmark():this._renderFavoriteBookmark())))},r}(a.PureComponent);function F(e){return"coords"in e.bookmark}r.default=A}}]);